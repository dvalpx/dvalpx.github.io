<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Protección CSRF | Documentación de Laravel</title>
    <meta name="description" content="Documentación de Laravel en Español">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran:300,700|Miriam+Libre">
  <link rel="icon" href="/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.cd8c86e4.css" as="style"><link rel="preload" href="/assets/js/app.91d011ca.js" as="script"><link rel="preload" href="/assets/js/23.b880bae6.js" as="script"><link rel="prefetch" href="/assets/js/10.db84a885.js"><link rel="prefetch" href="/assets/js/11.c24036d4.js"><link rel="prefetch" href="/assets/js/12.84cb6335.js"><link rel="prefetch" href="/assets/js/13.cdae0950.js"><link rel="prefetch" href="/assets/js/14.335ffb41.js"><link rel="prefetch" href="/assets/js/15.ffac140a.js"><link rel="prefetch" href="/assets/js/16.98eb95a4.js"><link rel="prefetch" href="/assets/js/17.b8327edc.js"><link rel="prefetch" href="/assets/js/18.e31de808.js"><link rel="prefetch" href="/assets/js/19.5f783b13.js"><link rel="prefetch" href="/assets/js/2.ab9bc372.js"><link rel="prefetch" href="/assets/js/20.a1f05cfd.js"><link rel="prefetch" href="/assets/js/21.df49a923.js"><link rel="prefetch" href="/assets/js/22.df2ac2f2.js"><link rel="prefetch" href="/assets/js/24.943de90a.js"><link rel="prefetch" href="/assets/js/25.cbe75da0.js"><link rel="prefetch" href="/assets/js/26.5317ca07.js"><link rel="prefetch" href="/assets/js/27.ba20c7ed.js"><link rel="prefetch" href="/assets/js/28.50c833a6.js"><link rel="prefetch" href="/assets/js/29.8e7c950c.js"><link rel="prefetch" href="/assets/js/3.5bc65d40.js"><link rel="prefetch" href="/assets/js/30.8a2d7c5d.js"><link rel="prefetch" href="/assets/js/31.dd8a9a79.js"><link rel="prefetch" href="/assets/js/32.b73cf3da.js"><link rel="prefetch" href="/assets/js/33.b33d2573.js"><link rel="prefetch" href="/assets/js/34.5adb8130.js"><link rel="prefetch" href="/assets/js/35.6da623be.js"><link rel="prefetch" href="/assets/js/36.e2f8b56b.js"><link rel="prefetch" href="/assets/js/37.6391cd11.js"><link rel="prefetch" href="/assets/js/38.40035e52.js"><link rel="prefetch" href="/assets/js/39.e3431946.js"><link rel="prefetch" href="/assets/js/4.e4e6054c.js"><link rel="prefetch" href="/assets/js/40.dbe78196.js"><link rel="prefetch" href="/assets/js/41.98c5917e.js"><link rel="prefetch" href="/assets/js/42.1b32b9c6.js"><link rel="prefetch" href="/assets/js/43.4fc463a6.js"><link rel="prefetch" href="/assets/js/44.0cab1f4f.js"><link rel="prefetch" href="/assets/js/45.7b89313e.js"><link rel="prefetch" href="/assets/js/46.1b89aee7.js"><link rel="prefetch" href="/assets/js/47.080d876e.js"><link rel="prefetch" href="/assets/js/48.9d1786c1.js"><link rel="prefetch" href="/assets/js/49.18f0b114.js"><link rel="prefetch" href="/assets/js/5.42e39c19.js"><link rel="prefetch" href="/assets/js/50.73bfc246.js"><link rel="prefetch" href="/assets/js/51.79f1ad01.js"><link rel="prefetch" href="/assets/js/52.bca55de3.js"><link rel="prefetch" href="/assets/js/53.7dd9f94b.js"><link rel="prefetch" href="/assets/js/54.c4c2a8d3.js"><link rel="prefetch" href="/assets/js/55.33098f62.js"><link rel="prefetch" href="/assets/js/56.bc857c3a.js"><link rel="prefetch" href="/assets/js/57.f6c5ba93.js"><link rel="prefetch" href="/assets/js/58.a0c6fc6f.js"><link rel="prefetch" href="/assets/js/59.6d2e84ae.js"><link rel="prefetch" href="/assets/js/6.bcd98c2b.js"><link rel="prefetch" href="/assets/js/60.4b383eef.js"><link rel="prefetch" href="/assets/js/61.d830175f.js"><link rel="prefetch" href="/assets/js/62.82e58cea.js"><link rel="prefetch" href="/assets/js/63.884aa336.js"><link rel="prefetch" href="/assets/js/64.fb934f46.js"><link rel="prefetch" href="/assets/js/65.81242df9.js"><link rel="prefetch" href="/assets/js/66.10872c76.js"><link rel="prefetch" href="/assets/js/67.82cf60be.js"><link rel="prefetch" href="/assets/js/68.619bb4c6.js"><link rel="prefetch" href="/assets/js/69.7a0d5425.js"><link rel="prefetch" href="/assets/js/7.d3907572.js"><link rel="prefetch" href="/assets/js/70.0d0fa0dd.js"><link rel="prefetch" href="/assets/js/71.8d450d6d.js"><link rel="prefetch" href="/assets/js/72.f7db382a.js"><link rel="prefetch" href="/assets/js/73.9ac56341.js"><link rel="prefetch" href="/assets/js/74.6a847024.js"><link rel="prefetch" href="/assets/js/75.5220ec18.js"><link rel="prefetch" href="/assets/js/76.d4d7203e.js"><link rel="prefetch" href="/assets/js/77.64c49c04.js"><link rel="prefetch" href="/assets/js/78.18cfefd1.js"><link rel="prefetch" href="/assets/js/79.d541e35c.js"><link rel="prefetch" href="/assets/js/8.01c4ce89.js"><link rel="prefetch" href="/assets/js/80.13a1ee90.js"><link rel="prefetch" href="/assets/js/81.e27210a3.js"><link rel="prefetch" href="/assets/js/82.eb625382.js"><link rel="prefetch" href="/assets/js/83.393eb4bf.js"><link rel="prefetch" href="/assets/js/9.9b7e6788.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cd8c86e4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Documentación de Laravel</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div><div class="nav-item"><a href="/glossary.html" class="nav-link">Glosario</a></div><div class="nav-item"><a href="/credits.html" class="nav-link">Créditos</a></div><div class="nav-item"><a href="https://styde.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Styde
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div><div class="nav-item"><a href="/glossary.html" class="nav-link">Glosario</a></div><div class="nav-item"><a href="/credits.html" class="nav-link">Créditos</a></div><div class="nav-item"><a href="https://styde.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Styde
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Primeros pasos</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Conceptos de arquitectura</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Fundamentos</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/routing.html" class="sidebar-link">Rutas</a></li><li><a href="/middleware.html" class="sidebar-link">Middleware</a></li><li><a href="/csrf.html" class="active sidebar-link">Protección CSRF</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/csrf.html#introduccion" class="sidebar-link">Introducción</a></li><li class="sidebar-sub-header"><a href="/csrf.html#excluyendo-las-uris-de-la-proteccion-csrf" class="sidebar-link">Excluyendo las URIs de la protección CSRF</a></li><li class="sidebar-sub-header"><a href="/csrf.html#x-csrf-token" class="sidebar-link">X-CSRF-TOKEN</a></li><li class="sidebar-sub-header"><a href="/csrf.html#x-xsrf-token" class="sidebar-link">X-XSRF-TOKEN</a></li></ul></li><li><a href="/controllers.html" class="sidebar-link">Controladores</a></li><li><a href="/requests.html" class="sidebar-link">Solicitudes HTTP</a></li><li><a href="/responses.html" class="sidebar-link">Respuestas HTTP</a></li><li><a href="/views.html" class="sidebar-link">Vistas</a></li><li><a href="/urls.html" class="sidebar-link">Generación de URLs</a></li><li><a href="/session.html" class="sidebar-link">Sesión HTTP</a></li><li><a href="/validation.html" class="sidebar-link">Validación</a></li><li><a href="/errors.html" class="sidebar-link">Manejo de Errores</a></li><li><a href="/logging.html" class="sidebar-link">Registro (Logging)</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Frontend</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Seguridad</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Profundizando</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Bases de datos</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>ORM Eloquent</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Pruebas</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Paquetes oficiales</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><div><h1 id="proteccion-csrf"><a class="header-anchor" href="#proteccion-csrf" aria-hidden="true">#</a> Protección CSRF</h1> <ul><li><a href="#csrf-introduction">Introducción</a></li> <li><a href="#csrf-excluding-uris">Excluyendo URIs</a></li> <li><a href="#csrf-x-csrf-token">X-CSRF-Token</a></li> <li><a href="#csrf-x-xsrf-token">X-XSRF-Token</a></li></ul> <p><a name="csrf-introduction"></a></p> <h2 id="introduccion"><a class="header-anchor" href="#introduccion" aria-hidden="true">#</a> Introducción</h2> <p>Laravel hace que sea fácil proteger tu aplicación de ataques de tipo <a href="https://en.wikipedia.org/wiki/Cross-site_request_forgery" target="_blank" rel="noopener noreferrer">cross-site request forgery<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (CSRF). Los ataques de tipo CSRF son un tipo de explotación de vulnerabilidad malicioso por el cual comandos no autorizados son ejecutados en nombre de un usuario autenticado.</p> <p>Laravel genera automáticamente un &quot;token&quot; CSRF para cada sesión de usuario activa manejada por la aplicación. Este token es usado para verificar que el usuario autenticado es quien en realidad está haciendo la petición a la aplicación.</p> <p>En cualquier momento que definas un formulario HTML en tu aplicación, debes incluir un campo de token CSRF en el formulario con el propósito de que el middleware para protección CSRF pueda validar la solicitud. Puedes usar la directiva de Blade <code>@csrf</code> para generar el campo de token:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token operator">&lt;</span>form method<span class="token operator">=</span><span class="token double-quoted-string string">&quot;POST&quot;</span> action<span class="token operator">=</span><span class="token double-quoted-string string">&quot;/profile&quot;</span><span class="token operator">&gt;</span>
    @csrf
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
</code></pre></div><p>El <a href="/middleware.html">middleware</a> <code>VerifyCsrfToken</code>, el cual es incluido en el grupo de middleware <code>web</code>, verificará automáticamente que el token en el campo de la solicitud coincida con el almacenado en la sesión.</p> <h4 id="tokens-csrf-javascript"><a class="header-anchor" href="#tokens-csrf-javascript" aria-hidden="true">#</a> Tokens CSRF &amp; JavaScript</h4> <p>Cuando se crean aplicaciones controladas por JavaScript, es conveniente hacer que tu biblioteca HTTP de JavaScript agregue el token CSRF a cada petición saliente. Por defecto, el archivo <code>resources/js/bootstrap.js</code> registra el valor de la meta etiqueta <code>csrf-token</code> con la biblioteca HTTP Axios. Si no estás usando esta biblioteca, necesitarás configurar este comportamiento de forma manual para tu aplicación.</p> <p><a name="csrf-excluding-uris"></a></p> <h2 id="excluyendo-las-uris-de-la-proteccion-csrf"><a class="header-anchor" href="#excluyendo-las-uris-de-la-proteccion-csrf" aria-hidden="true">#</a> Excluyendo las URIs de la protección CSRF</h2> <p>Algunas veces puedes desear excluir un conjunto de URIs de la protección CSRF. Por ejemplo, si estás usando <a href="https://stripe.com" target="_blank" rel="noopener noreferrer">Stripe<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> para procesar pagos y estás utilizando su sistema webhook, necesitarás excluir tu ruta de manejador webhook de Stripe de la protección CSRF ya que Stripe no sabrá que token CSRF enviar a sus rutas.</p> <p>Típicamente, deberías colocar este tipo de rutas afuera del grupo de middleware <code>web</code> que el <code>RouteServiceProvider</code> aplica a todas las rutas en el archivo <code>routes/web.php</code>. Sin embargo, también puedes excluir las rutas al añadir sus URIs a la propiedad <code>except</code> del middleware <code>VerifyCsrfToken</code>:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Middleware</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Foundation<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Middleware<span class="token punctuation">\</span>VerifyCsrfToken</span> <span class="token keyword">as</span> Middleware<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">VerifyCsrfToken</span> <span class="token keyword">extends</span> <span class="token class-name">Middleware</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * The URIs that should be excluded from CSRF verification.
    *
    * @var array
    */</span>
    <span class="token keyword">protected</span> <span class="token variable">$except</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'stripe/*'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'http://example.com/foo/bar'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'http://example.com/foo/*'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>El middleware CSRF está deshabilitado automáticamente al <a href="/testing.html">ejecutar pruebas</a>.</p></div></div> <p><a name="csrf-x-csrf-token"></a></p> <h2 id="x-csrf-token"><a href="#x-csrf-token" aria-hidden="true" class="header-anchor">#</a> X-CSRF-TOKEN</h2> <p>Además de comprobar el token CSRF como parámetro POST, el middleware <code>VerifyCsrfToken</code> también comprobará el encabezado de solicitud <code>X-CSRF-TOKEN</code>. Podrías, por ejemplo, almacenar el token en una etiqueta <code>meta</code> de HTML:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token double-quoted-string string">&quot;csrf-token&quot;</span> content<span class="token operator">=</span><span class="token double-quoted-string string">&quot;{{ csrf_token() }}&quot;</span><span class="token operator">&gt;</span>
</code></pre></div><p>Entonces, una vez que has creado la etiqueta <code>meta</code>, puedes instruir una biblioteca como jQuery para añadir automáticamente el token a todos los encabezados de las peticiones. Esto proporciona protección CSRF fácil y conveniente para tus aplicaciones basadas en AJAX.</p> <div class="language-php extra-class"><pre class="language-php"><code>$<span class="token punctuation">.</span><span class="token function">ajaxSetup</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    headers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token single-quoted-string string">'X-CSRF-TOKEN'</span><span class="token punctuation">:</span> $<span class="token punctuation">(</span><span class="token single-quoted-string string">'meta[name=&quot;csrf-token&quot;]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'content'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Por defecto, el archivo <code>resources/js/bootstrap.js</code> registra el valor de la etiqueta meta <code>csrf-token</code> con la biblioteca HTTP Axios. Si no estás usando esta biblioteca, necesitarás configurar este comportamiento de forma manual para tu aplicación.</p></div> <p><a name="csrf-x-xsrf-token"></a></p> <h2 id="x-xsrf-token"><a href="#x-xsrf-token" aria-hidden="true" class="header-anchor">#</a> X-XSRF-TOKEN</h2> <p>Laravel almacena el token CSRF actual en una cookie <code>XSRF-TOKEN</code> que es incluida con cada respuesta generada por el framework. Puedes usar el valor del cookie para establecer el encabezado de la solicitud <code>X-XSRF-TOKEN</code>.</p> <p>Esta cookie primeramente es enviada por conveniencia ya que algunos frameworks JavaScript y librerías, como Angular y Axios colocan automáticamente su valor en el encabezado <code>X-XSRF-TOKEN</code>.</p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/middleware.html" class="prev">
          Middleware
        </a></span> <span class="next"><a href="/controllers.html">
          Controladores
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.91d011ca.js" defer></script><script src="/assets/js/23.b880bae6.js" defer></script>
  </body>
</html>
