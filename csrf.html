<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VuePress</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.cf5cbaa5.css" as="style"><link rel="preload" href="/assets/js/app.d18a7e07.js" as="script"><link rel="preload" href="/assets/js/2.8e5ca9eb.js" as="script"><link rel="preload" href="/assets/js/22.47d672e1.js" as="script"><link rel="prefetch" href="/assets/js/10.9d8f190d.js"><link rel="prefetch" href="/assets/js/11.713069e3.js"><link rel="prefetch" href="/assets/js/12.8798d21a.js"><link rel="prefetch" href="/assets/js/13.332045e2.js"><link rel="prefetch" href="/assets/js/14.bda55a54.js"><link rel="prefetch" href="/assets/js/15.1c16c325.js"><link rel="prefetch" href="/assets/js/16.bbe1ecdf.js"><link rel="prefetch" href="/assets/js/17.068bc26e.js"><link rel="prefetch" href="/assets/js/18.d6a2ed70.js"><link rel="prefetch" href="/assets/js/19.9bbd4323.js"><link rel="prefetch" href="/assets/js/20.4a827d15.js"><link rel="prefetch" href="/assets/js/21.932f5ef3.js"><link rel="prefetch" href="/assets/js/23.63218e36.js"><link rel="prefetch" href="/assets/js/24.2c933036.js"><link rel="prefetch" href="/assets/js/25.2a9ac4af.js"><link rel="prefetch" href="/assets/js/26.b15e2a59.js"><link rel="prefetch" href="/assets/js/27.be0ff65a.js"><link rel="prefetch" href="/assets/js/28.aadf08f5.js"><link rel="prefetch" href="/assets/js/29.0e4ec215.js"><link rel="prefetch" href="/assets/js/3.0101ea7c.js"><link rel="prefetch" href="/assets/js/30.831305bd.js"><link rel="prefetch" href="/assets/js/31.afb33274.js"><link rel="prefetch" href="/assets/js/32.68089cf5.js"><link rel="prefetch" href="/assets/js/33.f7ed913e.js"><link rel="prefetch" href="/assets/js/34.4cddf81d.js"><link rel="prefetch" href="/assets/js/35.afbc7954.js"><link rel="prefetch" href="/assets/js/36.bc235e6d.js"><link rel="prefetch" href="/assets/js/37.cec3e2cc.js"><link rel="prefetch" href="/assets/js/38.177ed69f.js"><link rel="prefetch" href="/assets/js/39.e7e298ee.js"><link rel="prefetch" href="/assets/js/4.a2109108.js"><link rel="prefetch" href="/assets/js/40.f621f4d5.js"><link rel="prefetch" href="/assets/js/41.0994bd46.js"><link rel="prefetch" href="/assets/js/42.4debbf07.js"><link rel="prefetch" href="/assets/js/43.d73341a8.js"><link rel="prefetch" href="/assets/js/44.302a1d16.js"><link rel="prefetch" href="/assets/js/45.df1e9e80.js"><link rel="prefetch" href="/assets/js/46.5da4e78a.js"><link rel="prefetch" href="/assets/js/47.af4aeb70.js"><link rel="prefetch" href="/assets/js/48.1c6cac1a.js"><link rel="prefetch" href="/assets/js/49.73c1cc2c.js"><link rel="prefetch" href="/assets/js/5.886a8536.js"><link rel="prefetch" href="/assets/js/50.3653355c.js"><link rel="prefetch" href="/assets/js/51.f48454e2.js"><link rel="prefetch" href="/assets/js/52.fe1537a5.js"><link rel="prefetch" href="/assets/js/53.f53a4944.js"><link rel="prefetch" href="/assets/js/54.77ad79c0.js"><link rel="prefetch" href="/assets/js/55.a7dce0c8.js"><link rel="prefetch" href="/assets/js/56.2a61f71d.js"><link rel="prefetch" href="/assets/js/57.f958f8cd.js"><link rel="prefetch" href="/assets/js/58.c91cb9c9.js"><link rel="prefetch" href="/assets/js/59.726c9fa1.js"><link rel="prefetch" href="/assets/js/6.f7c00904.js"><link rel="prefetch" href="/assets/js/60.3f31de0a.js"><link rel="prefetch" href="/assets/js/61.7ad03400.js"><link rel="prefetch" href="/assets/js/62.7d96c317.js"><link rel="prefetch" href="/assets/js/63.98a36806.js"><link rel="prefetch" href="/assets/js/64.e0445065.js"><link rel="prefetch" href="/assets/js/65.1d583bc8.js"><link rel="prefetch" href="/assets/js/66.1ca08e1b.js"><link rel="prefetch" href="/assets/js/67.a6af6188.js"><link rel="prefetch" href="/assets/js/68.47b5f882.js"><link rel="prefetch" href="/assets/js/69.215666c5.js"><link rel="prefetch" href="/assets/js/7.9e06b9d3.js"><link rel="prefetch" href="/assets/js/70.2c9f04a2.js"><link rel="prefetch" href="/assets/js/71.1eb0d68f.js"><link rel="prefetch" href="/assets/js/72.28241988.js"><link rel="prefetch" href="/assets/js/73.fc04168a.js"><link rel="prefetch" href="/assets/js/74.3d242ebf.js"><link rel="prefetch" href="/assets/js/75.3cda21e9.js"><link rel="prefetch" href="/assets/js/76.785cfa56.js"><link rel="prefetch" href="/assets/js/77.25a3cfe2.js"><link rel="prefetch" href="/assets/js/78.a8f98b1a.js"><link rel="prefetch" href="/assets/js/79.c51ea229.js"><link rel="prefetch" href="/assets/js/8.f19546fb.js"><link rel="prefetch" href="/assets/js/80.21189343.js"><link rel="prefetch" href="/assets/js/9.e056c469.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cf5cbaa5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><div><h1 id="proteccion-csrf"><a class="header-anchor" href="#proteccion-csrf">#</a> Protección CSRF</h1> <ul><li><a href="#csrf-introduction">Introducción</a></li> <li><a href="#csrf-excluding-uris">Excluyendo URIs</a></li> <li><a href="#csrf-x-csrf-token">X-CSRF-Token</a></li> <li><a href="#csrf-x-xsrf-token">X-XSRF-Token</a></li></ul> <p><a name="csrf-introduction"></a></p> <h2 id="introduccion"><a class="header-anchor" href="#introduccion">#</a> Introducción</h2> <p>Laravel hace que sea fácil proteger tu aplicación de ataques de tipo <a href="https://en.wikipedia.org/wiki/Cross-site_request_forgery" target="_blank" rel="noopener noreferrer">cross-site request forgery<OutboundLink></OutboundLink></a> (CSRF). Los ataques de tipo CSRF son un tipo de explotación de vulnerabilidad malicioso por el cual comandos no autorizados son ejecutados en nombre de un usuario autenticado.</p> <p>Laravel genera automáticamente un &quot;token&quot; CSRF para cada sesión de usuario activa manejada por la aplicación. Este token es usado para verificar que el usuario autenticado es quien en realidad está haciendo la petición a la aplicación.</p> <p>En cualquier momento que definas un formulario HTML en tu aplicación, debes incluir un campo de token CSRF oculto en el formulario para que el middleware de protección CSRF pueda validar la solicitud. Puedes usar la directiva de Blade <code>@csrf</code> para generar el campo de token:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token operator">&lt;</span>form method<span class="token operator">=</span><span class="token double-quoted-string string">&quot;POST&quot;</span> action<span class="token operator">=</span><span class="token double-quoted-string string">&quot;/profile&quot;</span><span class="token operator">&gt;</span>
    @csrf
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
</code></pre></div><p>El <RouterLink to="/middleware.html">middleware</RouterLink> <code>VerifyCsrfToken</code>, el cual es incluido en el grupo de middleware <code>web</code>, verificará automáticamente que el token en el campo de la solicitud coincida con el almacenado en la sesión.</p> <h4 id="tokens-csrf-javascript"><a class="header-anchor" href="#tokens-csrf-javascript">#</a> Tokens CSRF &amp; JavaScript</h4> <p>Cuando se crean aplicaciones controladas por JavaScript, es conveniente hacer que tu librería HTTP de JavaScript agregue automáticamente el token CSRF a cada petición saliente. Por defecto, la librería HTTP Axios proporcionada en el archivo <code>resources/js/bootstrap.js</code> automáticamente envía un header <code>X-XSRF-TOKEN</code> usando el valor de la cookie encriptada <code>XSRF-TOKEN</code>. Si no estás usando esta librería, necesitarás configurar de forma manual este comportamiento en tus aplicaciones.</p> <p><a name="csrf-excluding-uris"></a></p> <h2 id="excluyendo-las-uris-de-la-proteccion-csrf"><a class="header-anchor" href="#excluyendo-las-uris-de-la-proteccion-csrf">#</a> Excluyendo las URIs de la protección CSRF</h2> <p>Algunas veces puedes desear excluir un conjunto de URIs de la protección CSRF. Por ejemplo, si estás usando <a href="https://stripe.com" target="_blank" rel="noopener noreferrer">Stripe<OutboundLink></OutboundLink></a> para procesar pagos y estás utilizando su sistema webhook, necesitarás excluir tu ruta de manejador webhook de Stripe de la protección CSRF ya que Stripe no sabrá que token CSRF enviar a sus rutas.</p> <p>Típicamente, deberías colocar este tipo de rutas fuera del grupo de middleware <code>web</code> que el <code>RouteServiceProvider</code> aplica a todas las rutas en el archivo <code>routes/web.php</code>. Sin embargo, también puedes excluir las rutas al añadir sus URIs a la propiedad <code>except</code> del middleware <code>VerifyCsrfToken</code>:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Middleware</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Foundation<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Middleware<span class="token punctuation">\</span>VerifyCsrfToken</span> <span class="token keyword">as</span> Middleware<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">VerifyCsrfToken</span> <span class="token keyword">extends</span> <span class="token class-name">Middleware</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * The URIs that should be excluded from CSRF verification.
    *
    * @var array
    */</span>
    <span class="token keyword">protected</span> <span class="token variable">$except</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'stripe/*'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'http://example.com/foo/bar'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'http://example.com/foo/*'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>El middleware CSRF está deshabilitado automáticamente al <RouterLink to="/testing.html">ejecutar pruebas</RouterLink>.</p></div></div><p><a name="csrf-x-csrf-token"></a></p> <h2 id="x-csrf-token"><a href="#x-csrf-token" class="header-anchor">#</a> X-CSRF-TOKEN</h2> <p>Además de comprobar el token CSRF como parámetro POST, el middleware <code>VerifyCsrfToken</code> también comprobará el encabezado de solicitud <code>X-CSRF-TOKEN</code>. Podrías, por ejemplo, almacenar el token en una etiqueta <code>meta</code> de HTML:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token double-quoted-string string">&quot;csrf-token&quot;</span> content<span class="token operator">=</span><span class="token double-quoted-string string">&quot;{{ csrf_token() }}&quot;</span><span class="token operator">&gt;</span>
</code></pre></div><p>Entonces, una vez que has creado la etiqueta <code>meta</code>, puedes instruir una biblioteca como jQuery para añadir automáticamente el token a todos los encabezados de las peticiones. Esto proporciona protección CSRF fácil y conveniente para tus aplicaciones basadas en AJAX.</p> <div class="language-php extra-class"><pre class="language-php"><code>$<span class="token punctuation">.</span><span class="token function">ajaxSetup</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    headers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token single-quoted-string string">'X-CSRF-TOKEN'</span><span class="token punctuation">:</span> $<span class="token punctuation">(</span><span class="token single-quoted-string string">'meta[name=&quot;csrf-token&quot;]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'content'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="csrf-x-xsrf-token"></a></p> <h2 id="x-xsrf-token"><a href="#x-xsrf-token" class="header-anchor">#</a> X-XSRF-TOKEN</h2> <p>Laravel almacena el token CSRF actual en una cookie <code>XSRF-TOKEN</code> encriptada que es incluida con cada respuesta generada por el framework. Puedes usar el valor del cookie para establecer el encabezado de la solicitud <code>X-XSRF-TOKEN</code>.</p> <p>Esta cookie primeramente es enviada por conveniencia ya que algunos frameworks JavaScript y librerías, como Angular y Axios, colocan automáticamente su valor en el encabezado <code>X-XSRF-TOKEN</code> en las solicitudes de mismo origen.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Por defecto, el archivo <code>resources/js/bootstrap.js</code> incluye la librería HTTP Axios que enviará automáticamente esto por ti.</p></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d18a7e07.js" defer></script><script src="/assets/js/2.8e5ca9eb.js" defer></script><script src="/assets/js/22.47d672e1.js" defer></script>
  </body>
</html>
