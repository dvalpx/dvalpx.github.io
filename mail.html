<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VuePress</title>
    <meta name="generator" content="VuePress 1.8.1">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.f7a12d87.css" as="style"><link rel="preload" href="/assets/js/app.b2060dbf.js" as="script"><link rel="preload" href="/assets/js/2.648c6578.js" as="script"><link rel="preload" href="/assets/js/49.da492613.js" as="script"><link rel="prefetch" href="/assets/js/10.20cff712.js"><link rel="prefetch" href="/assets/js/11.f0ca56a6.js"><link rel="prefetch" href="/assets/js/12.5865c9a5.js"><link rel="prefetch" href="/assets/js/13.8e509b37.js"><link rel="prefetch" href="/assets/js/14.c963e1d9.js"><link rel="prefetch" href="/assets/js/15.b917edb6.js"><link rel="prefetch" href="/assets/js/16.a13d2a39.js"><link rel="prefetch" href="/assets/js/17.d6b71ec0.js"><link rel="prefetch" href="/assets/js/18.adbe50b4.js"><link rel="prefetch" href="/assets/js/19.a1638529.js"><link rel="prefetch" href="/assets/js/20.393f35ab.js"><link rel="prefetch" href="/assets/js/21.a9dd9148.js"><link rel="prefetch" href="/assets/js/22.087385e4.js"><link rel="prefetch" href="/assets/js/23.b6ce1d9c.js"><link rel="prefetch" href="/assets/js/24.a74b28c6.js"><link rel="prefetch" href="/assets/js/25.7a984c35.js"><link rel="prefetch" href="/assets/js/26.7d6e6324.js"><link rel="prefetch" href="/assets/js/27.e36a56dc.js"><link rel="prefetch" href="/assets/js/28.358fc226.js"><link rel="prefetch" href="/assets/js/29.f4fd2139.js"><link rel="prefetch" href="/assets/js/3.40d230a8.js"><link rel="prefetch" href="/assets/js/30.564d0795.js"><link rel="prefetch" href="/assets/js/31.0691b4c8.js"><link rel="prefetch" href="/assets/js/32.088de00e.js"><link rel="prefetch" href="/assets/js/33.4d884bb7.js"><link rel="prefetch" href="/assets/js/34.c4be32cd.js"><link rel="prefetch" href="/assets/js/35.b78c77b2.js"><link rel="prefetch" href="/assets/js/36.ceed3144.js"><link rel="prefetch" href="/assets/js/37.f9d6aca2.js"><link rel="prefetch" href="/assets/js/38.67ad3e03.js"><link rel="prefetch" href="/assets/js/39.5e3e70a7.js"><link rel="prefetch" href="/assets/js/4.e81ef12f.js"><link rel="prefetch" href="/assets/js/40.0510efa5.js"><link rel="prefetch" href="/assets/js/41.9e44f095.js"><link rel="prefetch" href="/assets/js/42.ebc7d9c8.js"><link rel="prefetch" href="/assets/js/43.e5970289.js"><link rel="prefetch" href="/assets/js/44.f91a9970.js"><link rel="prefetch" href="/assets/js/45.4c6c0518.js"><link rel="prefetch" href="/assets/js/46.f8702e02.js"><link rel="prefetch" href="/assets/js/47.fadd0db4.js"><link rel="prefetch" href="/assets/js/48.457d9287.js"><link rel="prefetch" href="/assets/js/5.dc790133.js"><link rel="prefetch" href="/assets/js/50.cab6e13d.js"><link rel="prefetch" href="/assets/js/51.0765def4.js"><link rel="prefetch" href="/assets/js/52.518165a7.js"><link rel="prefetch" href="/assets/js/53.1e887b4a.js"><link rel="prefetch" href="/assets/js/54.c83d5c9e.js"><link rel="prefetch" href="/assets/js/55.2e54a7e8.js"><link rel="prefetch" href="/assets/js/56.169c81e5.js"><link rel="prefetch" href="/assets/js/57.a4ef4ed1.js"><link rel="prefetch" href="/assets/js/58.78dc0897.js"><link rel="prefetch" href="/assets/js/59.f13515c7.js"><link rel="prefetch" href="/assets/js/6.de2c94ff.js"><link rel="prefetch" href="/assets/js/60.ebfdeb63.js"><link rel="prefetch" href="/assets/js/61.6523e015.js"><link rel="prefetch" href="/assets/js/62.cb19c9bd.js"><link rel="prefetch" href="/assets/js/63.6ae10337.js"><link rel="prefetch" href="/assets/js/64.50298a81.js"><link rel="prefetch" href="/assets/js/65.d1849c5b.js"><link rel="prefetch" href="/assets/js/66.caef6860.js"><link rel="prefetch" href="/assets/js/67.a2788988.js"><link rel="prefetch" href="/assets/js/68.1c43eae0.js"><link rel="prefetch" href="/assets/js/69.e16965c5.js"><link rel="prefetch" href="/assets/js/7.0466c7e3.js"><link rel="prefetch" href="/assets/js/70.e66fe735.js"><link rel="prefetch" href="/assets/js/71.6d49148f.js"><link rel="prefetch" href="/assets/js/72.c3d54f60.js"><link rel="prefetch" href="/assets/js/73.125d4466.js"><link rel="prefetch" href="/assets/js/74.f1ed7f47.js"><link rel="prefetch" href="/assets/js/75.2f92d842.js"><link rel="prefetch" href="/assets/js/76.634dc6b8.js"><link rel="prefetch" href="/assets/js/77.db030077.js"><link rel="prefetch" href="/assets/js/78.ef9b3a22.js"><link rel="prefetch" href="/assets/js/79.a9b05b84.js"><link rel="prefetch" href="/assets/js/8.5e61c195.js"><link rel="prefetch" href="/assets/js/80.88069fe6.js"><link rel="prefetch" href="/assets/js/9.78ebe7b2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f7a12d87.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><div><h1 id="correos-electronicos"><a class="header-anchor" href="#correos-electronicos">#</a> Correos Electrónicos</h1> <ul><li><a href="#introduction">Introducción</a> <ul><li><a href="#driver-prerequisites">Requisitos previos del driver</a></li></ul></li> <li><a href="#generating-mailables">Generando mailables</a></li> <li><a href="#writing-mailables">Escribiendo mailables</a> <ul><li><a href="#configuring-the-sender">Configurando el envío</a></li> <li><a href="#configuring-the-view">Configurando la vista</a></li> <li><a href="#view-data">Datos en vistas</a></li> <li><a href="#attachments">Archivos adjuntos</a></li> <li><a href="#inline-attachments">Archivos adjuntos en línea</a></li> <li><a href="#customizing-the-swiftmailer-message">Personalizar el mensaje de SwiftMailer</a></li></ul></li> <li><a href="#markdown-mailables">Mailables en markdown</a> <ul><li><a href="#generating-markdown-mailables">Generando mailables en markdown</a></li> <li><a href="#writing-markdown-messages">Escribiendo mensajes en markdown</a></li> <li><a href="#customizing-the-components">Personalizando los componentes</a></li></ul></li> <li><a href="#sending-mail">Enviando correo</a> <ul><li><a href="#queueing-mail">Colas de correos</a></li></ul></li> <li><a href="#rendering-mailables">Renderizando mailables</a> <ul><li><a href="#previewing-mailables-in-the-browser">Previsualizando mailables en el navegador</a></li></ul></li> <li><a href="#localizing-mailables">Configuración regional de mailables</a></li> <li><a href="#mail-and-local-development">Correos y desarrollo Local</a></li> <li><a href="#events">Eventos</a></li></ul> <p><a name="introduction"></a></p> <h2 id="introduccion"><a class="header-anchor" href="#introduccion">#</a> Introducción</h2> <p>Laravel proporciona una API limpia y simple sobre la popular biblioteca <a href="https://swiftmailer.symfony.com/" target="_blank" rel="noopener noreferrer">SwiftMailer<OutboundLink></OutboundLink></a> con drivers para SMTP, Mailgun, Postmark, Amazon SES y <code>sendmail</code>, permitiéndote comenzar rápidamente a enviar correos a través de un servicio local o en la nube de tu elección.</p> <p><a name="driver-prerequisites"></a></p> <h3 id="requisitos-previos-del-driver"><a class="header-anchor" href="#requisitos-previos-del-driver">#</a> Requisitos previos del driver</h3> <p>Los drivers basados ​​en una API como Mailgun y Postmark suelen ser más simples y rápidos que los servidores SMTP. Si es posible, deberías usar uno de estos drivers. Todos los drivers con API requieren la biblioteca Guzzle HTTP, que puede instalarse a través del manejador de paquetes Composer:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code>composer <span class="token keyword">require</span> guzzlehttp<span class="token operator">/</span>guzzle
</code></pre></div><h4 id="driver-mailgun"><a class="header-anchor" href="#driver-mailgun">#</a> Driver Mailgun</h4> <p>Para usar el driver de Mailgun, primero instala Guzzle, luego configura la opción <code>driver</code> en tu archivo de configuración <code>config/mail.php</code> en <code>mailgun</code>. Luego, verifica que tu archivo de configuración <code>config/services.php</code> contenga las siguientes opciones:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token string single-quoted-string">'mailgun'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'domain'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'your-mailgun-domain'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'secret'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'your-mailgun-key'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Si no estás usando la <a href="https://documentation.mailgun.com/en/latest/api-intro.html#mailgun-regions" target="_blank" rel="noopener noreferrer">región de Mailgun<OutboundLink></OutboundLink></a> &quot;US&quot;, puedes definir el endpoint de tu región en el archivo de configuración <code>services</code>:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token string single-quoted-string">'mailgun'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'domain'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'your-mailgun-domain'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'secret'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'your-mailgun-key'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'endpoint'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'api.eu.mailgun.net'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="driver-postmark"><a class="header-anchor" href="#driver-postmark">#</a> Driver Postmark</h4> <p>Para usar el driver de Postmark, instala el transporte de SwiftMailer de Postmark mediante Composer:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code>composer <span class="token keyword">require</span> wildbit<span class="token operator">/</span>swiftmailer<span class="token operator">-</span>postmark
</code></pre></div><p>Luego, instala Guzzle y establece la opción <code>driver</code> en tu archivo de configuración <code>config/mail.php</code> a <code>postmark</code>. Finalmente, verifica que tu archivo de configuración <code>config/services.php</code> contiene las siguientes opciones:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token string single-quoted-string">'postmark'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'token'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'your-postmark-token'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="driver-ses"><a class="header-anchor" href="#driver-ses">#</a> Driver SES</h4> <p>Para usar el driver de Amazon SES, primero debes instalar Amazon AWS SDK para PHP. Puedes instalar esta librería agregando la siguiente línea a la sección <code>require</code> del archivo <code>composer.json</code> y ejecutando el comando <code>composer update</code>:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token string double-quoted-string">&quot;aws/aws-sdk-php&quot;</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">&quot;~3.0&quot;</span>
</code></pre></div><p>A continuación, configura la opción <code>driver</code> en tu archivo de configuración <code>config/mail.php</code> en <code>ses</code> y verifica que tu archivo de configuración <code>config/services.php</code> contenga las siguientes opciones:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token string single-quoted-string">'ses'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'key'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'your-ses-key'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'secret'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'your-ses-secret'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'region'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'ses-region'</span><span class="token punctuation">,</span>  <span class="token comment">// e.g. us-east-1</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Si necesitas incluir <a href="https://docs.aws.amazon.com/aws-sdk-php/v3/api/api-email-2010-12-01.html#sendrawemail" target="_blank" rel="noopener noreferrer">opciones adicionales<OutboundLink></OutboundLink></a> al ejecutar la solicitud <code>SendRawEmail</code> de SES, puedes definir un arreglo <code>options</code> dentro de tu configuración de <code>ses</code>:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token string single-quoted-string">'ses'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'key'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'your-ses-key'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'secret'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'your-ses-secret'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'region'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'ses-region'</span><span class="token punctuation">,</span>  <span class="token comment">// e.g. us-east-1</span>
    <span class="token string single-quoted-string">'options'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'ConfigurationSetName'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'MyConfigurationSet'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'Tags'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
            <span class="token punctuation">[</span>
                <span class="token string single-quoted-string">'Name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'foo'</span><span class="token punctuation">,</span>
                <span class="token string single-quoted-string">'Value'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'bar'</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p><a name="generating-mailables"></a></p> <h2 id="generando-mailables"><a class="header-anchor" href="#generando-mailables">#</a> Generando mailables</h2> <p>En Laravel, cada tipo de correo electrónico enviado por tu aplicación se representa como una clase &quot;mailable&quot;. Estas clases se almacenan en el directorio <code>app/Mail</code>. No te preocupes si no ves este directorio en tu aplicación, ya que se generará para ti cuando crees tu primera clase mailable usando el comando <code>make:mail</code>:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code>php artisan <span class="token argument-name">make</span><span class="token punctuation">:</span>mail OrderShipped
</code></pre></div><p><a name="writing-mailables"></a></p> <h2 id="escribiendo-mailables"><a class="header-anchor" href="#escribiendo-mailables">#</a> Escribiendo mailables</h2> <p>Toda la configuración de una clase mailable se realiza en el método <code>build</code>. Dentro de este método, puedes llamar a varios métodos como <code>from</code>, <code>subject</code>, <code>view</code> y <code>attach</code> para configurar la presentación y entrega del correo electrónico.</p> <p><a name="configuring-the-sender"></a></p> <h3 id="configurando-el-remitente"><a class="header-anchor" href="#configurando-el-remitente">#</a> Configurando el remitente</h3> <h4 id="usando-el-metodo-from"><a class="header-anchor" href="#usando-el-metodo-from">#</a> Usando el método <code>from</code></h4> <p>Primero, exploremos la configuración del remitente para el correo electrónico. O, en otras palabras, de quién será el correo electrónico (from). Hay dos formas de configurar el remitente. En primer lugar, puedes usar el método <code>from</code> dentro del método <code>build</code> de tu clase mailable:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'example@example.com'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'emails.orders.shipped'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="usando-una-direccion-global-con-from"><a class="header-anchor" href="#usando-una-direccion-global-con-from">#</a> Usando una dirección global con <code>from</code></h4> <p>Sin embargo, si tu aplicación utiliza la misma dirección &quot;from&quot; para todos sus correos electrónicos, puede resultar engorroso llamar al método <code>from</code> en cada clase mailable que generes. En su lugar, puedes especificar una dirección global &quot;from&quot; en tu archivo de configuración <code>config/mail.php</code>. Esta dirección se usará si no se especifica ninguna otra dirección &quot;from&quot; dentro de la clase mailable:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token string single-quoted-string">'from'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'address'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'example@example.com'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'App Name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Adicionalmente, puedes definir una dirección global &quot;reply_to&quot; dentro de tu archivo de configuración <code>config/mail.php</code>:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token string single-quoted-string">'reply_to'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'address'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'example@example.com'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'App Name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p><a name="configuring-the-view"></a></p> <h3 id="configurando-la-vista"><a class="header-anchor" href="#configurando-la-vista">#</a> Configurando la vista</h3> <p>Dentro de un método <code>build</code> de la clase mailable, puedes usar el método <code>view</code> para especificar qué plantilla se debe usar al renderizar los contenidos del correo electrónico. Dado que cada correo electrónico generalmente usa una <RouterLink to="/blade.html">Plantilla Blade</RouterLink> para renderizar sus contenidos, tienes toda la potencia y la comodidad del motor de plantillas Blade al construir el HTML de tu correo electrónico:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'emails.orders.shipped'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Es posible que desees crear un directorio <code>resources/views/emails</code> para albergar todas tus plantillas de correos electrónicos; sin embargo, puedes colocarlos donde quieras siempre y cuando estén dentro del directorio <code>resources/views</code>.</p></div></div><h4 id="correos-con-texto-plano"><a href="#correos-con-texto-plano" class="header-anchor">#</a> Correos con texto plano</h4> <p>Si deseas definir una versión de texto sin formato en tu correo electrónico, puedes usar el método <code>text</code>. Al igual que el método <code>view</code>, el método <code>text</code> acepta un nombre de plantilla que se usará para renderizar el contenido del correo electrónico. Eres libre de definir una versión HTML y de texto sin formato del mensaje:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'emails.orders.shipped'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'emails.orders.shipped_plain'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="view-data"></a></p> <h3 id="datos-en-vistas"><a href="#datos-en-vistas" class="header-anchor">#</a> Datos en vistas</h3> <h4 id="a-traves-de-propiedades-publicas"><a href="#a-traves-de-propiedades-publicas" class="header-anchor">#</a> A través de propiedades públicas</h4> <p>Por lo general, querrás pasar algunos datos a tu vista que puedes utilizar al renderizar el HTML del correo electrónico. Hay dos maneras en que puedes hacer que los datos estén disponibles para la vista. Primero, cualquier propiedad pública definida en tu clase mailable se pondrá automáticamente a disposición de la vista. Entonces, por ejemplo, puedes pasar datos al constructor de tu clase mailable y establecer esos datos a propiedades públicas definidas en la clase:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Mail</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Order</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Bus<span class="token punctuation">\</span>Queueable</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Mail<span class="token punctuation">\</span>Mailable</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Queue<span class="token punctuation">\</span>SerializesModels</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">OrderShipped</span> <span class="token keyword">extends</span> <span class="token class-name">Mailable</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">Queueable</span><span class="token punctuation">,</span> SerializesModels<span class="token punctuation">;</span>

    <span class="token comment">/**
    * The order instance.
    *
    * @var Order
    */</span>
    <span class="token keyword">public</span> <span class="token variable">$order</span><span class="token punctuation">;</span>

    <span class="token comment">/**
    * Create a new message instance.
    *
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Order</span> <span class="token variable">$order</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">order</span> <span class="token operator">=</span> <span class="token variable">$order</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
    * Build the message.
    *
    * @return $this
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'emails.orders.shipped'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Una vez que los datos se han establecido en una propiedad pública, estarán automáticamente disponibles en tu vista, por lo que puedes acceder a ella como si tuvieras acceso a cualquier otro dato en tus plantillas Blade:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token argument-name">Price</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$order</span><span class="token operator">-&gt;</span><span class="token property">price</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><h4 id="a-traves-del-metodo-with"><a href="#a-traves-del-metodo-with" class="header-anchor">#</a> A través del método <code>with</code>:</h4> <p>Si deseas personalizar el formato de los datos de tu correo electrónico antes de enviarlos a la plantilla, puedes pasar manualmente los datos a la vista mediante el método <code>with</code>. Por lo general, aún podrás pasar datos a través del constructor de la clase mailable; sin embargo, debes establecer estos datos en propiedades <code>protected</code> o <code>private</code> para que los datos no estén automáticamente disponibles para la plantilla. Luego, al llamar al método <code>with</code>, pasa un arreglo de datos que deseas poner a disposición de la plantilla:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Mail</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Order</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Bus<span class="token punctuation">\</span>Queueable</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Mail<span class="token punctuation">\</span>Mailable</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Queue<span class="token punctuation">\</span>SerializesModels</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">OrderShipped</span> <span class="token keyword">extends</span> <span class="token class-name">Mailable</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">Queueable</span><span class="token punctuation">,</span> SerializesModels<span class="token punctuation">;</span>

    <span class="token comment">/**
    * The order instance.
    *
    * @var Order
    */</span>
    <span class="token keyword">protected</span> <span class="token variable">$order</span><span class="token punctuation">;</span>

    <span class="token comment">/**
    * Create a new message instance.
    *
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Order</span> <span class="token variable">$order</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">order</span> <span class="token operator">=</span> <span class="token variable">$order</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
    * Build the message.
    *
    * @return $this
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'emails.orders.shipped'</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                        <span class="token string single-quoted-string">'orderName'</span> <span class="token operator">=&gt;</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">order</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">,</span>
                        <span class="token string single-quoted-string">'orderPrice'</span> <span class="token operator">=&gt;</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">order</span><span class="token operator">-&gt;</span><span class="token property">price</span><span class="token punctuation">,</span>
                    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Una vez que los datos se han pasado con el método <code>with</code>, estarán automáticamente disponibles en la vista, por lo que puedes acceder a ellos como lo harías con cualquier otro dato en las plantillas Blade:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token argument-name">Price</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$orderPrice</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><p><a name="attachments"></a></p> <h3 id="archivos-adjuntos"><a href="#archivos-adjuntos" class="header-anchor">#</a> Archivos adjuntos</h3> <p>Para agregar archivos adjuntos a un correo electrónico, podemos usar el método <code>attach</code> dentro del método <code>build</code> de la clase mailable. El método <code>attach</code> acepta la ruta completa al archivo como su primer argumento:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'emails.orders.shipped'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/path/to/file'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Al adjuntar archivos a un mensaje, también puedes especificar el nombre para mostrar y / o el tipo MIME pasando un <code>array</code> como segundo argumento al método <code>attach</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'emails.orders.shipped'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/path/to/file'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
                    <span class="token string single-quoted-string">'as'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'name.pdf'</span><span class="token punctuation">,</span>
                    <span class="token string single-quoted-string">'mime'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'application/pdf'</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="adjuntando-archivos-desde-el-disco"><a href="#adjuntando-archivos-desde-el-disco" class="header-anchor">#</a> Adjuntando archivos desde el disco</h4> <p>Si has almacenado un archivo en uno de tus <a href="/filesystem.html">discos</a>, puedes adjuntarlo al correo electrónico usando el método <code>attachFromStorage</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'email.orders.shipped'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">attachFromStorage</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/path/to/file'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>De ser necesario, puedes especificar el nombre del archivo adjunto y opciones adicionales usando el segundo y tercer argumento del método <code>attachFromStorage</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'email.orders.shipped'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">attachFromStorage</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/path/to/file'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'name.pdf'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
                    <span class="token string single-quoted-string">'mime'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'application/pdf'</span>
                <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>El método <code>attachFromStorageDisk</code> puede ser usado si necesitas especificar un disco de almacenamiento diferente a tu disco por defecto:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'email.orders.shipped'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">attachFromStorageDisk</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'s3'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'/path/to/file'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="archivos-adjuntos-desde-la-memoria"><a href="#archivos-adjuntos-desde-la-memoria" class="header-anchor">#</a> Archivos adjuntos desde la memoria</h4> <p>El método <code>attachData</code> se puede usar para adjuntar una cadena de bytes sin formato como un archivo adjunto. Por ejemplo, puedes usar este método si has generado un PDF en la memoria y deseas adjuntarlo al correo electrónico sin escribirlo en el disco. El método <code>attachData</code> acepta los bytes de datos brutos como su primer argumento, el nombre del archivo como su segundo argumento y un arreglo de opciones como su tercer argumento:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'emails.orders.shipped'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">attachData</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">pdf</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'name.pdf'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
                    <span class="token string single-quoted-string">'mime'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'application/pdf'</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="inline-attachments"></a></p> <h3 id="archivos-adjuntos-en-linea"><a href="#archivos-adjuntos-en-linea" class="header-anchor">#</a> Archivos adjuntos en línea</h3> <p>La incrustación de imágenes en línea en tus correos electrónicos suele ser engorrosa; sin embargo, Laravel proporciona una forma conveniente de adjuntar imágenes a tus correos electrónicos y recuperar el CID apropiado. Para incrustar una imagen en línea, usa el método <code>embed</code> en la variable <code>$message</code> dentro de tu plantilla de correo electrónico. Laravel automáticamente hace que la variable <code>$message</code> esté disponible para todas tus plantillas de correo electrónico, por lo que no tienes que preocuparte por pasarla manualmente:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    Here is an <span class="token argument-name">image</span><span class="token punctuation">:</span>

    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ <span class="token interpolation"><span class="token variable">$message</span><span class="token operator">-&gt;</span><span class="token property">embed</span></span>(<span class="token interpolation"><span class="token variable">$pathToImage</span></span>) }}&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">Nota</p> <p>La variable <code>$message</code> no está disponible en los mensajes de texto plano, ya que estos mensajes (plain-text) no utilizan archivos adjuntos en línea.</p></div> <h4 id="incrustar-datos-adjuntos-de-la-memoria"><a href="#incrustar-datos-adjuntos-de-la-memoria" class="header-anchor">#</a> Incrustar datos adjuntos de la memoria</h4> <p>Si ya tienes una cadena de datos en la memoria que desees incorporar a una plantilla de correo electrónico, puedes usar el método <code>embedData</code> en la variable <code>$message</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    Here is an image from raw <span class="token argument-name">data</span><span class="token punctuation">:</span>

    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ <span class="token interpolation"><span class="token variable">$message</span><span class="token operator">-&gt;</span><span class="token property">embedData</span></span>(<span class="token interpolation"><span class="token variable">$data</span></span>, <span class="token interpolation"><span class="token variable">$name</span></span>) }}&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre></div><p><a name="customizing-the-swiftmailer-message"></a></p> <h3 id="personalizar-el-mensaje-de-swiftmailer"><a href="#personalizar-el-mensaje-de-swiftmailer" class="header-anchor">#</a> Personalizar el mensaje de SwiftMailer</h3> <p>El método <code>withSwiftMessage</code> de la clase base <code>Mailable</code> te permite registrar una función anónima que se invocará con la instancia del mensaje de SwiftMailer sin procesar antes de enviar el mensaje. Esto te da la oportunidad de personalizar el mensaje antes de que se entregue:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'emails.orders.shipped'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">withSwiftMessage</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$message</span><span class="token operator">-&gt;</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">addTextHeader</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Custom-Header'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'HeaderValue'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="markdown-mailables"></a></p> <h2 id="mailables-en-markdown"><a href="#mailables-en-markdown" class="header-anchor">#</a> Mailables en markdown</h2> <p>Los mensajes para mailables escritos con Markdown te permiten aprovechar las plantillas y los componentes precompilados de las notificaciones por correo en tus mailables. Dado que los mensajes se escriben en Markdown, Laravel puede generar plantillas HTML atractivas y responsivas para los mensajes, y generar automáticamente una contraparte de texto sin formato.</p> <p><a name="generating-markdown-mailables"></a></p> <h3 id="generar-mailables-en-markdown"><a href="#generar-mailables-en-markdown" class="header-anchor">#</a> Generar mailables en markdown</h3> <p>Para generar una clase mailable con una plantilla para Markdown, puedes usar la opción <code>--markdown</code> del comando Artisan <code>make:mail</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan <span class="token argument-name">make</span><span class="token punctuation">:</span>mail OrderShipped <span class="token operator">--</span>markdown<span class="token operator">=</span>emails<span class="token operator">.</span>orders<span class="token operator">.</span>shipped
</code></pre></div><p>Luego de generar la clase, dentro de su método <code>build</code>, debes llamar al método <code>markdown</code> en lugar del método <code>view</code>. El método <code>markdown</code> acepta el nombre de la plantilla Markdown y un arreglo opcional de datos para poner a disposición de la plantilla:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'example@example.com'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">markdown</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'emails.orders.shipped'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="writing-markdown-messages"></a></p> <h3 id="escribir-mensajes-en-markdown"><a href="#escribir-mensajes-en-markdown" class="header-anchor">#</a> Escribir mensajes en Markdown</h3> <p>Los correos de mailables con Markdown utilizan una combinación de componentes Blade y sintaxis Markdown que te permiten construir fácilmente mensajes de correo al mismo tiempo que aprovechas los componentes prefabricados de Laravel:</p> <div class="language-php extra-class"><pre class="language-php"><code>@<span class="token function">component</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'mail::message'</span><span class="token punctuation">)</span>
<span class="token comment"># Order Shipped</span>

Your order has been shipped<span class="token operator">!</span>

@<span class="token function">component</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'mail::button'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'url'</span> <span class="token operator">=&gt;</span> <span class="token variable">$url</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
View Order
@endcomponent

Thanks<span class="token punctuation">,</span><span class="token operator">&lt;</span>br<span class="token operator">&gt;</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">config</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'app.name'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
@endcomponent
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>No uses una sangría excesiva al escribir correos electrónicos de Markdown. Los analizadores de Markdown renderizarán contenido sangrado como bloques de código.</p></div> <h4 id="componente-button"><a href="#componente-button" class="header-anchor">#</a> Componente button</h4> <p>El componente de botón renderiza un enlace de botón centrado. El componente acepta dos argumentos, una <code>url</code> y un <code>color</code> opcional. Los colores compatibles son <code>primary</code>, <code>success</code> y <code>error</code>. Puedes agregar los botones que desees a un mensaje:</p> <div class="language-php extra-class"><pre class="language-php"><code>@<span class="token function">component</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'mail::button'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'url'</span> <span class="token operator">=&gt;</span> <span class="token variable">$url</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'color'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'success'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
View Order
@endcomponent
</code></pre></div><h4 id="componente-panel"><a href="#componente-panel" class="header-anchor">#</a> Componente panel</h4> <p>El componente del panel renderiza el bloque de texto dado en un panel que tiene un color de fondo ligeramente diferente que el resto del mensaje. Esto te permite llamar la atención sobre un bloque de texto dado:</p> <div class="language-php extra-class"><pre class="language-php"><code>@<span class="token function">component</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'mail::panel'</span><span class="token punctuation">)</span>
This is the panel content<span class="token operator">.</span>
@endcomponent
</code></pre></div><h4 id="componente-table"><a href="#componente-table" class="header-anchor">#</a> Componente table</h4> <p>El componente de tabla te permite transformar una tabla en Markdown a una tabla HTML. El componente acepta la tabla en Markdown como su contenido. La alineación de columna de tabla es compatible con la sintaxis de alineación de tabla de Markdown predeterminada:</p> <div class="language-php extra-class"><pre class="language-php"><code>@<span class="token function">component</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'mail::table'</span><span class="token punctuation">)</span>
<span class="token operator">|</span> <span class="token class-name">Laravel</span>       <span class="token operator">|</span> <span class="token class-name">Table</span>         <span class="token operator">|</span> <span class="token class-name">Example</span>  <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token operator">|</span><span class="token punctuation">:</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token punctuation">:</span><span class="token operator">|</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token punctuation">:</span><span class="token operator">|</span>
<span class="token operator">|</span> <span class="token class-name">Col</span> <span class="token number">2</span> <span class="token class-name">is</span>      <span class="token operator">|</span> <span class="token class-name">Centered</span>      <span class="token operator">|</span> <span class="token variable">$10</span>      <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token class-name">Col</span> <span class="token number">3</span> <span class="token class-name">is</span>      <span class="token operator">|</span> <span class="token class-name">Right</span><span class="token operator">-</span><span class="token class-name">Aligned</span> <span class="token operator">|</span> <span class="token variable">$20</span>      <span class="token operator">|</span>
@endcomponent
</code></pre></div><p><a name="customizing-the-components"></a></p> <h3 id="personalizar-los-componentes"><a href="#personalizar-los-componentes" class="header-anchor">#</a> Personalizar los componentes</h3> <p>Puedes exportar todos los componentes de correo Markdown a su propia aplicación para personalización. Para exportar los componentes, use el comando Artisan <code>vendor:publish</code> y la opción del tag <code>laravel-mail</code> de esta forma:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan <span class="token argument-name">vendor</span><span class="token punctuation">:</span>publish <span class="token operator">--</span>tag<span class="token operator">=</span>laravel<span class="token operator">-</span>mail
</code></pre></div><p>Este comando publicará los componentes de correo Markdown en el directorio <code>resources/views/vendor/mail</code>. El directorio <code>mail</code> contendrá un directorio <code>html</code> y otro <code>text</code>, cada uno con sus respectivas representaciones de cada componente disponible. Eres libre de personalizar estos componentes como desees.</p> <h4 id="personalizar-el-css"><a href="#personalizar-el-css" class="header-anchor">#</a> Personalizar el CSS</h4> <p>Después de exportar los componentes, el directorio <code>resources/views/vendor/mail/html/themes</code> contendrá un archivo <code>default.css</code>. Puedes personalizar el CSS en este archivo y tus estilos se alinearán automáticamente en las representaciones HTML de tus mensajes de correo Markdown.</p> <p>Si te gustaría construir un nuevo tema para los componentes de Markdown de Laravel, puedes colocar un archivo CSS dentro del directorio <code>html/themes</code>. Luego de nombrar y guardar tu archivo de CSS, actualiza la opción <code>theme</code> del archivo de configuración <code>mail</code> con el nuevo nombre de tu tema.</p> <p>Para personalizar un tema para un mailable individual, debes establecer la propiedad <code>$theme</code> de la clase mailable al nombre del tema que debería ser usado al enviar el mailable.</p> <p><a name="sending-mail"></a></p> <h2 id="enviar-correo"><a href="#enviar-correo" class="header-anchor">#</a> Enviar correo</h2> <p>Para enviar un mensaje, debes usar el método <code>to</code> del <a href="/facades.html">facade</a> <code>Mail</code>. El método <code>to</code> acepta una dirección de correo electrónico, una instancia de usuario o una colección de usuarios. Si pasas un objeto o una colección de objetos, el remitente utilizará automáticamente sus propiedades <code>email</code> y <code>name</code> cuando configure los destinatarios del correo electrónico, por lo tanto, asegúrate que estos atributos estén disponibles en tus objetos. Una vez que hayas especificado tus destinatarios, puedes pasar una instancia de tu clase mailable al método <code>send</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>Controller</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Mail<span class="token punctuation">\</span>OrderShipped</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Order</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Mail</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">OrderController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Ship the given order.
    *
    * @param  Request  $request
    * @param  int  $orderId
    * @return Response
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">ship</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Request</span> <span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$orderId</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$order</span> <span class="token operator">=</span> <span class="token class-name static-context">Order</span><span class="token operator">::</span><span class="token function">findOrFail</span><span class="token punctuation">(</span><span class="token variable">$orderId</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Ship order...</span>

        <span class="token class-name static-context">Mail</span><span class="token operator">::</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OrderShipped</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>No estás limitado a especificar sólo los destinatarios &quot;to&quot; al enviar un mensaje. Eres libre de configurar los destinatarios &quot;to&quot;, &quot;cc&quot; y &quot;bcc&quot;, todo dentro de una única llamada a un método encadenado:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Mail</span><span class="token operator">::</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">cc</span><span class="token punctuation">(</span><span class="token variable">$moreUsers</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">bcc</span><span class="token punctuation">(</span><span class="token variable">$evenMoreUsers</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OrderShipped</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="rendering-mailables"></a></p> <h2 id="renderizar-mailables"><a href="#renderizar-mailables" class="header-anchor">#</a> Renderizar mailables</h2> <p>Algunas veces puedes querer capturar el contenido HTML de un mailable sin enviarlo. Para lograr esto, puedes llamar al método <code>render</code> del mailable. Este método retornará los contenidos evaluados del mailable como una cadena:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$invoice</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context">App<span class="token punctuation">\</span>Invoice</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified">App<span class="token punctuation">\</span>Mail<span class="token punctuation">\</span>InvoicePaid</span><span class="token punctuation">(</span><span class="token variable">$invoice</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="previewing-mailables-in-the-browser"></a></p> <h3 id="previsualizar-mailables-en-el-navegador"><a href="#previsualizar-mailables-en-el-navegador" class="header-anchor">#</a> Previsualizar mailables en el navegador</h3> <p>Al diseñar una plantilla mailable, es conveniente previsualizar rápidamente el mailable renderizado en tu navegador como una plantilla de Blade corriente. Por esta razón, Laravel te permite retornar cualquier mailable directamente desde un Closure de ruta o un controlador. Cuando un mailable es retornado, será renderizado y mostrado en el navegador, permitiéndote previsualizar su diseño sin necesidad de enviarlo a una dirección de correo electrónico real:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'mailable'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$invoice</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context">App<span class="token punctuation">\</span>Invoice</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified">App<span class="token punctuation">\</span>Mail<span class="token punctuation">\</span>InvoicePaid</span><span class="token punctuation">(</span><span class="token variable">$invoice</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="queueing-mail"></a></p> <h3 id="correo-en-cola"><a href="#correo-en-cola" class="header-anchor">#</a> Correo en cola</h3> <h4 id="poniendo-en-cola-un-correo-electronico"><a href="#poniendo-en-cola-un-correo-electronico" class="header-anchor">#</a> Poniendo en cola un correo electrónico</h4> <p>Dado que el envío de correos electrónicos puede alargar drásticamente el tiempo de respuesta de la aplicación, muchos desarrolladores eligen poner los correos electrónicos en cola para enviarlos en segundo plano. Laravel hace esto fácil usando su función incorporada <a href="/queues.html">API de cola unificada</a>. Para poner en cola un correo, usa el método <code>queue</code> en el facade <code>Mail</code> después de especificar los destinatarios del mensaje:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Mail</span><span class="token operator">::</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">cc</span><span class="token punctuation">(</span><span class="token variable">$moreUsers</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">bcc</span><span class="token punctuation">(</span><span class="token variable">$evenMoreUsers</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OrderShipped</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Este método se encargará automáticamente de insertar un trabajo en la cola para que el mensaje se envíe en segundo plano. Necesitarás <a href="/queues.html">configurar tus colas</a> antes de usar esta característica.</p> <h4 id="cola-de-mensajes-retrasada"><a href="#cola-de-mensajes-retrasada" class="header-anchor">#</a> Cola de mensajes retrasada</h4> <p>Si deseas retrasar la entrega de un mensaje de correo electrónico en cola, puedes usar el método <code>later</code>. Como primer argumento, el método <code>later</code> acepta una instancia <code>DateTime</code> que indica cuándo se debe enviar el mensaje:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$when</span> <span class="token operator">=</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">addMinutes</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name static-context">Mail</span><span class="token operator">::</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">cc</span><span class="token punctuation">(</span><span class="token variable">$moreUsers</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">bcc</span><span class="token punctuation">(</span><span class="token variable">$evenMoreUsers</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">later</span><span class="token punctuation">(</span><span class="token variable">$when</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">OrderShipped</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="enviar-a-queues-especificas"><a href="#enviar-a-queues-especificas" class="header-anchor">#</a> Enviar a queues específicas</h4> <p>Como todas las clases mailable generadas usando el comando <code>make:mail</code> usan el trait <code>Illuminate\Bus\Queueable</code>, puedes llamar a los métodos <code>onQueue</code> y <code>onConnection</code> en cualquier instancia de clase mailable, lo que te permite especificar la conexión y nombre de cola para el mensaje:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$message</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OrderShipped</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">onConnection</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'sqs'</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">onQueue</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'emails'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name static-context">Mail</span><span class="token operator">::</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">cc</span><span class="token punctuation">(</span><span class="token variable">$moreUsers</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">bcc</span><span class="token punctuation">(</span><span class="token variable">$evenMoreUsers</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="en-cola-por-defecto"><a href="#en-cola-por-defecto" class="header-anchor">#</a> En cola por defecto</h4> <p>Si tienes clases mailables que deseas que siempre se pongan en cola, puedes implementar la interfaz <code>ShouldQueue</code> en la clase. Ahora, incluso si llamas al método <code>send</code> cuando envíes correos, el mailable se pondrá en cola ya que implementa la interfaz:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Contracts<span class="token punctuation">\</span>Queue<span class="token punctuation">\</span>ShouldQueue</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">OrderShipped</span> <span class="token keyword">extends</span> <span class="token class-name">Mailable</span> <span class="token keyword">implements</span> <span class="token class-name">ShouldQueue</span>
<span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="localizing-mailables"></a></p> <h2 id="configuracion-regional-de-mailables"><a href="#configuracion-regional-de-mailables" class="header-anchor">#</a> Configuración regional de mailables</h2> <p>Laravel te permite enviar mailables en una configuración regional diferente del idioma actual, e incluso recordará dicha configuración si el correo es agregado a una cola.</p> <p>Para lograr esto, el facade <code>Mail</code> ofrece un método <code>locale</code> para establecer el idioma deseado. La aplicación cambiará a dicha configuración regional cuando el mailable sea formateado y luego volverá a la configuración anterior cuando el formato es completado:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Mail</span><span class="token operator">::</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">locale</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'es'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">send</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">OrderShipped</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="configuracion-regional-de-usuarios"><a href="#configuracion-regional-de-usuarios" class="header-anchor">#</a> Configuración regional de usuarios</h3> <p>Algunas veces, las aplicaciones almacenan la configuración regional preferida de cada usuario. Al implementar la interfaz <code>HasLocalePreference</code> en uno o más de tus modelos, puedes instruir a Laravel a usar dicha configuración almacenada al enviar correos electrónicos:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Contracts<span class="token punctuation">\</span>Translation<span class="token punctuation">\</span>HasLocalePreference</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token keyword">implements</span> <span class="token class-name">HasLocalePreference</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Get the user's preferred locale.
    *
    * @return string
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">preferredLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">locale</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Una vez has implementado la interfaz, Laravel automáticamente usará la configuración regional preferida al enviar mailables y notificaciones al modelo. Por lo tanto, no hay necesidad de llamar al método <code>locale</code> al usar esta interfaz:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Mail</span><span class="token operator">::</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OrderShipped</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="mail-and-local-development"></a></p> <h2 id="correos-y-desarrollo-local"><a href="#correos-y-desarrollo-local" class="header-anchor">#</a> Correos y desarrollo local</h2> <p>Al desarrollar una aplicación que envía correos electrónicos, probablemente no deseas enviar correos electrónicos a direcciones reales. Laravel proporciona varias formas de &quot;desactivar&quot; el envío real de correos electrónicos durante el desarrollo local.</p> <h4 id="driver-log"><a href="#driver-log" class="header-anchor">#</a> Driver Log</h4> <p>En lugar de enviar tus correos electrónicos, el driver de correos <code>log</code> escribirá todos los mensajes de correo electrónico en tus archivos de logs para su inspección. Para obtener más información sobre cómo configurar tu aplicación por entorno, revisa la <a href="/configuration.html#environment-configuration">configuración en la documentación</a>.</p> <h4 id="destinatario-universal"><a href="#destinatario-universal" class="header-anchor">#</a> Destinatario universal</h4> <p>Otra solución proporcionada por Laravel es establecer un destinatario universal de todos los correos electrónicos enviados por el framework. De esta forma, todos los correos electrónicos generados por tu aplicación serán enviados a una dirección específica, en lugar de la dirección realmente especificada al enviar el mensaje. Esto se puede hacer a través de la opción <code>to</code> en tu archivo de configuración <code>config/mail.php</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token string single-quoted-string">'to'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'address'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'example@example.com'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Example'</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="mailtrap"><a href="#mailtrap" class="header-anchor">#</a> Mailtrap</h4> <p>Finalmente, puedes usar un servicio como <a href="https://mailtrap.io" target="_blank" rel="noopener noreferrer">Mailtrap<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> y el driver <code>smtp</code> para enviar tus mensajes de correo electrónico a un buzón &quot;ficticio&quot; donde puedes verlos en un verdadero cliente de correo electrónico. Este enfoque tiene el beneficio de permitirte inspeccionar realmente los correos electrónicos finales en el visor de mensajes de Mailtrap.</p> <p><a name="events"></a></p> <h2 id="eventos"><a href="#eventos" class="header-anchor">#</a> Eventos</h2> <p>Laravel dispara dos eventos durante el proceso de envío de mensajes de correo. El evento <code>MessageSending</code> se dispara antes de que se envíe un mensaje, mientras que el evento <code>MessageSent</code> se dispara después de que se ha enviado un mensaje. Recuerda, estos eventos se disparan cuando el correo <em>se envía</em>, no cuando se pone en cola. Puedes registrar un listener de eventos para este evento en tu <code>EventServiceProvider</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* The event listener mappings for the application.
*
* @var array
*/</span>
<span class="token keyword">protected</span> <span class="token variable">$listen</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'Illuminate\Mail\Events\MessageSending'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'App\Listeners\LogSendingMessage'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'Illuminate\Mail\Events\MessageSent'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'App\Listeners\LogSentMessage'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b2060dbf.js" defer></script><script src="/assets/js/2.648c6578.js" defer></script><script src="/assets/js/49.da492613.js" defer></script>
  </body>
</html>
