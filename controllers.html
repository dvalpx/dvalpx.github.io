<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VuePress</title>
    <meta name="generator" content="VuePress 1.8.1">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.f7a12d87.css" as="style"><link rel="preload" href="/assets/js/app.b0740f8f.js" as="script"><link rel="preload" href="/assets/js/2.648c6578.js" as="script"><link rel="preload" href="/assets/js/21.a9dd9148.js" as="script"><link rel="prefetch" href="/assets/js/10.20cff712.js"><link rel="prefetch" href="/assets/js/11.f0ca56a6.js"><link rel="prefetch" href="/assets/js/12.5865c9a5.js"><link rel="prefetch" href="/assets/js/13.8e509b37.js"><link rel="prefetch" href="/assets/js/14.2d9f5c97.js"><link rel="prefetch" href="/assets/js/15.b917edb6.js"><link rel="prefetch" href="/assets/js/16.a13d2a39.js"><link rel="prefetch" href="/assets/js/17.d6b71ec0.js"><link rel="prefetch" href="/assets/js/18.adbe50b4.js"><link rel="prefetch" href="/assets/js/19.a1638529.js"><link rel="prefetch" href="/assets/js/20.393f35ab.js"><link rel="prefetch" href="/assets/js/22.087385e4.js"><link rel="prefetch" href="/assets/js/23.b6ce1d9c.js"><link rel="prefetch" href="/assets/js/24.a74b28c6.js"><link rel="prefetch" href="/assets/js/25.7a984c35.js"><link rel="prefetch" href="/assets/js/26.cf45c453.js"><link rel="prefetch" href="/assets/js/27.e36a56dc.js"><link rel="prefetch" href="/assets/js/28.358fc226.js"><link rel="prefetch" href="/assets/js/29.f4fd2139.js"><link rel="prefetch" href="/assets/js/3.40d230a8.js"><link rel="prefetch" href="/assets/js/30.564d0795.js"><link rel="prefetch" href="/assets/js/31.0691b4c8.js"><link rel="prefetch" href="/assets/js/32.088de00e.js"><link rel="prefetch" href="/assets/js/33.4d884bb7.js"><link rel="prefetch" href="/assets/js/34.c4be32cd.js"><link rel="prefetch" href="/assets/js/35.b78c77b2.js"><link rel="prefetch" href="/assets/js/36.ceed3144.js"><link rel="prefetch" href="/assets/js/37.f9d6aca2.js"><link rel="prefetch" href="/assets/js/38.67ad3e03.js"><link rel="prefetch" href="/assets/js/39.5e3e70a7.js"><link rel="prefetch" href="/assets/js/4.e81ef12f.js"><link rel="prefetch" href="/assets/js/40.0510efa5.js"><link rel="prefetch" href="/assets/js/41.4e2bcf98.js"><link rel="prefetch" href="/assets/js/42.ebc7d9c8.js"><link rel="prefetch" href="/assets/js/43.e5970289.js"><link rel="prefetch" href="/assets/js/44.f91a9970.js"><link rel="prefetch" href="/assets/js/45.603b4584.js"><link rel="prefetch" href="/assets/js/46.037dce36.js"><link rel="prefetch" href="/assets/js/47.fadd0db4.js"><link rel="prefetch" href="/assets/js/48.457d9287.js"><link rel="prefetch" href="/assets/js/49.da492613.js"><link rel="prefetch" href="/assets/js/5.dc790133.js"><link rel="prefetch" href="/assets/js/50.cab6e13d.js"><link rel="prefetch" href="/assets/js/51.0765def4.js"><link rel="prefetch" href="/assets/js/52.518165a7.js"><link rel="prefetch" href="/assets/js/53.1e887b4a.js"><link rel="prefetch" href="/assets/js/54.bc10b491.js"><link rel="prefetch" href="/assets/js/55.2e54a7e8.js"><link rel="prefetch" href="/assets/js/56.169c81e5.js"><link rel="prefetch" href="/assets/js/57.a4ef4ed1.js"><link rel="prefetch" href="/assets/js/58.78dc0897.js"><link rel="prefetch" href="/assets/js/59.f13515c7.js"><link rel="prefetch" href="/assets/js/6.de2c94ff.js"><link rel="prefetch" href="/assets/js/60.ebfdeb63.js"><link rel="prefetch" href="/assets/js/61.6523e015.js"><link rel="prefetch" href="/assets/js/62.cb19c9bd.js"><link rel="prefetch" href="/assets/js/63.6ae10337.js"><link rel="prefetch" href="/assets/js/64.50298a81.js"><link rel="prefetch" href="/assets/js/65.d1849c5b.js"><link rel="prefetch" href="/assets/js/66.caef6860.js"><link rel="prefetch" href="/assets/js/67.a2788988.js"><link rel="prefetch" href="/assets/js/68.1c43eae0.js"><link rel="prefetch" href="/assets/js/69.e16965c5.js"><link rel="prefetch" href="/assets/js/7.0466c7e3.js"><link rel="prefetch" href="/assets/js/70.e66fe735.js"><link rel="prefetch" href="/assets/js/71.6d49148f.js"><link rel="prefetch" href="/assets/js/72.c3d54f60.js"><link rel="prefetch" href="/assets/js/73.125d4466.js"><link rel="prefetch" href="/assets/js/74.f1ed7f47.js"><link rel="prefetch" href="/assets/js/75.5dd47c5c.js"><link rel="prefetch" href="/assets/js/76.634dc6b8.js"><link rel="prefetch" href="/assets/js/77.db030077.js"><link rel="prefetch" href="/assets/js/78.ef9b3a22.js"><link rel="prefetch" href="/assets/js/79.a9b05b84.js"><link rel="prefetch" href="/assets/js/8.0435cf5c.js"><link rel="prefetch" href="/assets/js/80.88069fe6.js"><link rel="prefetch" href="/assets/js/9.78ebe7b2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f7a12d87.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><div><h1 id="controladores"><a class="header-anchor" href="#controladores">#</a> Controladores</h1> <ul><li><a href="#introduction">Introducción</a></li> <li><a href="#basic-controllers">Controladores básicos</a> <ul><li><a href="#defining-controllers">Definiendo controladores</a></li> <li><a href="#controllers-and-namespaces">Controladores y espacios de nombres</a></li> <li><a href="#single-action-controllers">Controladores de acción única</a></li></ul></li> <li><a href="#controller-middleware">Middleware de controlador</a></li> <li><a href="#resource-controllers">Controladores de recursos</a> <ul><li><a href="#restful-partial-resource-routes">Rutas de recursos parciales</a></li> <li><a href="#restful-nested-resources">Recursos anidados</a></li> <li><a href="#restful-naming-resource-routes">Nombrando rutas de recursos</a></li> <li><a href="#restful-naming-resource-route-parameters">Nombrando parámetros de rutas de recursos</a></li> <li><a href="#restful-localizing-resource-uris">Configuración regional para URIs de recursos</a></li> <li><a href="#restful-supplementing-resource-controllers">Complementando controladores de recursos</a></li></ul></li> <li><a href="#dependency-injection-and-controllers">Inyección de dependencias y controladores</a></li> <li><a href="#route-caching">Caché de rutas</a></li></ul> <p><a name="introduction"></a></p> <h2 id="introduccion"><a class="header-anchor" href="#introduccion">#</a> Introducción</h2> <p>En lugar de definir toda la lógica de manejo de solicitud como Closure en archivos de ruta, puedes desear organizar este comportamiento usando clases Controller. Los controladores pueden agrupar la lógica de manejo de solicitud relacionada dentro de una sola clase. Los controladores son almacenados en el directorio <code>app/Http/Controllers</code>.</p> <p><a name="basic-controllers"></a></p> <h2 id="controladores-basicos"><a class="header-anchor" href="#controladores-basicos">#</a> Controladores básicos</h2> <p><a name="defining-controllers"></a></p> <h3 id="definiendo-controladores"><a class="header-anchor" href="#definiendo-controladores">#</a> Definiendo controladores</h3> <p>A continuación se muestra un ejemplo de una clase de controlador básica. Nota que el controlador extiende la clase de controlador base incluida con Laravel. La clase base proporciona unos cuantos métodos de conveniencia tal como el método <code>middleware</code>, el cual puede ser usado para conectar un middleware a acciones de controlador:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>Controller</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Show the profile for the given user.
    *
    * @param  int  $id
    * @return View
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'user.profile'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'user'</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">findOrFail</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Puedes definir una ruta a esta acción de controlador de esta forma:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'user/{id}'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'UserController@show'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Ahora, cuando una solicitud coincide con la URI de la ruta especificada, se ejecutará el método <code>show</code> de la clase <code>UserController</code>. Los parámetros de ruta también se pasarán al método.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Los controladores no están <strong>obligados</strong> a extender de la clase base. Sin embargo, no tendrás acceso a características de conveniencia tales como los métodos <code>middleware</code>, <code>validate</code> y <code>dispatch</code>.</p></div></div><p><a name="controllers-and-namespaces"></a></p> <h3 id="controladores-y-espacios-de-nombres"><a href="#controladores-y-espacios-de-nombres" class="header-anchor">#</a> Controladores y espacios de nombres</h3> <p>Es muy importante notar que no necesitamos especificar el espacio de nombres completo del controlador al momento de definir la ruta del controlador. Debido a que el <code>RouteServiceProvider</code> carga sus archivos de ruta dentro de un grupo de ruta que contiene el espacio de nombres, solamente necesitaremos la porción del nombre de la clase que viene después de la porción <code>App\Http\Controllers</code> del espacio de nombres.</p> <p>Si eliges anidar tus controladores dentro del directorio <code>App\Http\Controllers</code>, usa el nombre de clase específico relativo al espacio de nombres raíz <code>App\Http\Controllers</code>. Así, si tu clase de controlador completa es <code>App\Http\Controllers\Photos\AdminController</code>, deberías registrar rutas al controlador de esta forma:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'foo'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'Photos\AdminController@method'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="single-action-controllers"></a></p> <h3 id="controladores-de-accion-unica"><a href="#controladores-de-accion-unica" class="header-anchor">#</a> Controladores de acción única</h3> <p>Si prefieres definir un controlador que maneje solamente una acción única, debes colocar un único método <code>__invoke</code> en el controlador:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>Controller</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ShowProfile</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Show the profile for the given user.
    *
    * @param  int  $id
    * @return View
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__invoke</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'user.profile'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'user'</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">findOrFail</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Al momento de registrar rutas para controladores de acción única, no necesitarás especificar un método:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'user/{id}'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'ShowProfile'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Puedes generar un controlador invocable usando la opción <code>--invokable</code> del comando Artisan <code>make:controller</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan <span class="token argument-name">make</span><span class="token punctuation">:</span>controller ShowProfile <span class="token operator">--</span>invokable
</code></pre></div><p><a name="controller-middleware"></a></p> <h2 id="middleware-de-controlador"><a href="#middleware-de-controlador" class="header-anchor">#</a> Middleware de controlador</h2> <p>Los <a href="/middleware.html">Middleware</a> pueden ser asignados a las rutas del controlador en tus archivos de ruta:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'profile'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'UserController@show'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'auth'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Sin embargo, es más conveniente especificar los middleware dentro del constructor de tu controlador. Usando el método <code>middleware</code> del constructor de tu controlador, puedes asignar fácilmente los middleware a la acción del controlador. Incluso puedes restringir los middleware a sólo ciertos métodos en la clase del controlador:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> UserController <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Instantiate a new controller instance.
    *
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'auth'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'log'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'subscribed'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">except</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'store'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>También los controladores permiten que registres los middleware usando una Closure. Esto proporciona una forma conveniente de definir un middleware para un solo controlador sin definir una clase middleware completa:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>

    <span class="token keyword">return</span> <span class="token variable">$next</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Puedes asignar los middleware a un subconjunto de acciones de controlador; sin embargo, esto puede indicar que tu controlador está creciendo demasiado. En lugar de eso, considera dividir tu controlador en varios controladores más pequeños.</p></div> <p><a name="resource-controllers"></a></p> <h2 id="controladores-de-recursos"><a href="#controladores-de-recursos" class="header-anchor">#</a> Controladores de recursos</h2> <p>El enrutamiento de recurso de Laravel asigna las rutas típicas &quot;CRUD&quot; a un controlador con una sola línea de código. Por ejemplo, puedes desear crear un controlador que maneje todas las solicitudes HTTP para &quot;photos&quot; almacenadas por tu aplicación. Usando el comando Artisan <code>make:controller</code>, podemos crear fácilmente tal controlador:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan <span class="token argument-name">make</span><span class="token punctuation">:</span>controller PhotoController <span class="token operator">--</span>resource
</code></pre></div><p>Este comando creará un controlador en <code>app/Http/Controllers/PhotoController.php</code>. El controlador contendrá un método para cada una de las operaciones de recursos disponibles.</p> <p>Seguidamente, puedes registrar una ruta de recurso genérica al controlador:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'photos'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'PhotoController'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Esta declaración de ruta única crea varias rutas para manejar una variedad de acciones del recurso. El controlador generado ya tendrá los métodos separados para cada una de las acciones, incluyendo comentarios que te informan de los verbos HTTP y URIs que manejan.</p> <p>Puedes registrar muchos controladores de recursos a la vez pasando un arreglo al método <code>resources</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">resources</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'photos'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'PhotoController'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'posts'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'PostController'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="acciones-manejadas-por-el-controlador-de-recursos"><a href="#acciones-manejadas-por-el-controlador-de-recursos" class="header-anchor">#</a> Acciones manejadas por el controlador de recursos</h4> <table><thead><tr><th>Tipo</th> <th>URI</th> <th>Acción</th> <th>Nombre de la Ruta</th></tr></thead> <tbody><tr><td>GET</td> <td><code>/photos</code></td> <td>index</td> <td>photos.index</td></tr> <tr><td>GET</td> <td><code>/photos/create</code></td> <td>create</td> <td>photos.create</td></tr> <tr><td>POST</td> <td><code>/photos</code></td> <td>store</td> <td>photos.store</td></tr> <tr><td>GET</td> <td><code>/photos/{photo}</code></td> <td>show</td> <td>photos.show</td></tr> <tr><td>GET</td> <td><code>/photos/{photo}/edit</code></td> <td>edit</td> <td>photos.edit</td></tr> <tr><td>PUT/PATCH</td> <td><code>/photos/{photo}</code></td> <td>update</td> <td>photos.update</td></tr> <tr><td>DELETE</td> <td><code>/photos/{photo}</code></td> <td>destroy</td> <td>photos.destroy</td></tr></tbody></table> <h4 id="especificando-el-modelo-del-recurso"><a href="#especificando-el-modelo-del-recurso" class="header-anchor">#</a> Especificando el modelo del recurso</h4> <p>Si estás usando el enlace de modelo de ruta (route model binding) y deseas que los métodos del controlador de recursos declaren el tipo de una instancia de modelo, puedes usar la opción <code>--model</code> al momento de generar el controlador:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan <span class="token argument-name">make</span><span class="token punctuation">:</span>controller PhotoController <span class="token operator">--</span>resource <span class="token operator">--</span>model<span class="token operator">=</span>Photo
</code></pre></div><h4 id="suplantar-los-metodos-de-formulario"><a href="#suplantar-los-metodos-de-formulario" class="header-anchor">#</a> Suplantar los métodos de formulario</h4> <p>Debido a que los formularios no pueden hacer solicitudes <code>PUT</code>, <code>PATCH</code> o <code>DELETE</code>, necesitarás agregar un campo <code>_method</code> oculto para suplantar estos verbos HTTP. La directiva de Blade <code>@method</code> puede crear este campo para ti:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string double-quoted-string">&quot;/foo/bar&quot;</span> method<span class="token operator">=</span><span class="token string double-quoted-string">&quot;POST&quot;</span><span class="token operator">&gt;</span>
    @<span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'PUT'</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
</code></pre></div><p><a name="restful-partial-resource-routes"></a></p> <h3 id="rutas-de-recursos-parciales"><a href="#rutas-de-recursos-parciales" class="header-anchor">#</a> Rutas de recursos parciales</h3> <p>Al momento de declarar una ruta de recurso, puedes especificar un subconjunto de acciones que el controlador debería manejar en lugar del conjunto completo de acciones por defecto:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'photos'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'PhotoController'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'index'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'show'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'photos'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'PhotoController'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">except</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'create'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'store'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'update'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'destroy'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="rutas-de-recursos-para-apis"><a href="#rutas-de-recursos-para-apis" class="header-anchor">#</a> Rutas de recursos para APIs</h4> <p>Al momento de declarar rutas de recursos que serán consumidas por APIs, normalmente te gustará excluir rutas que presentan plantillas HTML tales como <code>create</code> y <code>edit</code>. Por conveniencia, puedes usar el método <code>apiResource</code> para excluir automáticamente estas dos rutas:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">apiResource</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'photos'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'PhotoController'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Puedes registrar muchos controladores de recursos de API de una sola vez pasando un arreglo al método <code>apiResources</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">apiResources</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'photos'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'PhotoController'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'posts'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'PostController'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Para generar rápidamente un controlador de recursos API que no incluya los métodos <code>create</code> o <code>edit</code>, usa la opción <code>--api</code> cuando ejecutes el comando <code>make:controller</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan <span class="token argument-name">make</span><span class="token punctuation">:</span>controller <span class="token constant">API</span><span class="token operator">/</span>PhotoController <span class="token operator">--</span>api
</code></pre></div><p><a name="restful-nested-resources"></a></p> <h3 id="recursos-anidados"><a href="#recursos-anidados" class="header-anchor">#</a> Recursos anidados</h3> <p>Algunas veces necesitarás definir rutas a un recurso anidado. Por ejemplo, una imagen puede tener múltiples comentarios que podrían estar atados a ésta. Para anidar los controladores de recursos, usa la notación de &quot;punto&quot; en la declaración de tu ruta:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'photos.comments'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'PhotoCommentController'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Esta ruta registrará un recurso anidado al cual se puede acceder mediante URLs como la siguiente:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">/</span>photos<span class="token operator">/</span><span class="token punctuation">{</span>photo<span class="token punctuation">}</span><span class="token operator">/</span>comments<span class="token operator">/</span><span class="token punctuation">{</span>comment<span class="token punctuation">}</span>
</code></pre></div><h4 id="anidacion-superficial"><a href="#anidacion-superficial" class="header-anchor">#</a> Anidación superficial</h4> <p>A menudo, no es completamente necesario tener tanto el ID del padre como del hijo dentro de una URI, dado que el ID del hijo es un identificador único. Al usar identificadores únicos, como claves primarias de auto incremento para identificar tus modelos en segmentos de una URI, puedes elegir usar &quot;anidación superficial&quot;:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'photos.comments'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'CommentController'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">shallow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>La definición de ruta anterior definirá las siguientes rutas:</p> <table><thead><tr><th>Tipo</th> <th>URI</th> <th>Acción</th> <th>Nombre de la Ruta</th></tr></thead> <tbody><tr><td>GET</td> <td><code>/photos/{photo}/comments</code></td> <td>index</td> <td>photos.comments.index</td></tr> <tr><td>GET</td> <td><code>/photos/{photo}/comments/create</code></td> <td>create</td> <td>photos.comments.create</td></tr> <tr><td>POST</td> <td><code>/photos/{photo}/comments</code></td> <td>store</td> <td>photos.comments.store</td></tr> <tr><td>GET</td> <td><code>/comments/{comment}</code></td> <td>show</td> <td>comments.show</td></tr> <tr><td>GET</td> <td><code>/comments/{comment}/edit</code></td> <td>edit</td> <td>comments.edit</td></tr> <tr><td>PUT/PATCH</td> <td><code>/comments/{comment}</code></td> <td>update</td> <td>comments.update</td></tr> <tr><td>DELETE</td> <td><code>/comments/{comment}</code></td> <td>destroy</td> <td>comments.destroy</td></tr></tbody></table> <p><a name="restful-naming-resource-routes"></a></p> <h3 id="nombrando-rutas-de-recursos"><a href="#nombrando-rutas-de-recursos" class="header-anchor">#</a> Nombrando rutas de recursos</h3> <p>De forma predeterminada, todas las acciones de controlador de recursos tienen un nombre de ruta; sin embargo, puedes sobrescribir esos nombres al pasar el arreglo <code>names</code> con tus opciones:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'photos'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'PhotoController'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">names</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'create'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'photos.build'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="restful-naming-resource-route-parameters"></a></p> <h3 id="nombrando-parametros-de-rutas-de-recursos"><a href="#nombrando-parametros-de-rutas-de-recursos" class="header-anchor">#</a> Nombrando parámetros de rutas de recursos</h3> <p>De forma predeterminada, <code>Route::resource</code> creará los parámetros de ruta para tus rutas de recursos basado en la versión &quot;singularizada&quot; del nombre de recurso. Puedes sobrescribir fácilmente esto para cada recurso usando el método <code>parameters</code>. El arreglo pasado al método <code>parameters</code> debería ser un arreglo asociativo de nombres de recursos y nombres de parámetros:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'users'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'AdminUserController'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">parameters</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'users'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'admin_user'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>El ejemplo anterior genera las URIs siguientes para la ruta <code>show</code> del recurso:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">/</span>users<span class="token operator">/</span><span class="token punctuation">{</span>admin_user<span class="token punctuation">}</span>
</code></pre></div><p><a name="restful-localizing-resource-uris"></a></p> <h3 id="configuracion-regional-para-uris-de-recursos"><a href="#configuracion-regional-para-uris-de-recursos" class="header-anchor">#</a> Configuración regional para URIs de recursos</h3> <p>De forma predeterminada, <code>Route::resource</code> creará URIs de recursos usando verbos en Inglés. Si necesitas configurar los verbos de acción <code>create</code> y <code>edit</code> a un idioma, puedes usar el método <code>Route::resourceVerbs</code>. Esto puede ser hecho en el método <code>boot</code> de tu <code>AppServiceProvider</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Route</span><span class="token punctuation">;</span>

<span class="token comment">/**
* Bootstrap any application services.
*
* @return void
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">resourceVerbs</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'create'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'crear'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'edit'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'editar'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Una vez que los verbos han sido personalizados, un registro de ruta de recurso tal como <code>Route::resource('fotos', 'PhotoController')</code> producirá las siguientes URIs:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">/</span>fotos<span class="token operator">/</span>crear

<span class="token operator">/</span>fotos<span class="token operator">/</span><span class="token punctuation">{</span>foto<span class="token punctuation">}</span><span class="token operator">/</span>editar
</code></pre></div><p><a name="restful-supplementing-resource-controllers"></a></p> <h3 id="complementando-controladores-de-recursos"><a href="#complementando-controladores-de-recursos" class="header-anchor">#</a> Complementando controladores de recursos</h3> <p>Si necesitas agregar rutas adicionales para un controlador de recursos más allá del conjunto predeterminado de rutas de recursos, deberías definir esas rutas antes de que ejecutes <code>Route::resource</code>; de otra forma, las rutas definidas por el método <code>resource</code> pueden tomar precedencia involuntariamente sobre tus rutas complementarias:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'photos/popular'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'PhotoController@method'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'photos'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'PhotoController'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Recuerda mantener la lógica de tus controladores enfocada. Si te encuentras a ti mismo necesitando rutinariamente métodos fuera del conjunto típico de acciones de recurso, considera dividir tu controlador en dos controladores más pequeños.</p></div> <p><a name="dependency-injection-and-controllers"></a></p> <h2 id="inyeccion-de-dependencias-y-controladores"><a href="#inyeccion-de-dependencias-y-controladores" class="header-anchor">#</a> Inyección de dependencias y controladores</h2> <h4 id="inyeccion-al-constructor"><a href="#inyeccion-al-constructor" class="header-anchor">#</a> Inyección al constructor</h4> <p>El <a href="/container.html">contenedor de servicio</a> de Laravel es usado para resolver todos los controladores de Laravel. Como resultado, estás habilitado para declarar el tipo de cualquier dependencia que tu controlador pueda necesitar en su constructor. Las dependencias declaradas serán automáticamente resueltas e inyectadas dentro de la instancia del controlador:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Repositories<span class="token punctuation">\</span>UserRepository</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * The user repository instance.
    */</span>
    <span class="token keyword">protected</span> <span class="token variable">$users</span><span class="token punctuation">;</span>

    <span class="token comment">/**
    * Create a new controller instance.
    *
    * @param  UserRepository  $users
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token class-name type-declaration">UserRepository</span> <span class="token variable">$users</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">users</span> <span class="token operator">=</span> <span class="token variable">$users</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>También puedes declarar el tipo de cualquier <a href="/contracts.html">Contrato de Laravel</a>. Si el contenedor puede resolverlo, puedes declararlo. Dependiendo de tu aplicación, inyectar tus dependencias dentro de tu controlador puede proporcionar mejor capacidad para pruebas.</p> <h4 id="inyeccion-de-metodos"><a href="#inyeccion-de-metodos" class="header-anchor">#</a> Inyección de métodos</h4> <p>Adicional a la inyección al constructor, también puedes declarar el tipo de dependencias en los métodos de tu controlador. Un caso de uso común para la inyección de métodos es inyectar la instancia <code>Illuminate\Http\Request</code> dentro de tus métodos de controlador:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Store a new user.
    *
    * @param  Request  $request
    * @return Response
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">store</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Request</span> <span class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$name</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">;</span>

        <span class="token comment">//</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Si tu método de controlador también está esperando entrada de un parámetro de ruta, lista tus argumentos de ruta después de tus otras dependencias. Por ejemplo, si tu ruta es definida como esto:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'user/{id}'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'UserController@update'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Aún puedes declarar el tipo de la clase <code>Illuminate\Http\Request</code> y acceder a tu parámetro <code>id</code> al definir tu método de controlador de la siguiente manera:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Update the given user.
    *
    * @param  Request  $request
    * @param  string  $id
    * @return Response
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Request</span> <span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p><a name="route-caching"></a></p> <h2 id="cache-de-rutas"><a href="#cache-de-rutas" class="header-anchor">#</a> Caché de rutas</h2> <div class="custom-block danger"><p class="custom-block-title">Nota</p> <p>Las rutas basadas en Closure no pueden ser cacheadas. Para usar caché de rutas, debes convertir cualquiera de las rutas Closure a clases de controlador.</p></div> <p>Si tu aplicación está usando exclusivamente rutas basadas en controlador, deberías tomar ventaja de la caché de rutas de Laravel. Usar la caché de rutas reducirá drásticamente la cantidad de tiempo que toma registrar todas las rutas de tu aplicación. En algunos casos, incluso la rapidez de tu registro de rutas puede llegar a ser hasta 100 veces más rápida. Para generar una caché de ruta, simplemente ejecuta el comando Artisan <code>route:cache</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan <span class="token argument-name">route</span><span class="token punctuation">:</span>cache
</code></pre></div><p>Después de ejecutar este comando, tu archivo de rutas cacheado será cargado en cada solicitud. Recuerda, si agregas cualquier ruta nueva necesitarás generar una caché de ruta nueva. Debido a esto, deberías ejecutar solamente el comando <code>route:cache</code> durante el despliegue o puesta en producción del proyecto.</p> <p>Puedes usar el comando <code>route:clear</code> para limpiar la caché de ruta:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan <span class="token argument-name">route</span><span class="token punctuation">:</span>clear
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b0740f8f.js" defer></script><script src="/assets/js/2.648c6578.js" defer></script><script src="/assets/js/21.a9dd9148.js" defer></script>
  </body>
</html>
