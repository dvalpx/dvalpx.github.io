<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Documentación de Laravel</title>
    <meta name="description" content="Documentación de Laravel en Español">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran:300,700|Miriam+Libre">
  <link rel="icon" href="/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.1d810b70.css" as="style"><link rel="preload" href="/assets/js/app.2b9ea969.js" as="script"><link rel="preload" href="/assets/js/2.8f57d70e.js" as="script"><link rel="preload" href="/assets/js/31.3e424427.js" as="script"><link rel="prefetch" href="/assets/js/10.7938642f.js"><link rel="prefetch" href="/assets/js/11.c6b40999.js"><link rel="prefetch" href="/assets/js/12.f18cbc71.js"><link rel="prefetch" href="/assets/js/13.87062664.js"><link rel="prefetch" href="/assets/js/14.716cc2f2.js"><link rel="prefetch" href="/assets/js/15.101f24d3.js"><link rel="prefetch" href="/assets/js/16.194f71f1.js"><link rel="prefetch" href="/assets/js/17.7a326a09.js"><link rel="prefetch" href="/assets/js/18.b64057ad.js"><link rel="prefetch" href="/assets/js/19.fd9838bd.js"><link rel="prefetch" href="/assets/js/20.a746ec9b.js"><link rel="prefetch" href="/assets/js/21.0b1db6c3.js"><link rel="prefetch" href="/assets/js/22.53339c00.js"><link rel="prefetch" href="/assets/js/23.6b0cb45c.js"><link rel="prefetch" href="/assets/js/24.93c8a909.js"><link rel="prefetch" href="/assets/js/25.117b3835.js"><link rel="prefetch" href="/assets/js/26.69cc1975.js"><link rel="prefetch" href="/assets/js/27.7c03833d.js"><link rel="prefetch" href="/assets/js/28.d8cd7c15.js"><link rel="prefetch" href="/assets/js/29.3c433a6b.js"><link rel="prefetch" href="/assets/js/3.37d22ff0.js"><link rel="prefetch" href="/assets/js/30.51df909b.js"><link rel="prefetch" href="/assets/js/32.723aca49.js"><link rel="prefetch" href="/assets/js/33.baa640d1.js"><link rel="prefetch" href="/assets/js/34.df138466.js"><link rel="prefetch" href="/assets/js/35.21e17f02.js"><link rel="prefetch" href="/assets/js/36.2e171db2.js"><link rel="prefetch" href="/assets/js/37.bec18e54.js"><link rel="prefetch" href="/assets/js/38.a7a776ca.js"><link rel="prefetch" href="/assets/js/39.b9a4f2fb.js"><link rel="prefetch" href="/assets/js/4.95b68b43.js"><link rel="prefetch" href="/assets/js/40.2246938f.js"><link rel="prefetch" href="/assets/js/41.22ea0021.js"><link rel="prefetch" href="/assets/js/42.5ad9fa0f.js"><link rel="prefetch" href="/assets/js/43.b047d897.js"><link rel="prefetch" href="/assets/js/44.5768076f.js"><link rel="prefetch" href="/assets/js/45.bace0817.js"><link rel="prefetch" href="/assets/js/46.64b5b83e.js"><link rel="prefetch" href="/assets/js/47.db1a199f.js"><link rel="prefetch" href="/assets/js/48.64f86db5.js"><link rel="prefetch" href="/assets/js/49.869a49e7.js"><link rel="prefetch" href="/assets/js/5.f56202c2.js"><link rel="prefetch" href="/assets/js/50.4c133fa7.js"><link rel="prefetch" href="/assets/js/51.b6f5c408.js"><link rel="prefetch" href="/assets/js/52.c31b3720.js"><link rel="prefetch" href="/assets/js/53.c516dc0d.js"><link rel="prefetch" href="/assets/js/54.0a75eebd.js"><link rel="prefetch" href="/assets/js/55.b4187092.js"><link rel="prefetch" href="/assets/js/56.fd9cd33d.js"><link rel="prefetch" href="/assets/js/57.af8c7f72.js"><link rel="prefetch" href="/assets/js/58.74f43cd5.js"><link rel="prefetch" href="/assets/js/59.33be1234.js"><link rel="prefetch" href="/assets/js/6.7ed940c0.js"><link rel="prefetch" href="/assets/js/60.ca4183e4.js"><link rel="prefetch" href="/assets/js/61.f8caddf4.js"><link rel="prefetch" href="/assets/js/62.c2681bcb.js"><link rel="prefetch" href="/assets/js/63.0febbdbe.js"><link rel="prefetch" href="/assets/js/64.aa808f04.js"><link rel="prefetch" href="/assets/js/65.faf253ca.js"><link rel="prefetch" href="/assets/js/66.f6fff51f.js"><link rel="prefetch" href="/assets/js/67.2883abee.js"><link rel="prefetch" href="/assets/js/68.54d7ea98.js"><link rel="prefetch" href="/assets/js/69.836842cc.js"><link rel="prefetch" href="/assets/js/7.24ef9c67.js"><link rel="prefetch" href="/assets/js/70.ddbff7ae.js"><link rel="prefetch" href="/assets/js/71.e740d466.js"><link rel="prefetch" href="/assets/js/72.cd2c768b.js"><link rel="prefetch" href="/assets/js/73.e5ae99e8.js"><link rel="prefetch" href="/assets/js/74.940c12d4.js"><link rel="prefetch" href="/assets/js/75.959ec3b1.js"><link rel="prefetch" href="/assets/js/76.aa5495f9.js"><link rel="prefetch" href="/assets/js/77.5805f9d3.js"><link rel="prefetch" href="/assets/js/78.b9cb1e95.js"><link rel="prefetch" href="/assets/js/79.8f864857.js"><link rel="prefetch" href="/assets/js/8.c7de5777.js"><link rel="prefetch" href="/assets/js/80.74130e6a.js"><link rel="prefetch" href="/assets/js/81.d2036601.js"><link rel="prefetch" href="/assets/js/82.87cc02ef.js"><link rel="prefetch" href="/assets/js/83.569392ab.js"><link rel="prefetch" href="/assets/js/84.f690ba1e.js"><link rel="prefetch" href="/assets/js/85.dca0f9e9.js"><link rel="prefetch" href="/assets/js/9.52de0ad8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1d810b70.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Documentación de Laravel</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div><div class="nav-item"><a href="/glossary.html" class="nav-link">Glosario</a></div><div class="nav-item"><a href="/credits.html" class="nav-link">Créditos</a></div><div class="nav-item"><a href="https://styde.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Styde
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div><div class="nav-item"><a href="/glossary.html" class="nav-link">Glosario</a></div><div class="nav-item"><a href="/credits.html" class="nav-link">Créditos</a></div><div class="nav-item"><a href="https://styde.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Styde
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Primeros pasos</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Conceptos de arquitectura</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Fundamentos</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Frontend</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Seguridad</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Profundizando</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Bases de datos</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>ORM Eloquent</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/eloquent.html" class="sidebar-link">/eloquent.html</a></li><li><a href="/eloquent-relationships.html" class="sidebar-link">/eloquent-relationships.html</a></li><li><a href="/eloquent-collections.html" class="sidebar-link">/eloquent-collections.html</a></li><li><a href="/eloquent-mutators.html" class="active sidebar-link">/eloquent-mutators.html</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/eloquent-mutators.html#introduccion" class="sidebar-link">Introducción</a></li><li class="sidebar-sub-header"><a href="/eloquent-mutators.html#accesadores-y-mutadores" class="sidebar-link">Accesadores y mutadores</a></li><li class="sidebar-sub-header"><a href="/eloquent-mutators.html#mutadores-de-fecha" class="sidebar-link">Mutadores de fecha</a></li><li class="sidebar-sub-header"><a href="/eloquent-mutators.html#conversion-casting-de-atributos" class="sidebar-link">Conversión (casting) de atributos</a></li></ul></li><li><a href="/eloquent-serialization.html" class="sidebar-link">/eloquent-serialization.html</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Pruebas</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Paquetes oficiales</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div><h1 id="eloquent-mutators"><a class="header-anchor" href="#eloquent-mutators" aria-hidden="true">#</a> Eloquent: Mutators</h1> <ul><li><a href="#introduction">Introducción</a></li> <li><a href="#accessors-and-mutators">Accesadores y mutadores</a> <ul><li><a href="#defining-an-accessor">Definiendo un accesador</a></li> <li><a href="#defining-a-mutator">Definiendo un mutador</a></li></ul></li> <li><a href="#date-mutators">Mutadores de fecha</a></li> <li><a href="#attribute-casting">Conversión de atributos</a> <ul><li><a href="#array-and-json-casting">Conversión de arreglos y JSON</a></li> <li><a href="#date-casting">Conversión de fechas</a></li></ul></li></ul> <p><a name="introduction"></a></p> <h2 id="introduccion"><a class="header-anchor" href="#introduccion" aria-hidden="true">#</a> Introducción</h2> <p>Los accesadores y mutadores permiten que des formato a los valores de atributos de Eloquent cuando los obtienes o estableces en las instancias de modelo. Por ejemplo, puede que te guste usar el <a href="/docs/%7B%7Bversion%7D%7D/encryption">encriptador de Laravel</a> para cifrar un valor mientras es almacenado en la base de datos y después descifrar automáticamente el atributo cuando accedes a él en un modelo de Eloquent.</p> <p>Además de los accesadores y los mutadores personalizados, Eloquent también puede convertir automáticamente campos de fecha a instancias <a href="https://github.com/briannesbitt/Carbon" target="_blank" rel="noopener noreferrer">Carbon<OutboundLink></OutboundLink></a> o incluso <a href="#attribute-casting">convertir campos de texto a JSON</a>.</p> <p><a name="accessors-and-mutators"></a></p> <h2 id="accesadores-y-mutadores"><a class="header-anchor" href="#accesadores-y-mutadores" aria-hidden="true">#</a> Accesadores y mutadores</h2> <p><a name="defining-an-accessor"></a></p> <h3 id="definiendo-un-accesador"><a class="header-anchor" href="#definiendo-un-accesador" aria-hidden="true">#</a> Definiendo un accesador</h3> <p>Para definir un accesador crea un método <code>getFooAttribute</code> en tu modelo, donde <code>Foo</code> es el nombre de la columna que deseas acceder en el formato Studly Case (Primera letra de cada palabra en mayúscula). En este ejemplo, definiremos un accesador para el atributo <code>first_name</code>. El accesador automáticamente será ejecutado por Eloquent al momento de intentar obtener el valor del atributo <code>first_name</code>:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Get the user's first name.
    *
    * @param  string  $value
    * @return string
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">getFirstNameAttribute</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">ucfirst</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Como puedes ver, el valor original de la columna es pasado al accesador, permitiéndote manipular y devolver el valor. Para acceder al valor del accesador, puedes acceder al atributo <code>first_name</code> en una instancia del modelo:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> App\<span class="token package">User</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$firstName</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">first_name</span><span class="token punctuation">;</span>
</code></pre></div><p>También puedes usar accesadores para retornar nuevos valores computados de atributos existentes:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token comment">/**
* Get the user's full name.
*
* @return string
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">getFullNameAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token double-quoted-string string">&quot;<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">first_name</span><span class="token punctuation">}</span></span> <span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">last_name</span><span class="token punctuation">}</span></span>&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="tip custom-block"><p>Si deseas que estos valores computados sean agregados a las representaciones de arreglo / JSON de tu modelo, <a href="https://laravel.com/docs/%7B%7Bversion%7D%7D/eloquent-serialization#appending-values-to-json" target="_blank" rel="noopener noreferrer">necesitarás adjuntarlos<OutboundLink></OutboundLink></a>.</p></div></div><p><a name="defining-a-mutator"></a></p> <h3 id="definiendo-un-mutador"><a href="#definiendo-un-mutador" aria-hidden="true" class="header-anchor">#</a> Definiendo un mutador</h3> <p>Para definir un mutador, define un método <code>setFooAttribute</code> en tu modelo, donde <code>Foo</code> es el nombre de la columna que deseas acceder en el formato Studly Case (Primera letra de cada palabra en mayúscula). Así, otra vez, vamos a definir un mutador para el atributo <code>first_name</code>. Este mutador será ejecutado automáticamente cuando intentamos establecer el valor del atributo <code>first_name</code> en el modelo:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Set the user's first name.
    *
    * @param  string  $value
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">setFirstNameAttribute</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">attributes</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'first_name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strtolower</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>El mutador recibirá el valor que está siendo establecido en el atributo, permitiéndote manipular el valor y establecer el valor manipulado en la propiedad <code>$attributes</code> interna del modelo Eloquent. Así, por ejemplo, si intentamos establecer el atributo <code>first_name</code> como <code>Sally</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> App\<span class="token package">User</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">first_name</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'Sally'</span><span class="token punctuation">;</span>
</code></pre></div><p>En este ejemplo, la función <code>setFirstNameAttribute</code> será ejecutada con el valor <code>Sally</code>. El mutador entonces aplicará la función <code>strtolower</code> al nombre y establecerá su valor resultante en el arreglo <code>$attributes</code> interno.</p> <p><a name="date-mutators"></a></p> <h2 id="mutadores-de-fecha"><a href="#mutadores-de-fecha" aria-hidden="true" class="header-anchor">#</a> Mutadores de fecha</h2> <p>De forma predeterminada, Eloquent convertirá las columnas <code>created_at</code> y <code>updated_at</code> a instancias de <a href="https://github.com/briannesbitt/Carbon" target="_blank" rel="noopener noreferrer">Carbon<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, la cual extiende la clase <code>DateTime</code> de PHP para proporcionar una variedad de métodos útiles.  Puedes agregar atributos de fecha adicionales estableciendo la propiedad <code>$dates</code> de tu modelo.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * The attributes that should be mutated to dates.
    *
    * @var array
    */</span>
    <span class="token keyword">protected</span> <span class="token variable">$dates</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'seen_at'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre></div><div class="tip custom-block"><p>Puedes desactivar las marcas de tiempo (timestamps) predeterminadas <code>created_at</code> y<code>updated_at</code> configurando la propiedad pública <code>$timestamps</code> de tu modelo en <code>false</code>.</p></div> <p>Cuando una columna es considerada una fecha, puedes establecer su valor a una marca de tiempo UNIX, cadena de fecha (<code>Y-m-d</code>), cadena fecha-hora o una instancia <code>DateTime</code> / <code>Carbon</code>. El valor de la fecha será convertido y almacenado correctamente en tu base de datos:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> App\<span class="token package">User</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">deleted_at</span> <span class="token operator">=</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Como se apreció anteriormente, al momento de obtener atributos que están listados en tu propiedad <code>$dates</code>, éstos serán automáticamente convertidos a instancias <a href="https://github.com/briannesbitt/Carbon" target="_blank" rel="noopener noreferrer">Carbon<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, permitiendo que uses cualquiera de los métodos de Carbon en tus atributos:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> App\<span class="token package">User</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">deleted_at</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="formatos-de-fecha"><a href="#formatos-de-fecha" aria-hidden="true" class="header-anchor">#</a> Formatos de fecha</h4> <p>De forma predeterminada, las marcas de tiempo son formateadas como <code>'Y-m-d H:i:s'</code>. Si necesitas personalizar el formato de marca de tiempo, establece la propiedad <code>$dateFormat</code> en tu modelo. Esta propiedad determina como los atributos de fecha son almacenados en la base de datos así como también su formato cuando el modelo es serializado a un arreglo o JSON:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Flight</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * The storage format of the model's date columns.
    *
    * @var string
    */</span>
    <span class="token keyword">protected</span> <span class="token variable">$dateFormat</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'U'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p><a name="attribute-casting"></a></p> <h2 id="conversion-casting-de-atributos"><a href="#conversion-casting-de-atributos" aria-hidden="true" class="header-anchor">#</a> Conversión (casting) de atributos</h2> <p>La propiedad <code>$casts</code> en tu modelo proporciona un método conveniente de convertir atributos a tipos de datos comunes. La propiedad <code>$casts</code> debería ser un arreglo donde la clave es el nombre del atributo que está siendo convertido y el valor es el tipo al que deseas convertir la columna. Los tipos de conversión soportados son: <code>integer</code>, <code>real</code>, <code>float</code>, <code>double</code>, <code>decimal:&lt;digits&gt;</code>, <code>string</code>, <code>boolean</code>, <code>object</code>, <code>array</code>, <code>collection</code>, <code>date</code>, <code>datetime</code>, and <code>timestamp</code>. Al convertir en <code>decimal</code>, debes definir el número de digitos (<code>decimal:2</code>).</p> <p>Para demostrar la conversión de atributos, vamos a convertir el atributo <code>is_admin</code>, el cual es almacenado en nuestra base de datos como un entero (<code>0</code> o <code>1</code>) a un valor booleano:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * The attributes that should be cast to native types.
    *
    * @var array
    */</span>
    <span class="token keyword">protected</span> <span class="token variable">$casts</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'is_admin'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'boolean'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Ahora el atributo <code>is_admin</code> será siempre convertido a un booleano cuando lo accedas, incluso si el valor subyacente es almacenado en la base de datos como un entero:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> App\<span class="token package">User</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">is_admin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="array-and-json-casting"></a></p> <h3 id="conversion-de-arreglos-y-json"><a href="#conversion-de-arreglos-y-json" aria-hidden="true" class="header-anchor">#</a> Conversión de arreglos y JSON</h3> <p>El tipo de conversión <code>array</code> es particularmente útil al momento de trabajar con columnas que son almacenadas como JSON serializado. Por ejemplo, si tu base de datos tiene un tipo de campo <code>JSON</code> o <code>TEXT</code> que contiene JSON serializado, agregar la conversión <code>array</code> a ese atributo deserializará automáticamente el atributo a un arreglo PHP cuando lo accedas en tu modelo Eloquent:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * The attributes that should be cast to native types.
    *
    * @var array
    */</span>
    <span class="token keyword">protected</span> <span class="token variable">$casts</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'options'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'array'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Una vez que la conversión es definida, puedes acceder al atributo <code>options</code> y será automáticamente deserializado desde JSON a un arreglo PHP. Cuando establezcas el valor del atributo <code>options</code>, el arreglo dado será automáticamente serializado de vuelta en JSON para almacenamiento:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> App\<span class="token package">User</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$options</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">options</span><span class="token punctuation">;</span>

<span class="token variable">$options</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">;</span>

<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">options</span> <span class="token operator">=</span> <span class="token variable">$options</span><span class="token punctuation">;</span>

<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="date-casting"></a></p> <h3 id="conversion-de-fechas"><a href="#conversion-de-fechas" aria-hidden="true" class="header-anchor">#</a> Conversión de fechas</h3> <p>Al usar el tipo de conversión <code>date</code> o<code>datetime</code>, puedes especificar el formato de la fecha. Este formato se utilizará cuando el <a href="/eloquent-serialization.html">modelo se serializa a un arreglo o JSON</a>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* The attributes that should be cast to native types.
*
* @var array
*/</span>
<span class="token keyword">protected</span> <span class="token variable">$casts</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'created_at'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'datetime:Y-m-d'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/eloquent-collections.html" class="prev">
          /eloquent-collections.html
        </a></span> <span class="next"><a href="/eloquent-serialization.html">
          /eloquent-serialization.html
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2b9ea969.js" defer></script><script src="/assets/js/2.8f57d70e.js" defer></script><script src="/assets/js/31.3e424427.js" defer></script>
  </body>
</html>
