<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Eloquent: Mutators | Documentación de Laravel en Español</title>
    <meta name="description" content="Documentación de Laravel en Español">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran:300,700|Miriam+Libre">
    
    <link rel="preload" href="/assets/css/0.styles.c1d85b90.css" as="style"><link rel="preload" href="/assets/js/app.7a95d043.js" as="script"><link rel="preload" href="/assets/js/28.6731c588.js" as="script"><link rel="prefetch" href="/assets/js/10.2af4f643.js"><link rel="prefetch" href="/assets/js/11.274c7912.js"><link rel="prefetch" href="/assets/js/12.6ce98df7.js"><link rel="prefetch" href="/assets/js/13.33c944ce.js"><link rel="prefetch" href="/assets/js/14.756e69f9.js"><link rel="prefetch" href="/assets/js/15.fba5ba69.js"><link rel="prefetch" href="/assets/js/16.5af57a3b.js"><link rel="prefetch" href="/assets/js/17.51651f85.js"><link rel="prefetch" href="/assets/js/18.5707d37c.js"><link rel="prefetch" href="/assets/js/19.64d25da7.js"><link rel="prefetch" href="/assets/js/2.cab3aa49.js"><link rel="prefetch" href="/assets/js/20.d67cf0a7.js"><link rel="prefetch" href="/assets/js/21.4ee3b46f.js"><link rel="prefetch" href="/assets/js/22.11d55696.js"><link rel="prefetch" href="/assets/js/23.e08971b1.js"><link rel="prefetch" href="/assets/js/24.6b3b74f9.js"><link rel="prefetch" href="/assets/js/25.262add37.js"><link rel="prefetch" href="/assets/js/26.eac29999.js"><link rel="prefetch" href="/assets/js/27.0d274e87.js"><link rel="prefetch" href="/assets/js/29.2878c630.js"><link rel="prefetch" href="/assets/js/3.5c0e0e91.js"><link rel="prefetch" href="/assets/js/30.e06ece4c.js"><link rel="prefetch" href="/assets/js/31.c0775e1c.js"><link rel="prefetch" href="/assets/js/32.cc005b06.js"><link rel="prefetch" href="/assets/js/33.076a6793.js"><link rel="prefetch" href="/assets/js/34.48439ee5.js"><link rel="prefetch" href="/assets/js/35.6060283d.js"><link rel="prefetch" href="/assets/js/36.584238a9.js"><link rel="prefetch" href="/assets/js/37.763cbe3d.js"><link rel="prefetch" href="/assets/js/38.fcb6de0c.js"><link rel="prefetch" href="/assets/js/39.cb692ee9.js"><link rel="prefetch" href="/assets/js/4.19e67527.js"><link rel="prefetch" href="/assets/js/40.272b8e5d.js"><link rel="prefetch" href="/assets/js/41.471237bb.js"><link rel="prefetch" href="/assets/js/42.ceaa56f3.js"><link rel="prefetch" href="/assets/js/43.68107365.js"><link rel="prefetch" href="/assets/js/44.38f972c7.js"><link rel="prefetch" href="/assets/js/45.61cfa7f1.js"><link rel="prefetch" href="/assets/js/46.4fc12b50.js"><link rel="prefetch" href="/assets/js/47.2429f397.js"><link rel="prefetch" href="/assets/js/48.a4be8223.js"><link rel="prefetch" href="/assets/js/49.3dd06c0a.js"><link rel="prefetch" href="/assets/js/5.662e4e3e.js"><link rel="prefetch" href="/assets/js/50.e252b1a5.js"><link rel="prefetch" href="/assets/js/51.196e391e.js"><link rel="prefetch" href="/assets/js/52.e9c88c40.js"><link rel="prefetch" href="/assets/js/53.23c91e23.js"><link rel="prefetch" href="/assets/js/54.30078aba.js"><link rel="prefetch" href="/assets/js/55.a615e96f.js"><link rel="prefetch" href="/assets/js/56.23d1f409.js"><link rel="prefetch" href="/assets/js/57.e8be8673.js"><link rel="prefetch" href="/assets/js/58.c4bac631.js"><link rel="prefetch" href="/assets/js/59.8fc4db9a.js"><link rel="prefetch" href="/assets/js/6.42cd9864.js"><link rel="prefetch" href="/assets/js/60.011e1aa3.js"><link rel="prefetch" href="/assets/js/61.6d89d8fe.js"><link rel="prefetch" href="/assets/js/62.d336c4e7.js"><link rel="prefetch" href="/assets/js/63.aaa15f32.js"><link rel="prefetch" href="/assets/js/64.d842bba0.js"><link rel="prefetch" href="/assets/js/65.c0ddd675.js"><link rel="prefetch" href="/assets/js/66.18b8155d.js"><link rel="prefetch" href="/assets/js/67.c9b6a572.js"><link rel="prefetch" href="/assets/js/68.8a9f9ce1.js"><link rel="prefetch" href="/assets/js/69.955c250c.js"><link rel="prefetch" href="/assets/js/7.8fce2083.js"><link rel="prefetch" href="/assets/js/70.dad09a36.js"><link rel="prefetch" href="/assets/js/71.eb6d8483.js"><link rel="prefetch" href="/assets/js/72.b447bae7.js"><link rel="prefetch" href="/assets/js/73.43cd827d.js"><link rel="prefetch" href="/assets/js/74.e5d3ec83.js"><link rel="prefetch" href="/assets/js/75.26e74e80.js"><link rel="prefetch" href="/assets/js/76.a125a771.js"><link rel="prefetch" href="/assets/js/77.a863860d.js"><link rel="prefetch" href="/assets/js/78.c6ecb4b8.js"><link rel="prefetch" href="/assets/js/79.8277b911.js"><link rel="prefetch" href="/assets/js/8.57a82a23.js"><link rel="prefetch" href="/assets/js/80.4c5d179d.js"><link rel="prefetch" href="/assets/js/81.026e857b.js"><link rel="prefetch" href="/assets/js/9.3e704964.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c1d85b90.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Documentación de Laravel en Español</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Primeros Pasos</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Conceptos De Arquitectura</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Fundamentos</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Frontend</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Seguridad</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Profundizando</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Bases De Datos</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>ORM Eloquent</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/eloquent.html" class="sidebar-link">Eloquent: Primeros Pasos</a></li><li><a href="/eloquent-relationships.html" class="sidebar-link">Eloquent: Relaciones</a></li><li><a href="/eloquent-collections.html" class="sidebar-link">Eloquent: Colecciones</a></li><li><a href="/eloquent-mutators.html" class="active sidebar-link">Eloquent: Mutators</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/eloquent-mutators.html#introduccion" class="sidebar-link">Introducción</a></li><li class="sidebar-sub-header"><a href="/eloquent-mutators.html#accesadores-y-mutadores" class="sidebar-link">Accesadores y Mutadores</a></li><li class="sidebar-sub-header"><a href="/eloquent-mutators.html#mutadores-de-fecha" class="sidebar-link">Mutadores de Fecha</a></li><li class="sidebar-sub-header"><a href="/eloquent-mutators.html#conversion-casting-de-atributos" class="sidebar-link">Conversión (casting) de Atributos</a></li></ul></li><li><a href="/eloquent-serialization.html" class="sidebar-link">Eloquent: Serialización</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Pruebas</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Paquetes oficiales</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><div><h1 id="eloquent-mutators"><a class="header-anchor" href="#eloquent-mutators" aria-hidden="true">#</a> Eloquent: Mutators</h1> <ul><li><a href="#introduction">Introducción</a></li> <li><a href="#accessors-and-mutators">Accesadores y Mutadores</a> <ul><li><a href="#defining-an-accessor">Definiendo un Accesador</a></li> <li><a href="#defining-a-mutator">Definiendo un Mutador</a></li></ul></li> <li><a href="#date-mutators">Mutadores de Fecha</a></li> <li><a href="#attribute-casting">Conversión de Atributos</a> <ul><li><a href="#array-and-json-casting">Conversión de Arreglos y JSON</a></li> <li><a href="#date-casting">Conversión de fechas</a></li></ul></li></ul> <p><a name="introduction"></a></p> <h2 id="introduccion"><a class="header-anchor" href="#introduccion" aria-hidden="true">#</a> Introducción</h2> <p>Los accesadores y mutadores permiten que des formato a los valores de atributos de Eloquent cuando los obtienes o estableces en las instancias de modelo. Por ejemplo, puede que te guste usar el <a href="/docs/%7B%7Bversion%7D%7D/encryption">encriptador de Laravel</a> para cifrar un valor mientras es almacenado en la base de datos y después descifrar automáticamente el atributo cuando accedes a él en un modelo de Eloquent.</p> <p>Además de los accesadores y los mutadores personalizados, Eloquent también puede convertir automáticamente campos de fecha a instancias <a href="https://github.com/briannesbitt/Carbon" target="_blank" rel="noopener noreferrer">Carbon<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> o incluso <a href="#attribute-casting">convertir campos de texto a JSON</a>.</p> <p><a name="accessors-and-mutators"></a></p> <h2 id="accesadores-y-mutadores"><a class="header-anchor" href="#accesadores-y-mutadores" aria-hidden="true">#</a> Accesadores y Mutadores</h2> <p><a name="defining-an-accessor"></a></p> <h3 id="definiendo-un-accesador"><a class="header-anchor" href="#definiendo-un-accesador" aria-hidden="true">#</a> Definiendo un Accesador</h3> <p>Para definir un accesador crea un método <code>getFooAttribute</code> en tu modelo, donde <code>Foo</code> es el nombre de la columna que deseas acceder en el formato Studly Case (Primera letra de cada palabra en mayúscula). En este ejemplo, definiremos un accesador para el atributo <code>first_name</code>. El accesador automáticamente será ejecutado por Eloquent al momento de intentar obtener el valor del atributo <code>first_name</code>:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Get the user's first name.
    *
    * @param  string  $value
    * @return string
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">getFirstNameAttribute</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">ucfirst</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Como puedes ver, el valor original de la columna es pasado al accesador, permitiéndote manipular y devolver el valor. Para acceder al valor del accesador, puedes acceder al atributo <code>first_name</code> en una instancia del modelo:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> App\<span class="token package">User</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$firstName</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">first_name</span><span class="token punctuation">;</span>
</code></pre></div><p>También puedes usar accesadores para retornar nuevos valores computados de atributos existentes:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token comment">/**
* Get the user's full name.
*
* @return string
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">getFullNameAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token double-quoted-string string">&quot;<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">first_name</span><span class="token punctuation">}</span></span> <span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">last_name</span><span class="token punctuation">}</span></span>&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Si deseas que estos valores computados sean agregados a las representaciones de arreglo / JSON de tu modelo, <a href="https://laravel.com/docs/%7B%7Bversion%7D%7D/eloquent-serialization#appending-values-to-json" target="_blank" rel="noopener noreferrer">necesitarás adjuntarlos<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div></div> <p><a name="defining-a-mutator"></a></p> <h3 id="definiendo-un-mutador"><a href="#definiendo-un-mutador" aria-hidden="true" class="header-anchor">#</a> Definiendo un Mutador</h3> <p>Para definir un mutador, define un método <code>setFooAttribute</code> en tu modelo, donde <code>Foo</code> es el nombre de la columna que deseas acceder en el formato Studly Case (Primera letra de cada palabra en mayúscula). Así, otra vez, vamos a definir un mutador para el atributo <code>first_name</code>. Este mutador será ejecutado automáticamente cuando intentamos establecer el valor del atributo <code>first_name</code> en el modelo:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Set the user's first name.
    *
    * @param  string  $value
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">setFirstNameAttribute</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">attributes</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'first_name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strtolower</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>El mutador recibirá el valor que está siendo establecido en el atributo, permitiéndote manipular el valor y establecer el valor manipulado en la propiedad <code>$attributes</code> interna del modelo Eloquent. Así, por ejemplo, si intentamos establecer el atributo <code>first_name</code> como <code>Sally</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> App\<span class="token package">User</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">first_name</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'Sally'</span><span class="token punctuation">;</span>
</code></pre></div><p>En este ejemplo, la función <code>setFirstNameAttribute</code> será ejecutada con el valor <code>Sally</code>. El mutador entonces aplicará la función <code>strtolower</code> al nombre y establecerá su valor resultante en el arreglo <code>$attributes</code> interno.</p> <p><a name="date-mutators"></a></p> <h2 id="mutadores-de-fecha"><a href="#mutadores-de-fecha" aria-hidden="true" class="header-anchor">#</a> Mutadores de Fecha</h2> <p>De forma predeterminada, Eloquent convertirá las columnas <code>created_at</code> y <code>updated_at</code> a instancias de <a href="https://github.com/briannesbitt/Carbon" target="_blank" rel="noopener noreferrer">Carbon<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, la cual extiende la clase <code>DateTime</code> de PHP para proporcionar una variedad de métodos útiles.  Puedes agregar atributos de fecha adicionales estableciendo la propiedad <code>$dates</code> de tu modelo.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * The attributes that should be mutated to dates.
    *
    * @var array
    */</span>
    <span class="token keyword">protected</span> <span class="token variable">$dates</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'seen_at'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Puedes desactivar las marcas de tiempo (timestamps) predeterminadas <code>created_at</code> y<code>updated_at</code> configurando la propiedad pública <code>$timestamps</code> de tu modelo en <code>false</code>.</p></div> <p>Cuando una columna es considerada una fecha, puedes establecer su valor a una marca de tiempo UNIX, cadena de fecha (<code>Y-m-d</code>), cadena fecha-hora o una instancia <code>DateTime</code> / <code>Carbon</code>. El valor de la fecha será convertido y almacenado correctamente en tu base de datos:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> App\<span class="token package">User</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">deleted_at</span> <span class="token operator">=</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Como se apreció anteriormente, al momento de obtener atributos que están listados en tu propiedad <code>$dates</code>, éstos serán automáticamente convertidos a instancias <a href="https://github.com/briannesbitt/Carbon" target="_blank" rel="noopener noreferrer">Carbon<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, permitiendo que uses cualquiera de los métodos de Carbon en tus atributos:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> App\<span class="token package">User</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">deleted_at</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="formatos-de-fecha"><a href="#formatos-de-fecha" aria-hidden="true" class="header-anchor">#</a> Formatos de Fecha</h4> <p>De forma predeterminada, las marcas de tiempo son formateadas como <code>'Y-m-d H:i:s'</code>. Si necesitas personalizar el formato de marca de tiempo, establece la propiedad <code>$dateFormat</code> en tu modelo. Esta propiedad determina como los atributos de fecha son almacenados en la base de datos así como también su formato cuando el modelo es serializado a un arreglo o JSON:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Flight</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * The storage format of the model's date columns.
    *
    * @var string
    */</span>
    <span class="token keyword">protected</span> <span class="token variable">$dateFormat</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'U'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p><a name="attribute-casting"></a></p> <h2 id="conversion-casting-de-atributos"><a href="#conversion-casting-de-atributos" aria-hidden="true" class="header-anchor">#</a> Conversión (casting) de Atributos</h2> <p>La propiedad <code>$casts</code> en tu modelo proporciona un método conveniente de convertir atributos a tipos de datos comunes. La propiedad <code>$casts</code> debería ser un arreglo donde la clave es el nombre del atributo que está siendo convertido y el valor es el tipo al que deseas convertir la columna. Los tipos de conversión soportados son: <code>integer</code>, <code>real</code>, <code>float</code>, <code>double</code>, <code>decimal:&lt;digits&gt;</code>, <code>string</code>, <code>boolean</code>, <code>object</code>, <code>array</code>, <code>collection</code>, <code>date</code>, <code>datetime</code>, and <code>timestamp</code>. Al convertir en <code>decimal</code>, debes definir el número de digitos (<code>decimal:2</code>).</p> <p>Para demostrar la conversión de atributos, vamos a convertir el atributo <code>is_admin</code>, el cual es almacenado en nuestra base de datos como un entero (<code>0</code> o <code>1</code>) a un valor booleano:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * The attributes that should be cast to native types.
    *
    * @var array
    */</span>
    <span class="token keyword">protected</span> <span class="token variable">$casts</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'is_admin'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'boolean'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Ahora el atributo <code>is_admin</code> será siempre convertido a un booleano cuando lo accedas, incluso si el valor subyacente es almacenado en la base de datos como un entero:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> App\<span class="token package">User</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">is_admin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="array-and-json-casting"></a></p> <h3 id="conversion-de-arreglos-y-json"><a href="#conversion-de-arreglos-y-json" aria-hidden="true" class="header-anchor">#</a> Conversión de Arreglos y JSON</h3> <p>El tipo de conversión <code>array</code> es particularmente útil al momento de trabajar con columnas que son almacenadas como JSON serializado. Por ejemplo, si tu base de datos tiene un tipo de campo <code>JSON</code> o <code>TEXT</code> que contiene JSON serializado, agregar la conversión <code>array</code> a ese atributo deserializará automáticamente el atributo a un arreglo PHP cuando lo accedas en tu modelo Eloquent:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * The attributes that should be cast to native types.
    *
    * @var array
    */</span>
    <span class="token keyword">protected</span> <span class="token variable">$casts</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'options'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'array'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Una vez que la conversión es definida, puedes acceder al atributo <code>options</code> y será automáticamente deserializado desde JSON a un arreglo PHP. Cuando establezcas el valor del atributo <code>options</code>, el arreglo dado será automáticamente serializado de vuelta en JSON para almacenamiento:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> App\<span class="token package">User</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$options</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">options</span><span class="token punctuation">;</span>

<span class="token variable">$options</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">;</span>

<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">options</span> <span class="token operator">=</span> <span class="token variable">$options</span><span class="token punctuation">;</span>

<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="date-casting"></a></p> <h3 id="conversion-de-fechas"><a href="#conversion-de-fechas" aria-hidden="true" class="header-anchor">#</a> Conversión de fechas</h3> <p>Al usar el tipo de conversión <code>date</code> o<code>datetime</code>, puedes especificar el formato de la fecha. Este formato se utilizará cuando el <a href="/docs/%7B%7Bversion%7D%7D/eloquent-serialization">modelo se serializa a un arreglo o JSON</a>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* The attributes that should be cast to native types.
*
* @var array
*/</span>
<span class="token keyword">protected</span> <span class="token variable">$casts</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'created_at'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'datetime:Y-m-d'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/eloquent-collections.html" class="prev">
          Eloquent: Colecciones
        </a></span> <span class="next"><a href="/eloquent-serialization.html">
          Eloquent: Serialización
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.7a95d043.js" defer></script><script src="/assets/js/28.6731c588.js" defer></script>
  </body>
</html>
