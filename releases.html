<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Notas de Lanzamiento</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.cf5cbaa5.css" as="style"><link rel="preload" href="/assets/js/app.d18a7e07.js" as="script"><link rel="preload" href="/assets/js/2.8e5ca9eb.js" as="script"><link rel="preload" href="/assets/js/63.98a36806.js" as="script"><link rel="prefetch" href="/assets/js/10.9d8f190d.js"><link rel="prefetch" href="/assets/js/11.713069e3.js"><link rel="prefetch" href="/assets/js/12.8798d21a.js"><link rel="prefetch" href="/assets/js/13.332045e2.js"><link rel="prefetch" href="/assets/js/14.bda55a54.js"><link rel="prefetch" href="/assets/js/15.1c16c325.js"><link rel="prefetch" href="/assets/js/16.bbe1ecdf.js"><link rel="prefetch" href="/assets/js/17.068bc26e.js"><link rel="prefetch" href="/assets/js/18.d6a2ed70.js"><link rel="prefetch" href="/assets/js/19.9bbd4323.js"><link rel="prefetch" href="/assets/js/20.4a827d15.js"><link rel="prefetch" href="/assets/js/21.932f5ef3.js"><link rel="prefetch" href="/assets/js/22.47d672e1.js"><link rel="prefetch" href="/assets/js/23.63218e36.js"><link rel="prefetch" href="/assets/js/24.2c933036.js"><link rel="prefetch" href="/assets/js/25.2a9ac4af.js"><link rel="prefetch" href="/assets/js/26.b15e2a59.js"><link rel="prefetch" href="/assets/js/27.be0ff65a.js"><link rel="prefetch" href="/assets/js/28.aadf08f5.js"><link rel="prefetch" href="/assets/js/29.0e4ec215.js"><link rel="prefetch" href="/assets/js/3.0101ea7c.js"><link rel="prefetch" href="/assets/js/30.831305bd.js"><link rel="prefetch" href="/assets/js/31.afb33274.js"><link rel="prefetch" href="/assets/js/32.68089cf5.js"><link rel="prefetch" href="/assets/js/33.f7ed913e.js"><link rel="prefetch" href="/assets/js/34.4cddf81d.js"><link rel="prefetch" href="/assets/js/35.afbc7954.js"><link rel="prefetch" href="/assets/js/36.bc235e6d.js"><link rel="prefetch" href="/assets/js/37.cec3e2cc.js"><link rel="prefetch" href="/assets/js/38.177ed69f.js"><link rel="prefetch" href="/assets/js/39.e7e298ee.js"><link rel="prefetch" href="/assets/js/4.a2109108.js"><link rel="prefetch" href="/assets/js/40.f621f4d5.js"><link rel="prefetch" href="/assets/js/41.0994bd46.js"><link rel="prefetch" href="/assets/js/42.4debbf07.js"><link rel="prefetch" href="/assets/js/43.d73341a8.js"><link rel="prefetch" href="/assets/js/44.302a1d16.js"><link rel="prefetch" href="/assets/js/45.df1e9e80.js"><link rel="prefetch" href="/assets/js/46.5da4e78a.js"><link rel="prefetch" href="/assets/js/47.af4aeb70.js"><link rel="prefetch" href="/assets/js/48.1c6cac1a.js"><link rel="prefetch" href="/assets/js/49.73c1cc2c.js"><link rel="prefetch" href="/assets/js/5.886a8536.js"><link rel="prefetch" href="/assets/js/50.3653355c.js"><link rel="prefetch" href="/assets/js/51.f48454e2.js"><link rel="prefetch" href="/assets/js/52.fe1537a5.js"><link rel="prefetch" href="/assets/js/53.f53a4944.js"><link rel="prefetch" href="/assets/js/54.77ad79c0.js"><link rel="prefetch" href="/assets/js/55.a7dce0c8.js"><link rel="prefetch" href="/assets/js/56.2a61f71d.js"><link rel="prefetch" href="/assets/js/57.f958f8cd.js"><link rel="prefetch" href="/assets/js/58.c91cb9c9.js"><link rel="prefetch" href="/assets/js/59.726c9fa1.js"><link rel="prefetch" href="/assets/js/6.f7c00904.js"><link rel="prefetch" href="/assets/js/60.3f31de0a.js"><link rel="prefetch" href="/assets/js/61.7ad03400.js"><link rel="prefetch" href="/assets/js/62.7d96c317.js"><link rel="prefetch" href="/assets/js/64.e0445065.js"><link rel="prefetch" href="/assets/js/65.1d583bc8.js"><link rel="prefetch" href="/assets/js/66.1ca08e1b.js"><link rel="prefetch" href="/assets/js/67.a6af6188.js"><link rel="prefetch" href="/assets/js/68.47b5f882.js"><link rel="prefetch" href="/assets/js/69.215666c5.js"><link rel="prefetch" href="/assets/js/7.9e06b9d3.js"><link rel="prefetch" href="/assets/js/70.2c9f04a2.js"><link rel="prefetch" href="/assets/js/71.1eb0d68f.js"><link rel="prefetch" href="/assets/js/72.28241988.js"><link rel="prefetch" href="/assets/js/73.fc04168a.js"><link rel="prefetch" href="/assets/js/74.3d242ebf.js"><link rel="prefetch" href="/assets/js/75.3cda21e9.js"><link rel="prefetch" href="/assets/js/76.785cfa56.js"><link rel="prefetch" href="/assets/js/77.25a3cfe2.js"><link rel="prefetch" href="/assets/js/78.a8f98b1a.js"><link rel="prefetch" href="/assets/js/79.c51ea229.js"><link rel="prefetch" href="/assets/js/8.f19546fb.js"><link rel="prefetch" href="/assets/js/80.21189343.js"><link rel="prefetch" href="/assets/js/9.e056c469.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cf5cbaa5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="notas-de-lanzamiento"><a href="#notas-de-lanzamiento" class="header-anchor">#</a> Notas de Lanzamiento</h1> <ul><li><a href="#versioning-scheme">Esquema de versiones</a></li> <li><a href="#support-policy">Política de soporte</a></li> <li><a href="#laravel-6">Laravel 6</a></li></ul> <p><a name="versioning-scheme"></a></p> <h2 id="esquema-de-versiones"><a href="#esquema-de-versiones" class="header-anchor">#</a> Esquema de versiones</h2> <p>Laravel y sus otros paquetes de primeros (paquetes desarrollados por una propia compañía) siguen <a href="https://semver.org" target="_blank" rel="noopener noreferrer">el versionamiento semántico<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Los principales lanzamientos del framework son realizados cada seis meses (Febrero y Agosto), mientras que los menores y los parches pueden ser realizados tan frecuente como cada semana. Los lanzamientos de versiones menores y los parches <strong>nunca</strong> deberían contener cambios que causen que otros componentes fallen (breaking changes).</p> <p>Cuando haces referencia al framework Laravel o sus componentes desde tu aplicación o paquete, debes utilizar siempre una restricción de versión como <code>^6.0</code>, ya que las versiones mayores de Laravel incluyen &quot;breaking changes&quot;. Sin embargo, nos esforzamos por asegurarnos siempre de que puedas actualizar a una nueva versión mayor en un día o menos.</p> <p><a name="support-policy"></a></p> <h2 id="politica-de-soporte"><a href="#politica-de-soporte" class="header-anchor">#</a> Política de soporte</h2> <p>Para las versiones LTS, como Laravel 6, se proporcionan correcciones de errores durante 2 años y correcciones de seguridad por 3 años. Estas versiones proporcionan la ventana más larga de soporte y mantenimiento. Para las versiones generales, las correcciones de errores se proporcionan durante 6 meses y las correcciones de seguridad durante 1 año. Para todas las librerías adicionales, incluyendo Lumen, solo la última versión recibe correcciones de error. Adicionalmente, por favor revisa las versiones de bases de datos <a href="/database.html#introduction">soportadas por Laravel</a>.</p> <table><thead><tr><th>Versión</th> <th>Lanzamiento</th> <th>Corrección de errores hasta</th> <th>Correcciones de seguridad hasta</th></tr></thead> <tbody><tr><td>5.5 (LTS)</td> <td>30 de Agosto, 2017</td> <td>30 de Agosto, 2019</td> <td>30 de Agosto, 2020</td></tr> <tr><td>5.6</td> <td>7 de Febrero, 2018</td> <td>7 de Agosto, 2018</td> <td>7 de Febrero, 2019</td></tr> <tr><td>5.7</td> <td>4 de Septiembre, 2018</td> <td>4 de Marzo, 2019</td> <td>4 de Septiembre, 2019</td></tr> <tr><td>5.8</td> <td>26 de Febrero, 2019</td> <td>26 de Agosto, 2019</td> <td>26 de Febrero, 2020</td></tr> <tr><td>6 (LTS)</td> <td>3 de Septiembre, 2019</td> <td>3 de Septiembre, 2021</td> <td>3 de Septiembre, 2022</td></tr></tbody></table> <p><a name="laravel-6"></a></p> <h2 id="laravel-6"><a href="#laravel-6" class="header-anchor">#</a> Laravel 6</h2> <p>Laravel 6 (LTS) continúa las mejoras hechas en Laravel 5.8 con la introducción del versionamiento semántico, la compatibilidad con <a href="https://vapor.laravel.com" target="_blank" rel="noopener noreferrer">Laravel Vapor<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, las respuestas de autorización mejoradas, el middleware job o de trabajos, las colecciones lazy o diferidas, las mejoras de subquery o subconsulta, la extracción de la estructura de frontend al paquete de Composer <code>laravel/ui</code>, y una variedad de correcciones de error y mejoras de usabilidad.</p> <h3 id="versionamiento-semantico"><a href="#versionamiento-semantico" class="header-anchor">#</a> Versionamiento semántico</h3> <p>El paquete (<code>laravel/framework</code>) del framework Laravel ahora sigue el <a href="https://semver.org/" target="_blank" rel="noopener noreferrer">versionamiento semántico<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> estándar. Esto hace consistente al framework con los otros paquetes de primeros de Laravel que ya siguen éste versionamiento estándar. El ciclo de lanzamiento de Laravel permanecerá sin cambio.</p> <h3 id="laravel-vapor-compatibility"><a href="#laravel-vapor-compatibility" class="header-anchor">#</a> Laravel Vapor Compatibility</h3> <p><em>Laravel Vapor fue construido por <a href="https://github.com/taylorotwell" target="_blank" rel="noopener noreferrer">Taylor Otwell<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></em>.</p> <p>Laravel 6 proporciona compatibilidad con <a href="https://vapor.laravel.com" target="_blank" rel="noopener noreferrer">Laravel Vapor<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, una plataforma de despliegue sin servidor para auto-escalar. Vapor abstrae la complejidad del manejo de aplicaciones de Laravel sobre Lambda AWS, al tiempo que provee una interfaz de esas aplicaciones con las colas SQS, las bases de datos, clusters de Redis, redes, CDN CloudFront, y más.</p> <h3 id="excepciones-mejoradas-por-medio-de-ignition"><a href="#excepciones-mejoradas-por-medio-de-ignition" class="header-anchor">#</a> Excepciones mejoradas por medio de Ignition</h3> <p>Laravel 6 viene con <a href="https://github.com/facade/ignition" target="_blank" rel="noopener noreferrer">Ignition<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, una nueva página hecha en código abierto para mostrar el detalle de las excepciones de error por Freek Van der Herten y Marcel Pociot. Ignition ofrece muchos beneficios sobre las versiones anteriores, tales como el manejo mejorado del archivo de error de Blade y el número de línea, soluciones &quot;runnables&quot; (aquellas que implementan una interfaz con el método run() para su ejecución independiente) para problemas comunes, edición de código, compartimiento de excepciones, y una UX mejorada.</p> <h3 id="respuestas-de-autorizacion-mejoradas"><a href="#respuestas-de-autorizacion-mejoradas" class="header-anchor">#</a> Respuestas de autorización mejoradas</h3> <p><em>Las respuestas de autorización mejoradas fueron implementadas por <a href="https://github.com/garygreen" target="_blank" rel="noopener noreferrer">Gary Green<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></em>.</p> <p>En las versiones previas de Laravel, era difícil buscar y mostrar los mensajes de autorización personalizados a los usuarios finales. Esto hizo que fuera difícil explicar exactamente a los usuarios finales el porqué una solicitud era denegada. En Laravel 6, esto es ahora mucho más fácil usando los mensajes de respuesta de autorización y el nuevo método <code>Gate::inspect</code>. Por ejemplo, dado el siguiente método de política:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
 * Determine if the user can view the given flight.
 *
 * @param  \App\User  $user
 * @param  \App\Flight  $flight
 * @return mixed
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">view</span><span class="token punctuation">(</span>User <span class="token variable">$user</span><span class="token punctuation">,</span> Flight <span class="token variable">$flight</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">deny</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Explanation of denial.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>La respuesta y el mensaje de la política de autorización pueden ser consultados usando el método <code>Gate::inspect</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span> <span class="token operator">=</span> Gate<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">inspect</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'view'</span><span class="token punctuation">,</span> <span class="token variable">$flight</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">allowed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// User is authorized to view the flight...</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">denied</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Adicionalmente, estos mensajes personalizados serán automáticamente devueltos a tu frontend al momento de usar los métodos helper tales como <code>$this-&gt;authorize</code> o <code>Gate::authorize</code> de tus rutas o controladores.</p> <h3 id="los-middleware-job"><a href="#los-middleware-job" class="header-anchor">#</a> Los Middleware job</h3> <p><em>Los middleware job fueron implementados por <a href="https://github.com/taylorotwell" target="_blank" rel="noopener noreferrer">Taylor Otwell<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></em>.</p> <p>Los middleware job permiten que envuelvas la lógica personalizada que rodea la ejecución de los trabajos en colas, al reducir las plantillas de código en los trabajos mismos. Por ejemplo, en las versiones previas de Laravel, puedes haber encerrado la lógica del método <code>handle</code> de un trabajo dentro de una función de retorno o callback para límite de tráfico:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
 * Execute the job.
 *
 * @return void
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Redis<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">throttle</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">allow</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">info</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Lock obtained...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Handle job...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Could not obtain lock...</span>

        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>En Laravel 6, ésta lógica puede ser extraída hacia un middleware de trabajo, permitiéndote que mantengas el método <code>handle</code> de tu trabajo libre de cualquiera de las responsabilidades de límite de tráfico:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Jobs<span class="token punctuation">\</span>Middleware</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Redis</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">RateLimited</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Process the queued job.
     *
     * @param  mixed  $job
     * @param  callable  $next
     * @return mixed
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token variable">$job</span><span class="token punctuation">,</span> <span class="token variable">$next</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Redis<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">throttle</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">allow</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token variable">$job</span><span class="token punctuation">,</span> <span class="token variable">$next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// Lock obtained...</span>

                    <span class="token variable">$next</span><span class="token punctuation">(</span><span class="token variable">$job</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token variable">$job</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// Could not obtain lock...</span>

                    <span class="token variable">$job</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Después de crear los middleware, pueden ser adjuntados a un trabajo al retornarlos desde el método <code>middleware</code> del trabajo:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Jobs<span class="token punctuation">\</span>Middleware<span class="token punctuation">\</span>RateLimited</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Get the middleware the job should pass through.
 *
 * @return array
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">middleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">RateLimited</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="colecciones-diferidas"><a href="#colecciones-diferidas" class="header-anchor">#</a> Colecciones diferidas</h3> <p><em>Las colecciones diferidas o lazy fueron implementadas por <a href="https://github.com/JosephSilber" target="_blank" rel="noopener noreferrer">Joseph Silber<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></em>.</p> <p>Muchos desarrolladores ya disfrutan de los poderosos <a href="/collections.html">métodos de las Colecciones</a>. Para complementar la ya poderosa clase <code>Collection</code>, Laravel 6 introduce una <code>LazyCollection</code>, que hace uso de los <a href="https://www.php.net/manual/en/language.generators.overview.php" target="_blank" rel="noopener noreferrer">generadores<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> de PHP para permitir que trabajes con conjunto de datos muy grandes mientras mantiene el uso de memoria bajo.</p> <p>Por ejemplo, imagina que tu aplicación necesita procesar un archivo log de muchos gigabytes mientras toma ventaja de los métodos de la colección de Laravel para analizar los logs. En lugar de leer el archivo completo desde memoria de una sola vez, las colecciones diferidas pueden ser usadas para mantener solamente una pequeña parte del archivo en memoria en un momento determinado:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>LogEntry</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>LazyCollection</span><span class="token punctuation">;</span>

LazyCollection<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$handle</span> <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'log.txt'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'r'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token variable">$line</span> <span class="token operator">=</span> <span class="token function">fgets</span><span class="token punctuation">(</span><span class="token variable">$handle</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">yield</span> <span class="token variable">$line</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">chunk</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$lines</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> LogEntry<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">fromLines</span><span class="token punctuation">(</span><span class="token variable">$lines</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>LogEntry <span class="token variable">$logEntry</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Process the log entry...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>O, imagina que necesitas recorrer 10.000 modelos de Eloquent. Al momento de usar las colecciones de Laravel tradicionales, la totalidad de modelos de Eloquent debe ser cargada en memoria al mismo tiempo:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$users</span> <span class="token operator">=</span> App\<span class="token package">User</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">id</span> <span class="token operator">&gt;</span> <span class="token number">500</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Sin embargo, a partir de Laravel 6, el método <code>cursor</code> del constructor de consultas ha sido actualizado para devolver una instancia de <code>LazyCollection</code>. Esto permite que ejecutes todavía solamente una única consulta contra la base de datos sino que también sólo mantiene un modelo de Eloquent cargado en memoria al mismo tiempo. En este ejemplo, la función de retorno (callback) <code>filter</code> no es ejecutada hasta que realmente iteremos sobre cada usuario individualmente, permitiendo una reducción drástica del uso de memoria:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$users</span> <span class="token operator">=</span> App\<span class="token package">User</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">cursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">id</span> <span class="token operator">&gt;</span> <span class="token number">500</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$users</span> <span class="token keyword">as</span> <span class="token variable">$user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">id</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="realces-de-subconsulta-de-eloquent"><a href="#realces-de-subconsulta-de-eloquent" class="header-anchor">#</a> Realces de subconsulta de Eloquent</h3> <p><em>Los realces de subconsulta de Eloquent fueron implementados por <a href="https://github.com/reinink" target="_blank" rel="noopener noreferrer">Jonathan Reinink<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></em>.</p> <p>Laravel 6 introduce varios realces y mejoras nuevos para dar soporte a la subconsulta de base de datos. Por ejemplo, vamos a imaginar que tenemos una tabla de destinos de vuelos <code>destinations</code> y una tabla de vuelos <code>flights</code> a los destinos. La tabla <code>flights</code> contiene una columna <code>arrived_at</code> que indica cuando el vuelo llega al destino.</p> <p>Usando la nueva funcionalidad select para subconsulta de Laravel 6, podemos seleccionar todos los campos en <code>destinations</code> y el nombre del vuelo que llegó más recientemente a cada destino haciendo una sola consulta:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> Destination<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">addSelect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'last_flight'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Flight<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">whereColumn</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'destination_id'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'destinations.id'</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'arrived_at'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'desc'</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Adicionalmente, podemos usar las nuevas características de subconsulta agregadas a la función <code>orderBy</code> del constructor de consulta para ordenar todos los destinos dependiendo del último vuelo que llegue a cada destino. Una vez más, esto puede ser hecho haciendo una única consulta contra la base de datos:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> Destination<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">orderByDesc</span><span class="token punctuation">(</span>
    Flight<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'arrived_at'</span><span class="token punctuation">)</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">whereColumn</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'destination_id'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'destinations.id'</span><span class="token punctuation">)</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'arrived_at'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'desc'</span><span class="token punctuation">)</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ui-de-laravel"><a href="#ui-de-laravel" class="header-anchor">#</a> UI de Laravel</h3> <p>La estructura del frontend proporcionada típicamente con las versiones previas de Laravel han sido extraídas al paquete de Composer <code>laravel/ui</code>. Esto permite que la estructura UI del socio o &quot;first-party&quot; sea desarrollada y versionada separadamente del framework primario. Como resultado de este cambio, ningún código de Bootstrap o Vue está presente en la estructura del framework de forma predeterminada, y el comando <code>make:auth</code> ha sido extraído del framework también.</p> <p>Con el propósito de restaurar la estructura de Vue / Bootstrap presente en las versiones previas de Laravel, puedes instalar el paquete <code>laravel/ui</code> y usar el comando Artisan <code>ui</code> para instalar la estructura de frontend:</p> <div class="language-php extra-class"><pre class="language-php"><code>composer <span class="token keyword">require</span> laravel<span class="token operator">/</span>ui <span class="token double-quoted-string string">&quot;^1.0&quot;</span> <span class="token operator">--</span>dev

php artisan ui vue <span class="token operator">--</span>auth
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d18a7e07.js" defer></script><script src="/assets/js/2.8e5ca9eb.js" defer></script><script src="/assets/js/63.98a36806.js" defer></script>
  </body>
</html>
