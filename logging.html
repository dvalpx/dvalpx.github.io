<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VuePress</title>
    <meta name="generator" content="VuePress 1.8.1">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.f7a12d87.css" as="style"><link rel="preload" href="/assets/js/app.92aaed9e.js" as="script"><link rel="preload" href="/assets/js/2.648c6578.js" as="script"><link rel="preload" href="/assets/js/48.457d9287.js" as="script"><link rel="prefetch" href="/assets/js/10.1713bb95.js"><link rel="prefetch" href="/assets/js/11.f0ca56a6.js"><link rel="prefetch" href="/assets/js/12.5865c9a5.js"><link rel="prefetch" href="/assets/js/13.8e509b37.js"><link rel="prefetch" href="/assets/js/14.2d9f5c97.js"><link rel="prefetch" href="/assets/js/15.b917edb6.js"><link rel="prefetch" href="/assets/js/16.a13d2a39.js"><link rel="prefetch" href="/assets/js/17.d6b71ec0.js"><link rel="prefetch" href="/assets/js/18.adbe50b4.js"><link rel="prefetch" href="/assets/js/19.a1638529.js"><link rel="prefetch" href="/assets/js/20.393f35ab.js"><link rel="prefetch" href="/assets/js/21.a9dd9148.js"><link rel="prefetch" href="/assets/js/22.087385e4.js"><link rel="prefetch" href="/assets/js/23.b6ce1d9c.js"><link rel="prefetch" href="/assets/js/24.a74b28c6.js"><link rel="prefetch" href="/assets/js/25.7a984c35.js"><link rel="prefetch" href="/assets/js/26.cf45c453.js"><link rel="prefetch" href="/assets/js/27.e36a56dc.js"><link rel="prefetch" href="/assets/js/28.358fc226.js"><link rel="prefetch" href="/assets/js/29.f4fd2139.js"><link rel="prefetch" href="/assets/js/3.40d230a8.js"><link rel="prefetch" href="/assets/js/30.564d0795.js"><link rel="prefetch" href="/assets/js/31.0691b4c8.js"><link rel="prefetch" href="/assets/js/32.088de00e.js"><link rel="prefetch" href="/assets/js/33.4d884bb7.js"><link rel="prefetch" href="/assets/js/34.c4be32cd.js"><link rel="prefetch" href="/assets/js/35.b78c77b2.js"><link rel="prefetch" href="/assets/js/36.ceed3144.js"><link rel="prefetch" href="/assets/js/37.f9d6aca2.js"><link rel="prefetch" href="/assets/js/38.67ad3e03.js"><link rel="prefetch" href="/assets/js/39.5e3e70a7.js"><link rel="prefetch" href="/assets/js/4.e81ef12f.js"><link rel="prefetch" href="/assets/js/40.0510efa5.js"><link rel="prefetch" href="/assets/js/41.4e2bcf98.js"><link rel="prefetch" href="/assets/js/42.ebc7d9c8.js"><link rel="prefetch" href="/assets/js/43.e5970289.js"><link rel="prefetch" href="/assets/js/44.f91a9970.js"><link rel="prefetch" href="/assets/js/45.5cda67e6.js"><link rel="prefetch" href="/assets/js/46.037dce36.js"><link rel="prefetch" href="/assets/js/47.fadd0db4.js"><link rel="prefetch" href="/assets/js/49.da492613.js"><link rel="prefetch" href="/assets/js/5.dc790133.js"><link rel="prefetch" href="/assets/js/50.cab6e13d.js"><link rel="prefetch" href="/assets/js/51.0765def4.js"><link rel="prefetch" href="/assets/js/52.518165a7.js"><link rel="prefetch" href="/assets/js/53.1e887b4a.js"><link rel="prefetch" href="/assets/js/54.bc10b491.js"><link rel="prefetch" href="/assets/js/55.2e54a7e8.js"><link rel="prefetch" href="/assets/js/56.169c81e5.js"><link rel="prefetch" href="/assets/js/57.a4ef4ed1.js"><link rel="prefetch" href="/assets/js/58.78dc0897.js"><link rel="prefetch" href="/assets/js/59.f13515c7.js"><link rel="prefetch" href="/assets/js/6.de2c94ff.js"><link rel="prefetch" href="/assets/js/60.ebfdeb63.js"><link rel="prefetch" href="/assets/js/61.6523e015.js"><link rel="prefetch" href="/assets/js/62.cb19c9bd.js"><link rel="prefetch" href="/assets/js/63.6ae10337.js"><link rel="prefetch" href="/assets/js/64.50298a81.js"><link rel="prefetch" href="/assets/js/65.d1849c5b.js"><link rel="prefetch" href="/assets/js/66.caef6860.js"><link rel="prefetch" href="/assets/js/67.a2788988.js"><link rel="prefetch" href="/assets/js/68.1c43eae0.js"><link rel="prefetch" href="/assets/js/69.e16965c5.js"><link rel="prefetch" href="/assets/js/7.0466c7e3.js"><link rel="prefetch" href="/assets/js/70.e66fe735.js"><link rel="prefetch" href="/assets/js/71.6d49148f.js"><link rel="prefetch" href="/assets/js/72.c3d54f60.js"><link rel="prefetch" href="/assets/js/73.a2d3ebc6.js"><link rel="prefetch" href="/assets/js/74.f1ed7f47.js"><link rel="prefetch" href="/assets/js/75.5dd47c5c.js"><link rel="prefetch" href="/assets/js/76.634dc6b8.js"><link rel="prefetch" href="/assets/js/77.db030077.js"><link rel="prefetch" href="/assets/js/78.ef9b3a22.js"><link rel="prefetch" href="/assets/js/79.a9b05b84.js"><link rel="prefetch" href="/assets/js/8.0435cf5c.js"><link rel="prefetch" href="/assets/js/80.88069fe6.js"><link rel="prefetch" href="/assets/js/9.427a2f55.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f7a12d87.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><div><h1 id="registro-logging"><a class="header-anchor" href="#registro-logging">#</a> Registro (Logging)</h1> <ul><li><a href="#introduction">Introducción</a></li> <li><a href="#configuration">Configuración</a> <ul><li><a href="#building-log-stacks">Construyendo stacks de registros</a></li></ul></li> <li><a href="#writing-log-messages">Escribiendo mensajes de registro</a> <ul><li><a href="#writing-to-specific-channels">Escribiendo a canales específicos</a></li></ul></li> <li><a href="#advanced-monolog-channel-customization">Personalización avanzada del canal Monolog</a> <ul><li><a href="#customizing-monolog-for-channels">Personalizando Monolog para canales</a></li> <li><a href="#creating-monolog-handler-channels">Creando canales de manejador para Monolog</a></li> <li><a href="#creating-channels-via-factories">Creando canales mediante factories</a></li></ul></li></ul> <p><a name="introduction"></a></p> <h2 id="introduccion"><a class="header-anchor" href="#introduccion">#</a> Introducción</h2> <p>Para ayudarte a aprender más acerca de lo que está sucediendo dentro de tu aplicación, Laravel proporciona un robusto servicio de registro que te permite registrar mensajes en archivos, en el registro de errores del sistema e incluso en Slack para notificar a todo tu equipo.</p> <p>De forma interna, Laravel usa la biblioteca <a href="https://github.com/Seldaek/monolog" target="_blank" rel="noopener noreferrer">Monolog<OutboundLink></OutboundLink></a>, que proporciona soporte para una variedad de poderosos manejadores de registros. Laravel hace que sea pan comido configurar dichos manejadores, permitiéndote mezclarlos y juntarlos para personalizar el manejo de registros en tu aplicación.</p> <p><a name="configuration"></a></p> <h2 id="configuracion"><a class="header-anchor" href="#configuracion">#</a> Configuración</h2> <p>Toda la configuración para el sistema de registros de tu aplicación se encuentra en el archivo de configuración <code>config/logging.php</code>. Este archivo te permite configurar los canales de registros de tu aplicación, así que asegúrate de revisar cada uno de los canales disponibles y sus opciones. Revisaremos algunas opciones comunes a continuación.</p> <p>Por defecto, Laravel usará el canal <code>stack</code> al registrar mensajes. El canal <code>stack</code> es usado para agregar múltiples canales de registros en un solo canal. Para más información sobre la construcción de stacks, revisa la <a href="#building-log-stacks">documentación debajo</a>.</p> <h4 id="configurando-el-nombre-del-canal"><a class="header-anchor" href="#configurando-el-nombre-del-canal">#</a> Configurando el nombre del canal</h4> <p>Por defecto, Monolog es instanciado con un &quot;nombre de canal&quot; que concuerda con el entorno actual, como <code>production</code> o <code>local</code>. Para cambiar este valor, agrega una opción <code>name</code> a la configuración de tu canal:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token string single-quoted-string">'stack'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'driver'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'stack'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'channel-name'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'channels'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'single'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'slack'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="drivers-de-canales-disponibles"><a class="header-anchor" href="#drivers-de-canales-disponibles">#</a> Drivers de canales disponibles</h4> <table><thead><tr><th>Nombre</th> <th>Descripción</th></tr></thead> <tbody><tr><td><code>stack</code></td> <td>Wrapper para facilitar la creación de canales &quot;multi-canales&quot;</td></tr> <tr><td><code>single</code></td> <td>Canal de registro de un sólo archivo o ubicación (<code>StreamHandler</code>)</td></tr> <tr><td><code>daily</code></td> <td>Driver de Monolog basado en <code>RotatingFileHandler</code> que rota diariamente</td></tr> <tr><td><code>slack</code></td> <td>Driver de Monolog basado en <code>SlackWebhookHandler</code></td></tr> <tr><td><code>papertrail</code></td> <td>Driver de Monolog basado en  <code>SyslogUdpHandler</code></td></tr> <tr><td><code>syslog</code></td> <td>Driver de Monolog basado en <code>SyslogHandler</code></td></tr> <tr><td><code>errorlog</code></td> <td>Driver de Monolog basado en <code>ErrorLogHandler</code></td></tr> <tr><td><code>monolog</code></td> <td>Driver factory de Monolog que puede usar cualquier manejador de Monolog soportado</td></tr> <tr><td><code>custom</code></td> <td>Driver que llama a un factory especificado para crear un canal</td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Consulta la documentación sobre <a href="#advanced-monolog-channel-customization">personalización avanzada de canales</a> para aprender más sobre <code>monolog</code> y drivers <code>personalizados</code>.</p></div></div><h4 id="configuracion-de-los-canales-single-y-daily"><a href="#configuracion-de-los-canales-single-y-daily" class="header-anchor">#</a> Configuración de los canales single y daily</h4> <p>Los canales <code>single</code> y <code>daily</code> tienen tres opciones de configuración opcionales: <code>bubble</code>, <code>permission</code> y <code>locking</code>.</p> <table><thead><tr><th>Nombre</th> <th>Descripción</th> <th>Default</th></tr></thead> <tbody><tr><td><code>bubble</code></td> <td>Indica si los mensajes deberían llegar a otros canales después de ser manejados</td> <td><code>true</code></td></tr> <tr><td><code>permission</code></td> <td>Los permisos del archivo de registro</td> <td><code>0644</code></td></tr> <tr><td><code>locking</code></td> <td>Intenta bloquear el archivo de registro antes de escribirlo</td> <td><code>false</code></td></tr></tbody></table> <h4 id="configurando-el-canal-de-papertrail"><a href="#configurando-el-canal-de-papertrail" class="header-anchor">#</a> Configurando el canal de papertrail</h4> <p>El canal <code>papertrail</code> requiere de las opciones de configuración <code>url</code> y <code>port</code>. Puedes obtener estos valores desde <a href="https://help.papertrailapp.com/kb/configuration/configuring-centralized-logging-from-php-apps/#send-events-from-php-app" target="_blank" rel="noopener noreferrer">Papertrail<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h4 id="configurando-el-canal-de-slack"><a href="#configurando-el-canal-de-slack" class="header-anchor">#</a> Configurando el canal de Slack</h4> <p>El canal <code>slack</code> requiere una opción de configuración <code>url</code>. Esta URL debe coincidir con una URL de un <a href="https://slack.com/apps/A0F7XDUAZ-incoming-webhooks" target="_blank" rel="noopener noreferrer">webhook entrante<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> que hayas configurado para tu equipo de Slack. Por defecto, Slack sólo recibirá registros en el nivel <code>critical</code> y superior; sin embargo, puedes ajustar esto en tu archivo de configuración <code>logging</code>.</p> <p><a name="building-log-stacks"></a></p> <h3 id="construyendo-stacks-de-registros"><a href="#construyendo-stacks-de-registros" class="header-anchor">#</a> Construyendo stacks de registros</h3> <p>Como mencionamos anteriormente, el driver <code>stack</code> permite que combines múltiples canales en un sólo canal de registro. Para ilustrar cómo usar stacks de registros, vamos a dar un vistazo a un ejemplo de configuración que podrías ver en una aplicación en producción:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token string single-quoted-string">'channels'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'stack'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'driver'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'stack'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'channels'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'syslog'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'slack'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token string single-quoted-string">'syslog'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'driver'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'syslog'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'level'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'debug'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token string single-quoted-string">'slack'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'driver'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'slack'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'url'</span> <span class="token operator">=&gt;</span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'LOG_SLACK_WEBHOOK_URL'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'username'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Laravel Log'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'emoji'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">':boom:'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'level'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'critical'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Vamos a examinar esta configuración. Primero, observa que nuestro canal <code>stack</code> agrega dos canales más mediante su opción <code>channels</code>: <code>syslog</code> y <code>slack</code>. Entonces, al registrar mensajes, ambos canales tendrán la oportunidad de registrar el mensaje.</p> <h4 id="niveles-de-registro"><a href="#niveles-de-registro" class="header-anchor">#</a> Niveles de registro</h4> <p>Observa la opción de configuración <code>level</code> presente en la configuración de los canales <code>syslog</code> y <code>slack</code> en el ejemplo anterior. Esta opción determina el &quot;nivel&quot; mínimo que un mensaje debe tener para poder ser registrado por el canal. Monolog, que hace funcionar los servicios de registros de Laravel, ofrece todos los niveles de registro definidos en la <a href="https://tools.ietf.org/html/rfc5424" target="_blank" rel="noopener noreferrer">especificación RFC 5424<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: <strong>emergency</strong>, <strong>alert</strong>, <strong>critical</strong>, <strong>error</strong>, <strong>warning</strong>, <strong>notice</strong>, <strong>info</strong> y <strong>debug</strong>.</p> <p>Así que, imagina que registramos un mensaje usando el método <code>debug</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Log</span><span class="token operator">::</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'An informational message.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Dada nuestra configuración, el canal <code>syslog</code> escribirá el mensaje al registro del sistema; sin embargo, dado que el mensaje de error no es <code>critical</code> o superior, no será enviado a Slack. Sin embargo, si registramos un mensaje <code>emergency</code>, será enviado tanto al registro del sistema como a Slack dado que el nivel <code>emergency</code> está por encima de nuestro umbral mínimo para ambos canales:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Log</span><span class="token operator">::</span><span class="token function">emergency</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'The system is down!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="writing-log-messages"></a></p> <h2 id="escribiendo-mensajes-de-error"><a href="#escribiendo-mensajes-de-error" class="header-anchor">#</a> Escribiendo mensajes de error</h2> <p>Puedes escribir información en los registros usando el <a href="/facades.html">facade</a> <code>Log</code>. Como mencionamos anteriormente, el registrador proporciona los ocho niveles de registro definidos en la <a href="https://tools.ietf.org/html/rfc5424" target="_blank" rel="noopener noreferrer">especificación RFC 5424<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: <strong>emergency</strong>, <strong>alert</strong>, <strong>critical</strong>, <strong>error</strong>, <strong>warning</strong>, <strong>notice</strong>, <strong>info</strong> y <strong>debug</strong>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Log</span><span class="token operator">::</span><span class="token function">emergency</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Log</span><span class="token operator">::</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Log</span><span class="token operator">::</span><span class="token function">critical</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Log</span><span class="token operator">::</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Log</span><span class="token operator">::</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Log</span><span class="token operator">::</span><span class="token function">notice</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Log</span><span class="token operator">::</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Log</span><span class="token operator">::</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Así que, podrías llamar a cualquiera de esos métodos para registrar un mensaje para el nivel correspondiente. Por defecto, el mensaje será escrito al canal de registro predeterminado tal y como está configurado en tu archivo de configuración <code>config/logging.php</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>Controller</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Log</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Show the profile for the given user.
    *
    * @param  int  $id
    * @return Response
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">showProfile</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name static-context">Log</span><span class="token operator">::</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Showing user profile for user: '</span><span class="token operator">.</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'user.profile'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'user'</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">findOrFail</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><h4 id="informacion-contextual"><a href="#informacion-contextual" class="header-anchor">#</a> Información contextual</h4> <p>Un arreglo de datos contextuales puede ser pasado a los métodos de registro. Estos datos contextuales serán formateados y mostrados con el mensaje registrado:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Log</span><span class="token operator">::</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'User failed to login.'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span> <span class="token operator">=&gt;</span> <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">id</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="writing-to-specific-channels"></a></p> <h3 id="escribiendo-a-canales-especificos"><a href="#escribiendo-a-canales-especificos" class="header-anchor">#</a> Escribiendo a canales específicos</h3> <p>Algunas veces podrías querer registrar un mensaje en un canal aparte del canal por defecto de tu aplicación. Podrías usar el método <code>channel</code> en el facade <code>Log</code> para retornar y registrar cualquier canal definido en tu archivo de configuración:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Log</span><span class="token operator">::</span><span class="token function">channel</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'slack'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Something happened!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Si quisieras crear un stack de registro a la carta consistiendo de múltiples canales, puedes usar el método <code>stack</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Log</span><span class="token operator">::</span><span class="token function">stack</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'single'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'slack'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Something happened!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="advanced-monolog-channel-customization"></a></p> <h2 id="personalizacion-avanzada-del-canal-monolog"><a href="#personalizacion-avanzada-del-canal-monolog" class="header-anchor">#</a> Personalización avanzada del canal Monolog</h2> <p><a name="customizing-monolog-for-channels"></a></p> <h3 id="personalizando-monolog-para-canales"><a href="#personalizando-monolog-para-canales" class="header-anchor">#</a> Personalizando Monolog para canales</h3> <p>Algunas veces puede que necesites un control total sobre la forma en la que Monolog es configurado para un canal existente. Por ejemplo, podrías querer configurar una implementación personalizada para <code>FormatterInterface</code> de Monolog para los manejadores de un canal dado.</p> <p>Para comenzar, define un arreglo <code>tap</code> en la configuración del canal. El arreglo <code>tap</code> debe contener una lista de clases que deben tener una oportunidad de personalizar (o hacerle &quot;tap&quot;) a la instancia de Monolog luego de que es creada:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token string single-quoted-string">'single'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'driver'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'single'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'tap'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token class-name class-name-fully-qualified static-context">App<span class="token punctuation">\</span>Logging<span class="token punctuation">\</span>CustomizeFormatter</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'path'</span> <span class="token operator">=&gt;</span> <span class="token function">storage_path</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'logs/laravel.log'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'level'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'debug'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Una vez que has configurado la opción <code>tap</code> en tu canal, estás listo para definir la clase que personalizará tu instancia de Monolog. Esta clase sólo necesita un método: <code>__invoke</code>, que recibe una instancia <code>Illuminate\Log\Logger</code>. La instancia <code>Illuminate\Log\Logger</code> redirige todas las llamadas de métodos a la instancia base de Monolog:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Logging</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">CustomizeFormatter</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Customize the given logger instance.
    *
    * @param  \Illuminate\Log\Logger  $logger
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__invoke</span><span class="token punctuation">(</span><span class="token variable">$logger</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$logger</span><span class="token operator">-&gt;</span><span class="token function">getHandlers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token variable">$handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$handler</span><span class="token operator">-&gt;</span><span class="token function">setFormatter</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Todas tus clases &quot;tap&quot; son resueltas por el <a href="/container.html">contenedor de servicios</a>, así que cualquier dependencia del constructor que requieran será inyectada automáticamente.</p></div> <p><a name="creating-monolog-handler-channels"></a></p> <h3 id="creando-canales-para-manejadores-de-monolog"><a href="#creando-canales-para-manejadores-de-monolog" class="header-anchor">#</a> Creando canales para manejadores de Monolog</h3> <p>Monolog tiene una variedad de <a href="https://github.com/Seldaek/monolog/tree/master/src/Monolog/Handler" target="_blank" rel="noopener noreferrer">manejadores disponibles<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. En algunos casos, el tipo de registro que quieres crear es simplemente un driver de Monolog con una instancia de un handler en específico. Estos canales pueden ser creados usando el driver <code>monolog</code>.</p> <p>Al usar el driver <code>monolog</code>, la opción de configuración <code>handler</code> es utilizada para especificar que handler será instanciado. Opcionalmente, cualquiera de los parámetros del constructor que el handler necesite puede ser especificado usando la opción de configuración <code>with</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token string single-quoted-string">'logentries'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'driver'</span>  <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'monolog'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'handler'</span> <span class="token operator">=&gt;</span> <span class="token class-name class-name-fully-qualified static-context">Monolog<span class="token punctuation">\</span>Handler<span class="token punctuation">\</span>SyslogUdpHandler</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'with'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'host'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'my.logentries.internal.datahubhost.company.com'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'port'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'10000'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="formateadores-de-monolog"><a href="#formateadores-de-monolog" class="header-anchor">#</a> Formateadores de Monolog</h4> <p>Al usar el driver <code>monolog</code>, <code>LineFormatter</code> de Monolog será utilizado como formateador por defecto. Sin embargo, puedes personalizar el tipo de formateador pasado al manejador usando las opciones de configuración <code>formatter</code> y <code>formatter_with</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token string single-quoted-string">'browser'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'driver'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'monolog'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'handler'</span> <span class="token operator">=&gt;</span> <span class="token class-name class-name-fully-qualified static-context">Monolog<span class="token punctuation">\</span>Handler<span class="token punctuation">\</span>BrowserConsoleHandler</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'formatter'</span> <span class="token operator">=&gt;</span> <span class="token class-name class-name-fully-qualified static-context">Monolog<span class="token punctuation">\</span>Formatter<span class="token punctuation">\</span>HtmlFormatter</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'formatter_with'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'dateFormat'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Y-m-d'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Si estás usando un manejador de Monolog que es capaz de proveer su propio formateador, puedes establecer el valor de la opción de configuración <code>formatter</code> a <code>default</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token string single-quoted-string">'newrelic'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'driver'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'monolog'</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'handler'</span> <span class="token operator">=&gt;</span> <span class="token class-name class-name-fully-qualified static-context">Monolog<span class="token punctuation">\</span>Handler<span class="token punctuation">\</span>NewRelicHandler</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'formatter'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'default'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p><a name="creating-channels-via-factories"></a></p> <h3 id="creando-canales-mediante-factories"><a href="#creando-canales-mediante-factories" class="header-anchor">#</a> Creando canales mediante factories</h3> <p>Si quieres definir un canal personalizado completo en el que tengas control total sobre la instanciación y configuración de Monolog, puedes especificar un driver <code>custom</code> en tu archivo de configuración <code>config/logging.php</code>. Tu configuración debe incluir una opción <code>via</code> que apunte a la clase factory que será invocada para crear la instancia de Monolog:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token string single-quoted-string">'channels'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'custom'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'driver'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'custom'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'via'</span> <span class="token operator">=&gt;</span> <span class="token class-name class-name-fully-qualified static-context">App<span class="token punctuation">\</span>Logging<span class="token punctuation">\</span>CreateCustomLogger</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Una vez que hayas configurado el canal <code>custom</code>, estás listo para definir la clase que creará tu instancia de Monolog. Esta clase sólo necesita un método: <code>__invoke</code>, el cual debe retornar una instancia de Monolog:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Logging</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Monolog<span class="token punctuation">\</span>Logger</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">CreateCustomLogger</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Create a custom Monolog instance.
    *
    * @param  array  $config
    * @return \Monolog\Logger
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__invoke</span><span class="token punctuation">(</span><span class="token keyword type-hint">array</span> <span class="token variable">$config</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Logger</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.92aaed9e.js" defer></script><script src="/assets/js/2.648c6578.js" defer></script><script src="/assets/js/48.457d9287.js" defer></script>
  </body>
</html>
