<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Documentación de Laravel en español</title>
    <meta name="description" content="Traducción no oficial de la documentación de Laravel 6.* al español">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran:300,700|Miriam+Libre">
  <link rel="icon" href="/favicon.png">
  <meta property="og:url" content="https://documentacion-laravel.com">
  <meta property="og:type" content="article">
  <meta property="og:title" content="Documentación de Laravel en español">
  <meta property="og:description" content="Traducción no oficial de la documentación de Laravel 6.* al español">
  <meta property="og:image" content="https://documentacion-laravel.com/social-preview.jpeg">
    
    <link rel="preload" href="/assets/css/0.styles.cf3cfaad.css" as="style"><link rel="preload" href="/assets/js/app.5960feca.js" as="script"><link rel="preload" href="/assets/js/2.54a7c931.js" as="script"><link rel="preload" href="/assets/js/52.700261a8.js" as="script"><link rel="prefetch" href="/assets/js/10.efe51994.js"><link rel="prefetch" href="/assets/js/11.eef2a566.js"><link rel="prefetch" href="/assets/js/12.6ea00ff1.js"><link rel="prefetch" href="/assets/js/13.2115cee4.js"><link rel="prefetch" href="/assets/js/14.805eae9b.js"><link rel="prefetch" href="/assets/js/15.2d0d52d3.js"><link rel="prefetch" href="/assets/js/16.6b0d30b9.js"><link rel="prefetch" href="/assets/js/17.b5144feb.js"><link rel="prefetch" href="/assets/js/18.98f71c0d.js"><link rel="prefetch" href="/assets/js/19.0ed80897.js"><link rel="prefetch" href="/assets/js/20.6969dfa8.js"><link rel="prefetch" href="/assets/js/21.e395a4b2.js"><link rel="prefetch" href="/assets/js/22.5a382c49.js"><link rel="prefetch" href="/assets/js/23.790c8b93.js"><link rel="prefetch" href="/assets/js/24.6d44530a.js"><link rel="prefetch" href="/assets/js/25.2b249a08.js"><link rel="prefetch" href="/assets/js/26.e4e63188.js"><link rel="prefetch" href="/assets/js/27.e06fd770.js"><link rel="prefetch" href="/assets/js/28.73fca122.js"><link rel="prefetch" href="/assets/js/29.72ae259d.js"><link rel="prefetch" href="/assets/js/3.65a9c0b1.js"><link rel="prefetch" href="/assets/js/30.a103833e.js"><link rel="prefetch" href="/assets/js/31.da3f5f75.js"><link rel="prefetch" href="/assets/js/32.d9d3c76f.js"><link rel="prefetch" href="/assets/js/33.b6f0c51c.js"><link rel="prefetch" href="/assets/js/34.817b37ed.js"><link rel="prefetch" href="/assets/js/35.396ac8da.js"><link rel="prefetch" href="/assets/js/36.c02fe838.js"><link rel="prefetch" href="/assets/js/37.adb163ed.js"><link rel="prefetch" href="/assets/js/38.671aa558.js"><link rel="prefetch" href="/assets/js/39.52ae390d.js"><link rel="prefetch" href="/assets/js/4.1b4e1d6d.js"><link rel="prefetch" href="/assets/js/40.75689bdf.js"><link rel="prefetch" href="/assets/js/41.2be99a59.js"><link rel="prefetch" href="/assets/js/42.79abccb2.js"><link rel="prefetch" href="/assets/js/43.a1c44eb1.js"><link rel="prefetch" href="/assets/js/44.a2eafefb.js"><link rel="prefetch" href="/assets/js/45.464274f7.js"><link rel="prefetch" href="/assets/js/46.b01d5bcf.js"><link rel="prefetch" href="/assets/js/47.676ed439.js"><link rel="prefetch" href="/assets/js/48.0ba08d6e.js"><link rel="prefetch" href="/assets/js/49.ef52a111.js"><link rel="prefetch" href="/assets/js/5.bb976917.js"><link rel="prefetch" href="/assets/js/50.1404704c.js"><link rel="prefetch" href="/assets/js/51.fcd3ae83.js"><link rel="prefetch" href="/assets/js/53.0ee64f0e.js"><link rel="prefetch" href="/assets/js/54.20ccddeb.js"><link rel="prefetch" href="/assets/js/55.420715e6.js"><link rel="prefetch" href="/assets/js/56.cd284365.js"><link rel="prefetch" href="/assets/js/57.9d5e5b33.js"><link rel="prefetch" href="/assets/js/58.91fa69d8.js"><link rel="prefetch" href="/assets/js/59.4f49a2d9.js"><link rel="prefetch" href="/assets/js/6.fe881c7f.js"><link rel="prefetch" href="/assets/js/60.b83f4381.js"><link rel="prefetch" href="/assets/js/61.7eb1e037.js"><link rel="prefetch" href="/assets/js/62.977e53dd.js"><link rel="prefetch" href="/assets/js/63.cece3028.js"><link rel="prefetch" href="/assets/js/64.48f5542c.js"><link rel="prefetch" href="/assets/js/65.6d63e7ff.js"><link rel="prefetch" href="/assets/js/66.91f74b68.js"><link rel="prefetch" href="/assets/js/67.ecb0474b.js"><link rel="prefetch" href="/assets/js/68.6f79a4d6.js"><link rel="prefetch" href="/assets/js/69.63473858.js"><link rel="prefetch" href="/assets/js/7.d665de24.js"><link rel="prefetch" href="/assets/js/70.e8d9e306.js"><link rel="prefetch" href="/assets/js/71.adfa4100.js"><link rel="prefetch" href="/assets/js/72.7166c5cc.js"><link rel="prefetch" href="/assets/js/73.9771f0f3.js"><link rel="prefetch" href="/assets/js/74.86543265.js"><link rel="prefetch" href="/assets/js/75.00177166.js"><link rel="prefetch" href="/assets/js/76.f79b3515.js"><link rel="prefetch" href="/assets/js/77.af478c18.js"><link rel="prefetch" href="/assets/js/78.70298989.js"><link rel="prefetch" href="/assets/js/79.a158b091.js"><link rel="prefetch" href="/assets/js/8.5ac64f1f.js"><link rel="prefetch" href="/assets/js/80.4fc144dd.js"><link rel="prefetch" href="/assets/js/81.4f45fd97.js"><link rel="prefetch" href="/assets/js/82.7e5d964c.js"><link rel="prefetch" href="/assets/js/83.8cc265fb.js"><link rel="prefetch" href="/assets/js/84.0ebba7c1.js"><link rel="prefetch" href="/assets/js/85.853e96b6.js"><link rel="prefetch" href="/assets/js/86.9dc8c7a9.js"><link rel="prefetch" href="/assets/js/9.a631933e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cf3cfaad.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Documentación de Laravel en español</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div><div class="nav-item"><a href="/documentation.html" class="nav-link">Índice</a></div><div class="nav-item"><a href="/glossary.html" class="nav-link">Glosario</a></div><div class="nav-item"><a href="/credits.html" class="nav-link">Créditos</a></div><div class="nav-item"><a href="/descargar-documentacion.html" class="nav-link">Descargar documentación</a></div><div class="nav-item"><a href="https://v5.documentacion-laravel.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Documentación de Laravel 5.8
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://styde.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Styde
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div><div class="nav-item"><a href="/documentation.html" class="nav-link">Índice</a></div><div class="nav-item"><a href="/glossary.html" class="nav-link">Glosario</a></div><div class="nav-item"><a href="/credits.html" class="nav-link">Créditos</a></div><div class="nav-item"><a href="/descargar-documentacion.html" class="nav-link">Descargar documentación</a></div><div class="nav-item"><a href="https://v5.documentacion-laravel.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Documentación de Laravel 5.8
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://styde.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Styde
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Primeros pasos</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Conceptos de arquitectura</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Fundamentos</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/routing.html" class="sidebar-link">Rutas</a></li><li><a href="/middleware.html" class="sidebar-link">Middleware</a></li><li><a href="/csrf.html" class="sidebar-link">Protección CSRF</a></li><li><a href="/controllers.html" class="sidebar-link">Controladores</a></li><li><a href="/requests.html" class="sidebar-link">Solicitudes HTTP</a></li><li><a href="/responses.html" class="sidebar-link">Respuestas HTTP</a></li><li><a href="/views.html" class="sidebar-link">Vistas</a></li><li><a href="/urls.html" class="sidebar-link">Generación de URLs</a></li><li><a href="/session.html" class="sidebar-link">Sesión HTTP</a></li><li><a href="/validation.html" class="sidebar-link">Validación</a></li><li><a href="/errors.html" class="sidebar-link">Manejo de errores</a></li><li><a href="/logging.html" class="active sidebar-link">Registro (Logging)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/logging.html#introduccion" class="sidebar-link">Introducción</a></li><li class="sidebar-sub-header"><a href="/logging.html#configuracion" class="sidebar-link">Configuración</a></li><li class="sidebar-sub-header"><a href="/logging.html#escribiendo-mensajes-de-error" class="sidebar-link">Escribiendo mensajes de error</a></li><li class="sidebar-sub-header"><a href="/logging.html#personalizacion-avanzada-de-canales-de-monolog" class="sidebar-link">Personalización avanzada de canales de Monolog</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Frontend</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Seguridad</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Profundizando</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Bases de datos</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ORM Eloquent</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Pruebas</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Paquetes oficiales</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div><h1 id="registro-logging"><a class="header-anchor" href="#registro-logging" aria-hidden="true">#</a> Registro (Logging)</h1> <ul><li><a href="#introduction">Introducción</a></li> <li><a href="#configuration">Configuración</a> <ul><li><a href="#building-log-stacks">Construyendo stacks de registros</a></li></ul></li> <li><a href="#writing-log-messages">Escribiendo mensajes de registro</a> <ul><li><a href="#writing-to-specific-channels">Escribiendo a canales específicos</a></li></ul></li> <li><a href="#advanced-monolog-channel-customization">Configuración avanzada del canal Monolog</a> <ul><li><a href="#customizing-monolog-for-channels">Personalizando Monolog para canales</a></li> <li><a href="#creating-monolog-handler-channels">Creando canales de manejador para Monolog</a></li> <li><a href="#creating-channels-via-factories">Creando canales mediante factories</a></li></ul></li></ul> <p><a name="introduction"></a></p> <h2 id="introduccion"><a class="header-anchor" href="#introduccion" aria-hidden="true">#</a> Introducción</h2> <p>Para ayudarte a aprender más acerca de lo que está sucediendo dentro de tu aplicación, Laravel proporciona un robusto servicio de registro que te permite registrar mensajes en archivos, en el registro de errores del sistema e incluso en Slack para notificar a todo tu equipo.</p> <p>De forma interna, Laravel usa la biblioteca <a href="https://github.com/Seldaek/monolog" target="_blank" rel="noopener noreferrer">Monolog<OutboundLink></OutboundLink></a>, que proporciona soporte para una variedad de poderosos manejadores de registros. Laravel hace que sea pan comido configurar dichos manejadores, permitiéndote mezclar y juntarlos para personalizar el manejo de registros en tu aplicación.</p> <p><a name="configuration"></a></p> <h2 id="configuracion"><a class="header-anchor" href="#configuracion" aria-hidden="true">#</a> Configuración</h2> <p>Toda la configuración para el sistema de registros de tu aplicación se encuentra en el archivo de configuración <code>config/logging.php</code>. Este archivo te permite configurar los canales de registros de tu aplicación, así que asegurarte de revisar cada uno de los canales disponibles y sus opciones. Revisaremos algunas opciones comunes a continuación.</p> <p>Por defecto, Laravel usara el canal <code>stack</code> al registrar mensajes. El canal <code>stack</code> es usado para agregar múltiples canales de registros en un solo canal. Para más información sobre construir stacks, revisa la <a href="#building-log-stacks">documentación debajo</a>.</p> <h4 id="configurando-el-nombre-del-canal"><a class="header-anchor" href="#configurando-el-nombre-del-canal" aria-hidden="true">#</a> Configurando el nombre del canal</h4> <p>Por defecto, Monolog es instanciado con un &quot;nombre de canal&quot; que concuerda con el entorno actual, como <code>production</code> o <code>local</code>. Para cambiar este valor, agrega una opción <code>name</code> a la configuración de tu canal:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token single-quoted-string string">'stack'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'driver'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'stack'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'channel-name'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'channels'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'single'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'slack'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="drivers-de-canales-disponibles"><a class="header-anchor" href="#drivers-de-canales-disponibles" aria-hidden="true">#</a> Drivers de canales disponibles</h4> <table><thead><tr><th>Nombre</th> <th>Descripción</th></tr></thead> <tbody><tr><td><code>stack</code></td> <td>Wrapper para facilitar la creación de canales &quot;multi-canales&quot;</td></tr> <tr><td><code>single</code></td> <td>Canal de registro de un sólo archivo o ubicación (<code>StreamHandler</code>)</td></tr> <tr><td><code>daily</code></td> <td>Driver de Monolog basado en <code>RotatingFileHandler</code> que rota diariamente</td></tr> <tr><td><code>slack</code></td> <td>Driver de Monolog basado en <code>SlackWebhookHandler</code></td></tr> <tr><td><code>papertrail</code></td> <td>Driver de Monolog basado en  <code>SyslogUdpHandler</code></td></tr> <tr><td><code>syslog</code></td> <td>Driver de Monolog basado en <code>SyslogHandler</code></td></tr> <tr><td><code>errorlog</code></td> <td>Driver de Monolog basado en <code>ErrorLogHandler</code></td></tr> <tr><td><code>monolog</code></td> <td>Driver factory de Monolog que puede usar cualquier manejador de Monolog soportado</td></tr> <tr><td><code>custom</code></td> <td>Driver que llama a un factory especificado para crear un canal</td></tr></tbody></table> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Comprueba la documentación en <a href="#advanced-monolog-channel-customization">personalización avanzada de canales</a> para aprender más sobre <code>monolog</code> y drivers <code>personalizados</code>.</p></div></div><h4 id="configuracion-de-los-canales-single-y-daily"><a href="#configuracion-de-los-canales-single-y-daily" aria-hidden="true" class="header-anchor">#</a> Configuración de los canales single y daily</h4> <p>Los canales <code>single</code> y <code>daily</code> tienen tres opciones de configuración opcionales: <code>bubble</code>, <code>permission</code> y <code>locking</code>.</p> <table><thead><tr><th>Nombre</th> <th>Descripción</th> <th>Default</th></tr></thead> <tbody><tr><td><code>bubble</code></td> <td>Indica si los mensajes deberían llegar a otros canales después de ser manejados</td> <td><code>true</code></td></tr> <tr><td><code>permission</code></td> <td>Los permisos del archivo de registro</td> <td><code>644</code></td></tr> <tr><td><code>locking</code></td> <td>Intenta bloquear el archivo de registro antes de escribirlo</td> <td><code>false</code></td></tr></tbody></table> <h4 id="configurando-el-canal-de-papertrail"><a href="#configurando-el-canal-de-papertrail" aria-hidden="true" class="header-anchor">#</a> Configurando el canal de papertrail</h4> <p>El canal <code>papertrail</code> requiere de las opciones de configuración <code>url</code> y <code>port</code>. Puedes obtener estos valores desde <a href="https://help.papertrailapp.com/kb/configuration/configuring-centralized-logging-from-php-apps/#send-events-from-php-app" target="_blank" rel="noopener noreferrer">Papertrail<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="configurando-el-canal-de-slack"><a href="#configurando-el-canal-de-slack" aria-hidden="true" class="header-anchor">#</a> Configurando el canal de Slack</h4> <p>El canal <code>slack</code> requiere una opción de configuración <code>url</code>. Esta URL debe coincidir con una URL de un <a href="https://slack.com/apps/A0F7XDUAZ-incoming-webhooks" target="_blank" rel="noopener noreferrer">webhook entrante<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> que has configurado para tu equipo de Slack.</p> <p><a name="building-log-stacks"></a></p> <h3 id="construyendo-stacks-de-registros"><a href="#construyendo-stacks-de-registros" aria-hidden="true" class="header-anchor">#</a> Construyendo stacks de registros</h3> <p>Como mencionamos anteriormente, el driver <code>stack</code> permite que combines múltiples canales en un sólo canal de registro. Para ilustrar cómo usar stacks de registros, vamos a echar un vistazo a un ejemplo de configuración que podrías ver en una aplicación en producción:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'channels'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'stack'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'driver'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'stack'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'channels'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'syslog'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'slack'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token single-quoted-string string">'syslog'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'driver'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'syslog'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'level'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'debug'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token single-quoted-string string">'slack'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'driver'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'slack'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'url'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'LOG_SLACK_WEBHOOK_URL'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'username'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Laravel Log'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'emoji'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">':boom:'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'level'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'critical'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Vamos a examinar esta configuración. Primero, observa que nuestro canal <code>stack</code> agrega dos canales más mediante su opción <code>channels</code>: <code>syslog</code> y <code>slack</code>. Entonces, al registrar mensajes, ambos canales tendrán la oportunidad de registrar el mensaje.</p> <h4 id="niveles-de-registro"><a href="#niveles-de-registro" aria-hidden="true" class="header-anchor">#</a> Niveles de registro</h4> <p>Observa la opción de configuración <code>level</code> presente en la configuración de los canales <code>syslog</code> y <code>slack</code> en el ejemplo superior. Esta opción determina el &quot;nivel&quot; mínimo que un mensaje debe tener para poder ser registrado por el canal. Monolog, que hace funcionar los servicios de registros de Laravel, ofrece todos los niveles de registro definidos en la <a href="https://tools.ietf.org/html/rfc5424" target="_blank" rel="noopener noreferrer">especificación RFC 5424<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: <strong>emergency</strong>, <strong>alert</strong>, <strong>critical</strong>, <strong>error</strong>, <strong>warning</strong>, <strong>notice</strong>, <strong>info</strong> y <strong>debug</strong>.</p> <p>Así que, imagina que registramos un mensaje usando el método <code>debug</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'An informational message.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Dada nuestra configuración, el canal <code>syslog</code> escribirá el mensaje al registro del sistema; sin embargo, dado que el mensaje de error no es <code>critical</code> o superior, no será enviado a Slack. Sin embargo, si registramos un mensaje <code>emergency</code>, será enviado tanto al registro del sistema como a Slack dado que el nivel <code>emergency</code> está por encima de nuestro umbral mínimo para ambos canales:</p> <div class="language-php extra-class"><pre class="language-php"><code>Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">emergency</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'The system is down!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="writing-log-messages"></a></p> <h2 id="escribiendo-mensajes-de-error"><a href="#escribiendo-mensajes-de-error" aria-hidden="true" class="header-anchor">#</a> Escribiendo mensajes de error</h2> <p>Puedes escribir información a los registros usando el <a href="/facades.html">facade</a> <code>Log</code>. Como mencionamos anteriormente, el registrador proporciona los ocho niveles de registro definidos en la <a href="https://tools.ietf.org/html/rfc5424" target="_blank" rel="noopener noreferrer">especificación RFC 5424<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: <strong>emergency</strong>, <strong>alert</strong>, <strong>critical</strong>, <strong>error</strong>, <strong>warning</strong>, <strong>notice</strong>, <strong>info</strong> y <strong>debug</strong>:</p> <div class="language-php extra-class"><pre class="language-php"><code>Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">emergency</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">critical</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">notice</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Así que, podrías llamar a cualquiera de esos métodos para registrar un mensaje para el nivel correspondiente. Por defecto, el mensaje será escrito al canal de registro por defecto tal y como está configurado en tu archivo de configuración <code>config/logging.php</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Log</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>Controller</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Show the profile for the given user.
    *
    * @param  int  $id
    * @return Response
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">showProfile</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Showing user profile for user: '</span><span class="token punctuation">.</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user.profile'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'user'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> User<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">findOrFail</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><h4 id="informacion-contextual"><a href="#informacion-contextual" aria-hidden="true" class="header-anchor">#</a> Información contextual</h4> <p>Un arreglo de datos contextuales puede ser pasado a los métodos de registro. Estos datos contextuales serán formateados y mostrados con el mensaje registrado:</p> <div class="language-php extra-class"><pre class="language-php"><code>Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'User failed to login.'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">id</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="writing-to-specific-channels"></a></p> <h3 id="escribiendo-a-canales-especificos"><a href="#escribiendo-a-canales-especificos" aria-hidden="true" class="header-anchor">#</a> Escribiendo a canales específicos</h3> <p>Algunas veces podrías querer registrar un mensaje a un canal aparte del canal por defecto de tu aplicación. Podrías usar el método <code>channel</code> en el facade <code>Log</code> para retornar y registrar a cualquier canal definido en tu archivo de configuración:</p> <div class="language-php extra-class"><pre class="language-php"><code>Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">channel</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'slack'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Something happened!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Si quisieras crear un stack de registro a la carta consistiendo de múltiples canales, puedes usar el método <code>stack</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">stack</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'single'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'slack'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Something happened!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="advanced-monolog-channel-customization"></a></p> <h2 id="personalizacion-avanzada-de-canales-de-monolog"><a href="#personalizacion-avanzada-de-canales-de-monolog" aria-hidden="true" class="header-anchor">#</a> Personalización avanzada de canales de Monolog</h2> <p><a name="customizing-monolog-for-channels"></a></p> <h3 id="personalizando-monolog-para-canales"><a href="#personalizando-monolog-para-canales" aria-hidden="true" class="header-anchor">#</a> Personalizando Monolog para canales</h3> <p>Algunas veces puede que necesites un control total sobre la forma en la que Monolog es configurado para un canal existente. Por ejemplo, podrías querer configurar una implementación personalizada para <code>FormatterInterface</code> de Monolog para los manejadores de un canal dado.</p> <p>Para comenzar, define un arreglo <code>tap</code> en la configuración del canal. El arreglo <code>tap</code> debe contener una lista de clases que deben tener una oportunidad de personalizar (o hacerle &quot;tap&quot;) a la instancia de Monolog luego de que es creada:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'single'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'driver'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'single'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'tap'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>App\<span class="token package">Logging<span class="token punctuation">\</span>CustomizeFormatter</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'path'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">storage_path</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'logs/laravel.log'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'level'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'debug'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Una vez que has configurado la opción <code>tap</code> en tu canal, estás listo para definir la clase que personalizará tu instancia de Monolog. Esta clase sólo necesita un método: <code>__invoke</code>, que recibe una instancia <code>Illuminate\Log\Logger</code>. La instancia <code>Illuminate\Log\Logger</code> redirige todas las llamadas de métodos a la instancia base de Monolog:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Logging</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">CustomizeFormatter</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Customize the given logger instance.
    *
    * @param  \Illuminate\Log\Logger  $logger
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__invoke</span><span class="token punctuation">(</span><span class="token variable">$logger</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$logger</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getHandlers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token variable">$handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$handler</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setFormatter</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Todas tus clases &quot;tap&quot; son resultas por el <a href="/container.html">contenedor de servicios</a>, así que cualquier dependencia del constuctor que requieran será inyectada automáticamente.</p></div> <p><a name="creating-monolog-handler-channels"></a></p> <h3 id="creando-canales-para-manejadores-de-monolog"><a href="#creando-canales-para-manejadores-de-monolog" aria-hidden="true" class="header-anchor">#</a> Creando canales para manejadores de Monolog</h3> <p>Monolog tiene una variedad de <a href="https://github.com/Seldaek/monolog/tree/master/src/Monolog/Handler" target="_blank" rel="noopener noreferrer">manejadores disponibles<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. En algunos casos, el tipo de registro que quieres crear es simplemente un driver de Monolog con una instancia de un handler en específico. Estos canales pueden ser creados usando el driver <code>monolog</code>.</p> <p>Al usar el driver <code>monolog</code>, la opción de configuración <code>handler</code> es usada para especificar que handler será instanciado. Opcionalmente, cualquier parámetros del constructor que el handler necesite puede ser especificado usando la opción de configuración <code>with</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'logentries'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'driver'</span>  <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'monolog'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'handler'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Monolog\<span class="token package">Handler<span class="token punctuation">\</span>SyslogUdpHandler</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'with'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'host'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'my.logentries.internal.datahubhost.company.com'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'port'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'10000'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="formateadores-de-monolog"><a href="#formateadores-de-monolog" aria-hidden="true" class="header-anchor">#</a> Formateadores de Monolog</h4> <p>Al usar el driver <code>monolog</code>, <code>LineFormatter</code> de Monolog será usado como formateador por defecto. Sin embargo, puedes personalizar el tipo de formateador pasado al manejador usando las opciones de configuración <code>formatter</code> y <code>formatter_with</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'browser'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'driver'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'monolog'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'handler'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Monolog\<span class="token package">Handler<span class="token punctuation">\</span>BrowserConsoleHandler</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'formatter'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Monolog\<span class="token package">Formatter<span class="token punctuation">\</span>HtmlFormatter</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'formatter_with'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'dateFormat'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Y-m-d'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Si estás usando un manejador de Monolog que es capaz de proveer su propio formateador, puedes establecer el valor de la opción de configuración <code>formatter</code> a <code>default</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'newrelic'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'driver'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'monolog'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'handler'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Monolog\<span class="token package">Handler<span class="token punctuation">\</span>NewRelicHandler</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'formatter'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p><a name="creating-channels-via-factories"></a></p> <h3 id="creando-canales-mediante-factories"><a href="#creando-canales-mediante-factories" aria-hidden="true" class="header-anchor">#</a> Creando canales mediante factories</h3> <p>Si quieres definir un canal personalizado completo en el que tienes control total sobre la instanciación y configuración de Monolog, puedes especificar un driver personalizado en tu archivo de configuración <code>config/logging.php</code>. Tu configuración debe incluir una opción <code>via</code> que apunte a la clase factory que será invocada para crear la instancia de Monolog:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'channels'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'custom'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'driver'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'custom'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'via'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> App\<span class="token package">Logging<span class="token punctuation">\</span>CreateCustomLogger</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Una vez que has configurado el canal personalizado, estás listo para definir la clase que creará tu instancia de Monolog. Esta clase sólo necesita un método: <code>__invoke</code>, el cual debe retornar una instancia de Monolog:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Logging</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Monolog<span class="token punctuation">\</span>Logger</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">CreateCustomLogger</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Create a custom Monolog instance.
    *
    * @param  array  $config
    * @return \Monolog\Logger
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__invoke</span><span class="token punctuation">(</span><span class="token keyword">array</span> <span class="token variable">$config</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Logger</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/errors.html" class="prev">Manejo de errores</a></span> <span class="next"><a href="/blade.html">Plantillas Blade</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5960feca.js" defer></script><script src="/assets/js/2.54a7c931.js" defer></script><script src="/assets/js/52.700261a8.js" defer></script>
  </body>
</html>
