(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{258:function(a,s,t){"use strict";t.r(s);var e=t(0),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("div",{pre:!0},[t("h1",{pre:!0,attrs:{id:"laravel-passport"}},[t("a",{pre:!0,attrs:{class:"header-anchor",href:"#laravel-passport","aria-hidden":"true"}},[a._v("#")]),a._v(" Laravel Passport")]),a._v(" "),t("ul",[t("li",[t("a",{pre:!0,attrs:{href:"#introduction"}},[a._v("Introducción")])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#installation"}},[a._v("Instalación")]),a._v(" "),t("ul",[t("li",[t("a",{pre:!0,attrs:{href:"#frontend-quickstart"}},[a._v("Inicio rápido de frontend")])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#deploying-passport"}},[a._v("Despliegue de passport")])])])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#configuration"}},[a._v("Configuración")]),a._v(" "),t("ul",[t("li",[t("a",{pre:!0,attrs:{href:"#token-lifetimes"}},[a._v("Duración de tokens")])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#overriding-default-models"}},[a._v("Sobrescribiendo modelos predeterminados")])])])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#issuing-access-tokens"}},[a._v("Emitiendo tokens de acceso")]),a._v(" "),t("ul",[t("li",[t("a",{pre:!0,attrs:{href:"#managing-clients"}},[a._v("Administrando clientes")])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#requesting-tokens"}},[a._v("Solicitando tokens")])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#refreshing-tokens"}},[a._v("Actualización de tokens")])])])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#password-grant-tokens"}},[a._v("Tokens de permiso de contraseña")]),a._v(" "),t("ul",[t("li",[t("a",{pre:!0,attrs:{href:"#creating-a-password-grant-client"}},[a._v("Creando un cliente con permiso de contraseña")])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#requesting-password-grant-tokens"}},[a._v("Solicitando tokens")])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#requesting-all-scopes"}},[a._v("Solicitando todos los alcances")])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#customizing-the-username-field"}},[a._v("Personalizando el campo username")])])])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#implicit-grant-tokens"}},[a._v("Tokens de permiso implícitos")])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#client-credentials-grant-tokens"}},[a._v("Tokens de permiso de credenciales de cliente")])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#personal-access-tokens"}},[a._v("Tokens de acceso personal")]),a._v(" "),t("ul",[t("li",[t("a",{pre:!0,attrs:{href:"#creating-a-personal-access-client"}},[a._v("Creando un cliente de acceso personal")])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#managing-personal-access-tokens"}},[a._v("Administrando tokens de acceso personal")])])])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#protecting-routes"}},[a._v("Protegiendo rutas")]),a._v(" "),t("ul",[t("li",[t("a",{pre:!0,attrs:{href:"#via-middleware"}},[a._v("Por medio de middleware")])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#passing-the-access-token"}},[a._v("Pasando el token de acceso")])])])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#token-scopes"}},[a._v("Alcances de token")]),a._v(" "),t("ul",[t("li",[t("a",{pre:!0,attrs:{href:"#defining-scopes"}},[a._v("Definiendo alcances")])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#default-scope"}},[a._v("Alcance predeterminado")])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#assigning-scopes-to-tokens"}},[a._v("Asignando alcances a los Tokens")])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#checking-scopes"}},[a._v("Verificando alcances")])])])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#consuming-your-api-with-javascript"}},[a._v("Consumiendo tu API con JavaScript")])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#events"}},[a._v("Eventos")])]),a._v(" "),t("li",[t("a",{pre:!0,attrs:{href:"#testing"}},[a._v("Pruebas")])])]),a._v(" "),t("p",[t("a",{pre:!0,attrs:{name:"introduction"}})]),a._v(" "),t("h2",{pre:!0,attrs:{id:"introduccion"}},[t("a",{pre:!0,attrs:{class:"header-anchor",href:"#introduccion","aria-hidden":"true"}},[a._v("#")]),a._v(" Introducción")]),a._v(" "),t("p",[a._v("Laravel ya hace fácil ejecutar la autenticación por medio de los tradicionales formularios de inicio de sesión, pero ¿Qué información tenemos sobre APIs? Las APIs típicamente usan tokens para autenticar a los usuarios y no mantienen el estado de sesión entre solicitudes. Laravel hace de la autenticación de API algo muy simple usando Passport de Laravel, el cual proporciona una implementación de servidor OAuth2 completa para tu aplicación Laravel en sólo minutos. Passport está construido sobre el "),t("a",{pre:!0,attrs:{href:"https://github.com/thephpleague/oauth2-server",target:"_blank",rel:"noopener noreferrer"}},[a._v("servidor OAuth2"),t("OutboundLink",{pre:!0})],1),a._v(" que es mantenido por Andy Millington y Simon Hamp..")]),a._v(" "),t("div",{pre:!0,attrs:{class:"danger custom-block"}},[t("p",{pre:!0,attrs:{class:"custom-block-title"}},[a._v("Nota")]),a._v(" "),t("p",[a._v("Esta documentación asume que estás familiarizado con OAuth2. Si no sabes nada sobre OAuth2, considera familiarizarte con la "),t("a",{pre:!0,attrs:{href:"https://oauth2.thephpleague.com/terminology/",target:"_blank",rel:"noopener noreferrer"}},[a._v("terminología general"),t("OutboundLink",{pre:!0})],1),a._v(" y las características de Outh2 antes de continuar.")])])]),t("p",[t("a",{attrs:{name:"installation"}})]),a._v(" "),t("h2",{attrs:{id:"instalacion"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#instalacion","aria-hidden":"true"}},[a._v("#")]),a._v(" Instalación")]),a._v(" "),t("p",[a._v("Para empezar, instala Passport por medio del gestor de paquetes Composer:")]),a._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[a._v("composer "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("require")]),a._v(" laravel"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("passport\n")])])]),t("p",[a._v("El proveedor de servicio de Passport registra su propio directorio de migración de base de datos con el framework, así que deberías migrar tu base de datos después de registrar el paquete. Las migraciones de Passport crearán las tablas que tu aplicación necesita para almacenar clientes y tokens de acceso:")]),a._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[a._v("php artisan migrate\n")])])]),t("p",[a._v("A continuación, debes ejecutar el comando "),t("code",[a._v("passport:install")]),a._v('. Este comando creará las claves de encriptación necesarias para generar tokens de acceso seguro. Además, el comando creará clientes de "acceso personal" y "permiso de contraseña" los cuales serán usados para generar tokens de acceso:')]),a._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[a._v("php artisan passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("install\n")])])]),t("p",[a._v("Después de ejecutar este comando, agrega el trait "),t("code",[a._v("Laravel\\Passport\\HasApiTokens")]),a._v(" a tu modelo "),t("code",[a._v("App\\User")]),a._v(". Este trait proporcionará algunos métodos helper para tu modelo los cuales permitirán que inspecciones el token y alcances del usuario autenticado:")]),a._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token php language-php"}},[t("span",{pre:!0,attrs:{class:"token delimiter important"}},[a._v("<?php")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("namespace")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("App")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("Laravel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("HasApiTokens")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("Illuminate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Notifications"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Notifiable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("Illuminate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Foundation"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("User")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" Authenticatable"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("User")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("extends")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Authenticatable")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("HasApiTokens")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" Notifiable"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])])]),t("p",[a._v("Lo próximo, deberías ejecutar el método "),t("code",[a._v("Passport::routes")]),a._v(" dentro del método "),t("code",[a._v("boot")]),a._v(" de tu "),t("code",[a._v("AuthServiceProvider")]),a._v(". Este método registrará las rutas necesarias para suministrar tokens y revocar tokens de acceso, clientes y tokens de acceso personal:")]),a._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token php language-php"}},[t("span",{pre:!0,attrs:{class:"token delimiter important"}},[a._v("<?php")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("namespace")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("App"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Providers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("Laravel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Passport")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("Illuminate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Support"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Facades"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Gate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("Illuminate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Foundation"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Support"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Providers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("AuthServiceProvider")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" ServiceProvider"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("AuthServiceProvider")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("extends")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ServiceProvider")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/**\n    * The policy mappings for the application.\n    *\n    * @var array\n    */")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("protected")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$policies")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[a._v("'App\\Model'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[a._v("'App\\Policies\\ModelPolicy'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/**\n    * Register any authentication / authorization services.\n    *\n    * @return void\n    */")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("boot")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$this")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("registerPolicies")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n        Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("routes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])])]),t("p",[a._v("Finalmente, en tu archivo de configuración "),t("code",[a._v("config/auth.php")]),a._v(", debes establecer la opción "),t("code",[a._v("driver")]),a._v(" del guardia de autenticación de "),t("code",[a._v("api")]),a._v(" a "),t("code",[a._v("passport")]),a._v(". Esto indicará a tu aplicación que utilice el "),t("code",[a._v("TokenGuard")]),a._v(" de Passport al momento de autenticar las solicitudes de API entrantes:")]),a._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[a._v("'guards'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[a._v("'web'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[a._v("'driver'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[a._v("'session'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[a._v("'provider'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[a._v("'users'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[a._v("'api'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[a._v("'driver'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[a._v("'passport'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[a._v("'provider'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[a._v("'users'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n")])])]),t("h3",{attrs:{id:"personalizacion-de-la-migracion"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#personalizacion-de-la-migracion","aria-hidden":"true"}},[a._v("#")]),a._v(" Personalización de la migración")]),a._v(" "),t("p",[a._v("Si no vas a utilizar las migraciones predeterminadas de Passport, debes llamar al método "),t("code",[a._v("Passport::ignoreMigrations")]),a._v(" en el método "),t("code",[a._v("register")]),a._v(" de tu "),t("code",[a._v("AppServiceProvider")]),a._v(". Puedes exportar las migraciones por defecto usando "),t("code",[a._v("php artisan vendor:publish --tag=passport-migrations")]),a._v(".")]),a._v(" "),t("p",[a._v("Por defecto, Passport usa una columna de enteros para almacenar el "),t("code",[a._v("user_id")]),a._v(". Si tu aplicación utiliza un tipo de columna diferente para identificar a los usuarios (por ejemplo: UUID), debes modificar las migraciones de Passport predeterminadas después de publicarlas.")]),a._v(" "),t("p",[t("a",{attrs:{name:"frontend-quickstart"}})]),a._v(" "),t("h3",{attrs:{id:"inicio-rapido-de-frontend"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#inicio-rapido-de-frontend","aria-hidden":"true"}},[a._v("#")]),a._v(" Inicio rápido de frontend")]),a._v(" "),t("div",{staticClass:"danger custom-block"},[t("p",{staticClass:"custom-block-title"},[a._v("Nota")]),a._v(" "),t("p",[a._v("Para usar los componentes de Vue, debes estar usando el framework de JavaScript "),t("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener noreferrer"}},[a._v("Vue"),t("OutboundLink")],1),a._v(". Estos componentes también usarán el framework de CSS Bootstrap. Sin embargo, incluso si no estás usando estas herramientas, los componentes sirven como una referencia valiosa para tu propia implementación de frontend.")])]),a._v(" "),t("p",[a._v("Passport viene con una API JSON que puedes usar para permitir que tus usuarios creen tokens de acceso de clientes y personal. Sin embargo, puede ser que consuma tiempo codificar un frontend para interactuar con estas APIs. Así que, Passport también incluye componentes de "),t("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener noreferrer"}},[a._v("Vue"),t("OutboundLink")],1),a._v(" pre-construidos que puedes usar como implementación de ejemplo o punto de inicio para tu propia implementación.")]),a._v(" "),t("p",[a._v("Para publicar los componentes de Vue de Passport, usa el comando Artisan "),t("code",[a._v("vendor:publish")]),a._v(":")]),a._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[a._v("php artisan vendor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("publish "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("tag"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("passport"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("components\n")])])]),t("p",[a._v("Los componentes publicados serán colocados en tu directorio "),t("code",[a._v("resources/js/components")]),a._v(". Una vez que los componentes han sido publicados, debes registrarlos en tu archivo "),t("code",[a._v("resources/js/app.js")]),a._v(":")]),a._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[a._v("Vue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("component")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'passport-clients'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./components/passport/Clients.vue'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("default\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\nVue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("component")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'passport-authorized-clients'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./components/passport/AuthorizedClients.vue'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("default\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\nVue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("component")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'passport-personal-access-tokens'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./components/passport/PersonalAccessTokens.vue'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("default\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),t("div",{staticClass:"danger custom-block"},[t("p",{staticClass:"custom-block-title"},[a._v("Nota")]),a._v(" "),t("p",[a._v("Antes de Laravel v 5.7.19, anexar "),t("code",[a._v(".default")]),a._v(" al registrar componentes da como resultado un error de consola. Una explicación para este cambio puedes encontrarla en las "),t("a",{attrs:{href:"https://github.com/JeffreyWay/laravel-mix/releases/tag/v4.0.0",target:"_blank",rel:"noopener noreferrer"}},[a._v("notas de lanzamiento de Laravel Mix v 4.0.0"),t("OutboundLink")],1),a._v(".")])]),a._v(" "),t("p",[a._v("Después de registrar los componentes, asegurate de ejecutar "),t("code",[a._v("npm run dev")]),a._v(" para recompilar tu código CSS/JS. Una vez que has recompilado tus código CSS/JS, puedes colocar los componentes dentro de una de las plantillas de tu aplicación para empezar a crear tokens de acceso clientes y personal:")]),a._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("passport"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("clients"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("passport"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("clients"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("passport"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("authorized"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("clients"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("passport"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("authorized"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("clients"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("passport"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("personal"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("access"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("tokens"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("passport"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("personal"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("access"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("tokens"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("p",[t("a",{attrs:{name:"deploying-passport"}})]),a._v(" "),t("h3",{attrs:{id:"despliegue-de-passport"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#despliegue-de-passport","aria-hidden":"true"}},[a._v("#")]),a._v(" Despliegue de passport")]),a._v(" "),t("p",[a._v("Al momento de usar Passport en tus servidores de producción por primera vez, es probable que debas ejecutar el comando "),t("code",[a._v("passport:keys")]),a._v(". Este comando genera las claves de encriptación que Passport necesita con el propósito de generar el token de acceso. Las claves generadas normalmente no son guardadas en control de código fuente:")]),a._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[a._v("php artisan passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("keys\n")])])]),t("p",[a._v("De ser necesario, puedes definir la ruta en la que se deben cargar las claves de Passport. Para lograr esto puedes usar el método "),t("code",[a._v("Passport::loadKeysFrom")]),a._v(":")]),a._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/**\n* Register any authentication / authorization services.\n*\n* @return void\n*/")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("boot")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$this")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("registerPolicies")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("routes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("loadKeysFrom")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[a._v("'/secret-keys/oauth'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[t("a",{attrs:{name:"configuration"}})]),a._v(" "),t("h2",{attrs:{id:"configuracion"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuracion","aria-hidden":"true"}},[a._v("#")]),a._v(" Configuración")]),a._v(" "),t("p",[t("a",{attrs:{name:"token-lifetimes"}})]),a._v(" "),t("h3",{attrs:{id:"duracion-de-tokens"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#duracion-de-tokens","aria-hidden":"true"}},[a._v("#")]),a._v(" Duración de tokens")]),a._v(" "),t("p",[a._v("De forma predeterminada, Passport emite tokens de acceso de larga duración que caducan después de un año. Si prefieres configurar una duración de token más larga o más corta, puedes usar los métodos "),t("code",[a._v("tokensExpireIn")]),a._v(", "),t("code",[a._v("refreshTokensExpireIn")]),a._v(" y "),t("code",[a._v("personalAccessTokensExpireIn")]),a._v(". Estos métodos deberían ser ejecutados desde el método "),t("code",[a._v("boot")]),a._v(" de tu "),t("code",[a._v("AuthServiceProvider")]),a._v(":")]),a._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/**\n* Register any authentication / authorization services.\n*\n* @return void\n*/")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("boot")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$this")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("registerPolicies")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("routes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tokensExpireIn")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("addDays")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("refreshTokensExpireIn")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("addDays")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("30")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("personalAccessTokensExpireIn")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("addMonths")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[t("a",{attrs:{name:"overriding-default-models"}})]),a._v(" "),t("h3",{attrs:{id:"sobrescribiendo-modelos-predeterminados"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sobrescribiendo-modelos-predeterminados","aria-hidden":"true"}},[a._v("#")]),a._v(" Sobrescribiendo modelos predeterminados")]),a._v(" "),t("p",[a._v("Eres en libre de extender los modelos usados internamente por Passport. A continuación, puedes indicarle a Passport que utilice tus modelos personalizados a través de la clase "),t("code",[a._v("Passport")]),a._v(":")]),a._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("App"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Models"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Client")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("App"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Models"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Token")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("App"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Models"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("AuthCode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("App"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Models"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("PersonalAccessClient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/**\n* Register any authentication / authorization services.\n*\n* @return void\n*/")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("boot")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$this")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("registerPolicies")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("routes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("useTokenModel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Token"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("useClientModel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("useAuthCodeModel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("AuthCode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("usePersonalAccessClientModel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("PersonalAccessClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[t("a",{attrs:{name:"issuing-access-tokens"}})]),a._v(" "),t("h2",{attrs:{id:"emitiendo-tokens-de-acceso"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#emitiendo-tokens-de-acceso","aria-hidden":"true"}},[a._v("#")]),a._v(" Emitiendo tokens de acceso")]),a._v(" "),t("p",[a._v("Usar OAuth2 con códigos de autorización es la forma en que la mayoría de los desarrolladores están familiarizados con OAuth2. Al usar códigos de autorización, una aplicación cliente redireccionará un usuario a tu servidor donde aprobará o denegará la solicitud para emitir un token de acceso al cliente.")]),a._v(" "),t("p",[t("a",{attrs:{name:"managing-clients"}})]),a._v(" "),t("h3",{attrs:{id:"administrando-clientes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#administrando-clientes","aria-hidden":"true"}},[a._v("#")]),a._v(" Administrando clientes")]),a._v(" "),t("p",[a._v('En primer lugar, los desarrolladores que crean aplicaciones que necesitan interactuar con la API de tu aplicación necesitarán registrar su aplicación con la tuya creando un "cliente". Normalmente, esto consiste en proporcionar el nombre de su aplicación y una dirección URL a la que tu aplicación puede redirigir después de que los usuarios aprueben su solicitud de autorización.')]),a._v(" "),t("h4",{attrs:{id:"el-comando-passport-client"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#el-comando-passport-client","aria-hidden":"true"}},[a._v("#")]),a._v(" El comando "),t("code",[a._v("passport:client")])]),a._v(" "),t("p",[a._v("La forma más simple de crear un cliente es usando el comando Artisan "),t("code",[a._v("passport:client")]),a._v(". Este comando puede ser usado para crear tus propios clientes para probar tu funcionalidad OAuth2. Cuando ejecutes el comando "),t("code",[a._v("client")]),a._v(", Passport te pedirá más información sobre tu cliente y te proporcionará un ID y clave secreta de cliente:")]),a._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[a._v("php artisan passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("client\n")])])]),t("p",[t("strong",[a._v("Redirigir URLs")])]),a._v(" "),t("p",[a._v("Si deseas incluir en la lista blanca varias direcciones URL de redireccionamiento para tu cliente, puedse especificarlas mediante una lista delimitadas por comas cuando se le solicite la dirección URL mediante el comando "),t("code",[a._v("passport:client")]),a._v(":")]),a._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[a._v("http"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//example.com/callback,http://examplefoo.com/callback")]),a._v("\n")])])]),t("div",{staticClass:"danger custom-block"},[t("p",{staticClass:"custom-block-title"},[a._v("Nota")]),a._v(" "),t("p",[a._v("Cualquier URL que contenga comas debe estar codificada.")])]),a._v(" "),t("h4",{attrs:{id:"api-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#api-json","aria-hidden":"true"}},[a._v("#")]),a._v(" API JSON")]),a._v(" "),t("p",[a._v("Debido a que tus usuarios no podrán utilizar el comando "),t("code",[a._v("client")]),a._v(", Passport proporciona una API JSON que puedes usar para crear clientes. Esto te ahorra la molestia de tener que codificar manualmente los controladores para crear, actualizar y eliminar clientes.")]),a._v(" "),t("p",[a._v("Sin embargo, necesitarás acoplar la API JSON de Passport con tu propio frontend para proporcionar un dashboard para que tus usuarios administren sus clientes. A continuación, revisaremos todos los endpoints de API para administrar clientes. Por conveniencia, usaremos "),t("a",{attrs:{href:"https://github.com/mzabriskie/axios",target:"_blank",rel:"noopener noreferrer"}},[a._v("Axios"),t("OutboundLink")],1),a._v(" para demostrar la realización de solicitudes HTTP a los endpoints.")]),a._v(" "),t("p",[a._v("La API JSON está protegida por los middleware "),t("code",[a._v("web")]),a._v(" y "),t("code",[a._v("auth")]),a._v("; por lo tanto, sólo puede ser llamada desde tu propia aplicación. No se puede llamar desde una fuente externa.")]),a._v(" "),t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),t("p",[a._v("Si no quieres implementar tu mismo el frontend completo para administra")])])])}),[],!1,null,null,null);s.default=n.exports}}]);