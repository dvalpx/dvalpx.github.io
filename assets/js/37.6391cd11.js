(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{265:function(e,t,s){"use strict";s.r(t);var a=s(0),n=Object(a.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._m(4),e._v(" "),e._m(5),e._m(6),e._v(" "),e._m(7),e._m(8),e._v(" "),e._m(9),e._v(" "),e._m(10),e._v(" "),e._m(11),e._v(" "),s("p",[e._v("Una clase de evento es un contenedor de datos que guarda la información relacionada con el evento. Por ejemplo, supongamos que nuestro evento "),s("code",[e._v("OrderShipped")]),e._v(" (orden enviada) generado recibe un objeto "),s("router-link",{attrs:{to:"/eloquent.html"}},[e._v("ORM Eloquent")]),e._v(":")],1),e._v(" "),e._m(12),e._m(13),e._v(" "),e._m(14),e._v(" "),e._m(15),e._v(" "),e._m(16),e._v(" "),e._m(17),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),s("p",[e._v("Tus oyentes de eventos también pueden declarar el tipo de cualquier dependencia que necesiten de sus constructores. Todos los oyentes de eventos se resuelven a través "),s("router-link",{attrs:{to:"/container.html"}},[e._v("contenedor de servicio")]),e._v(" de Laravel, por lo que las dependencias se inyectarán automáticamente.")],1)]),e._v(" "),e._m(18),e._v(" "),e._m(19),e._v(" "),e._m(20),e._v(" "),e._m(21),e._v(" "),s("p",[e._v("Los oyentes de colas pueden ser beneficiosos si tu oyente va a realizar una tarea lenta, como enviar un correo electrónico o realizar una solicitud HTTP. Antes de comenzar con oyentes de cola, asegúrate de "),s("router-link",{attrs:{to:"/queues.html"}},[e._v("configurar su cola")]),e._v(" e iniciar un oyente de colas en tu servidor o entorno de desarrollo local.")],1),e._v(" "),e._m(22),e._v(" "),e._m(23),s("p",[e._v("¡Eso es! Ahora, cuando este oyente es llamado por un evento, el despachador de eventos lo colocará en cola automáticamente usando el "),s("router-link",{attrs:{to:"/queues.html"}},[e._v("sistema de colas")]),e._v(" de Laravel. Si no se lanzan excepciones cuando la cola ejecuta el oyente, el trabajo en cola se eliminará automáticamente una vez que haya terminado de procesarse.")],1),e._v(" "),e._m(24),e._v(" "),e._m(25),e._v(" "),e._m(26),e._m(27),e._v(" "),e._m(28),e._v(" "),e._m(29),e._m(30),e._v(" "),e._m(31),e._v(" "),e._m(32),e._v(" "),e._m(33),e._m(34),e._v(" "),e._m(35),e._v(" "),e._m(36),e._v(" "),e._m(37),e._m(38),e._v(" "),e._m(39),e._v(" "),e._m(40),e._v(" "),e._m(41),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),s("p",[e._v("Al realizar pruebas, puede ser útil afirmar que ciertos eventos se enviaron sin activar realmente a tus oyentes. Las "),s("router-link",{attrs:{to:"/mocking.html#event-fake"}},[e._v("funciones de ayuda (helpers) incluidas")]),e._v(" en Laravel hace que sea fácil de hacerlo.")],1)]),e._v(" "),e._m(42),e._v(" "),e._m(43),e._v(" "),e._m(44),e._v(" "),e._m(45),e._v(" "),e._m(46),e._v(" "),e._m(47),e._m(48),e._v(" "),e._m(49),e._v(" "),e._m(50),e._v(" "),e._m(51)])},[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{pre:!0},[s("h1",{pre:!0,attrs:{id:"eventos"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#eventos","aria-hidden":"true"}},[e._v("#")]),e._v(" Eventos")]),e._v(" "),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#introduction"}},[e._v("Introducción")])]),e._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"#registering-events-and-listeners"}},[e._v("Registro de eventos y oyentes")]),e._v(" "),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#generating-events-and-listeners"}},[e._v("Generación de eventos y oyentes")])]),e._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"#manually-registering-events"}},[e._v("Registro manual de eventos")])]),e._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"#event-discovery"}},[e._v("Descubrimiento de eventos")])])])]),e._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"#defining-events"}},[e._v("Definiendo eventos")])]),e._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"#defining-listeners"}},[e._v("Definiendo oyentes")])]),e._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"#queued-event-listeners"}},[e._v("Oyentes de eventos en cola")]),e._v(" "),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#manually-accessing-the-queue"}},[e._v("Accediendo manualmente a la cola")])]),e._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"#handling-failed-jobs"}},[e._v("Manejo de trabajos fallidos")])])])]),e._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"#dispatching-events"}},[e._v("Despachando eventos")])]),e._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"#event-subscribers"}},[e._v("Suscriptores de eventos")]),e._v(" "),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#writing-event-subscribers"}},[e._v("Escribiendo suscriptores de eventos")])]),e._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"#registering-event-subscribers"}},[e._v("Registrando suscriptores de eventos")])])])])]),e._v(" "),s("p",[s("a",{pre:!0,attrs:{name:"introduction"}})]),e._v(" "),s("h2",{pre:!0,attrs:{id:"introduccion"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#introduccion","aria-hidden":"true"}},[e._v("#")]),e._v(" Introducción")]),e._v(" "),s("p",[e._v("Los eventos de Laravel proporcionan una implementación de observador simple, lo que permite suscribirse y escuchar diversos eventos que ocurren en tu aplicación. Las clases de eventos normalmente se almacenan en el directorio "),s("code",[e._v("app/Events")]),e._v(", mientras que tus oyentes se almacenan en "),s("code",[e._v("app/Listeners")]),e._v(". No te preocupes si no ves estos directorios en tu aplicación, ya que se crearán para ti cuando generes eventos y oyentes utilizando los comandos de consola Artisan.")]),e._v(" "),s("p",[e._v("Los eventos sirven como una excelente manera de desacoplar varios aspectos de tu aplicación, ya que un solo evento puede tener múltiples oyentes que no dependen entre sí. Por ejemplo, es posible que desees enviar una notificación de Slack a tu usuario cada vez que se envíe un pedido. En lugar de acoplar tu código de procesamiento de pedidos a tu código de notificación Slack, puedes generar un evento "),s("code",[e._v("OrderShipped")]),e._v(", que un oyente puede recibir y transformar en una notificación Slack.")]),e._v(" "),s("p",[s("a",{pre:!0,attrs:{name:"registering-events-and-listeners"}})]),e._v(" "),s("h2",{pre:!0,attrs:{id:"registro-de-eventos-y-oyentes"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#registro-de-eventos-y-oyentes","aria-hidden":"true"}},[e._v("#")]),e._v(" Registro de eventos y oyentes")]),e._v(" "),s("p",[e._v("El "),s("code",[e._v("EventServiceProvider")]),e._v(" incluido en tu aplicación Laravel proporciona un lugar conveniente para registrar todos los oyentes de eventos de tu aplicación. La propiedad "),s("code",[e._v("listen")]),e._v(" contiene un arreglo de todos los eventos (claves) y sus oyentes (valores). Puedes agregar tantos eventos a este arreglo como lo requieras tu aplicación. Por ejemplo, agreguemos un evento "),s("code",[e._v("OrderShipped")]),e._v(":")]),e._v(" "),s("div",{pre:!0,attrs:{class:"language-php extra-class"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n* The event listener mappings for the application.\n*\n* @var array\n*/")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("protected")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$listen")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[e._v("'App\\Events\\OrderShipped'")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[e._v("'App\\Listeners\\SendShipmentNotification'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("p",[s("a",{pre:!0,attrs:{name:"generating-events-and-listeners"}})]),e._v(" "),s("h3",{pre:!0,attrs:{id:"generacion-de-eventos-y-oyentes"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#generacion-de-eventos-y-oyentes","aria-hidden":"true"}},[e._v("#")]),e._v(" Generación de eventos y oyentes")]),e._v(" "),s("p",[e._v("Por supuesto, crear manualmente los archivos para cada evento y oyente es engorroso. En vez de eso, agrega oyentes y eventos a tu "),s("code",[e._v("EventServiceProvider")]),e._v(" y usa el comando "),s("code",[e._v("event:generate")]),e._v(". Este comando generará cualquier evento u oyente que esté listado en tu "),s("code",[e._v("EventServiceProvider")]),e._v(". Los eventos y oyentes que ya existen quedarán intactos:")]),e._v(" "),s("div",{pre:!0,attrs:{class:"language-php extra-class"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-php"}},[s("code",[e._v("php artisan event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("generate\n")])])]),s("p",[s("a",{pre:!0,attrs:{name:"manually-registering-events"}})]),e._v(" "),s("h3",{pre:!0,attrs:{id:"registro-manual-de-eventos"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#registro-manual-de-eventos","aria-hidden":"true"}},[e._v("#")]),e._v(" Registro manual de eventos")]),e._v(" "),s("p",[e._v("Normalmente, los eventos deberían registrarse a través del arreglo "),s("code",[e._v("$listen")]),e._v(" de "),s("code",[e._v("EventServiceProvider")]),e._v("; sin embargo, también puedes registrar manualmente eventos basados en Closure en el método "),s("code",[e._v("boot")]),e._v(" de tu "),s("code",[e._v("EventServiceProvider")]),e._v(":")]),e._v(" "),s("div",{pre:!0,attrs:{class:"language-php extra-class"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n* Register any other events for your application.\n*\n* @return void\n*/")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("boot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("parent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("boot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n    Event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("listen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[e._v("'event.name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$bar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("h4",{pre:!0,attrs:{id:"comodin-de-oyentes-de-un-evento"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#comodin-de-oyentes-de-un-evento","aria-hidden":"true"}},[e._v("#")]),e._v(" Comodín de oyentes de un evento")]),e._v(" "),s("p",[e._v("Puedes incluso registrar oyentes usando el "),s("code",[e._v("*")]),e._v(" como un parámetro comodín, lo que te permite capturar múltiples eventos en el mismo oyente. Los comodines de oyentes reciben el nombre del evento como su primer argumento y el arreglo de datos de eventos completo como su segundo argumento:")]),e._v(" "),s("div",{pre:!0,attrs:{class:"language-php extra-class"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-php"}},[s("code",[e._v("Event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("listen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[e._v("'event.*'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$eventName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("array")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("p",[s("a",{pre:!0,attrs:{name:"event-discovery"}})]),e._v(" "),s("h3",{pre:!0,attrs:{id:"descubrimiento-de-eventos"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#descubrimiento-de-eventos","aria-hidden":"true"}},[e._v("#")]),e._v(" Descubrimiento de eventos")]),e._v(" "),s("div",{pre:!0,attrs:{class:"danger custom-block"}},[s("p",{pre:!0,attrs:{class:"custom-block-title"}},[e._v("Nota")]),e._v(" "),s("p",[e._v("El Descubrimiento de Eventos está disponible para Laravel 5.8.9 o posterior.")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[e._v("En vez de registrar eventos y oyentes (listeners) manualmente en el arreglo "),s("code",[e._v("$listen")]),e._v(" del "),s("code",[e._v("EventServiceProvider")]),e._v(", puedes habilitar la detección automática de eventos. Cuando se habilita la detección de eventos, Laravel encontrará y registrará automáticamente tus eventos y oyentes escaneando el directorio "),s("code",[e._v("Listeners")]),e._v(" de tu aplicación. Además, todos los eventos definidos explícitamente listados en el "),s("code",[e._v("EventServiceProvider")]),e._v(" seguirán registrados.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Laravel encuentra los listeners de eventos mediante el escaneo de las clases listener usando reflexión. Cuando Laravel encuentra algun método de clase listener que empieza por "),t("code",[this._v("handle")]),this._v(", Laravel registrará dichos métodos como listeners de eventos para el evento que está escrito en la firma del método:")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("PodcastProcessed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("SendPodcastProcessedNotification")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n    * Handle the given event.\n    *\n    * @param  \\App\\Events\\PodcastProcessed\n    * @return void\n    */")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("handle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("PodcastProcessed "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("La detección de eventos está deshabilitada de forma predeterminada, pero puedes habilitarla sobreescribiendo el método "),t("code",[this._v("shouldDiscoverEvents")]),this._v(" del "),t("code",[this._v("EventServiceProvider")]),this._v(" de tu aplicación:")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n* Determine if events and listeners should be automatically discovered.\n*\n* @return bool\n*/")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("shouldDiscoverEvents")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("return")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean constant"}},[e._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Por defecto, se escanearán todos los oyentes dentro del directorio "),t("code",[this._v("Listeners")]),this._v(" de tu aplicación. Si deseas definir directorios adicionales para analizar, puedes sobreescribir el método "),t("code",[this._v("discoverEventsWithin")]),this._v(" en tu "),t("code",[this._v("EventServiceProvider")]),this._v(":")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n* Get the listener directories that should be used to discover events.\n*\n* @return array\n*/")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("protected")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("discoverEventsWithin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("return")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$this")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),s("span",{pre:!0,attrs:{class:"token property"}},[e._v("app")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[e._v("'Listeners'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("En producción, es probable que no desees que el framework analice todos tus oyentes en cada petición. Por lo tanto, durante tu proceso de despliegue, debes ejecutar el comando Artisan "),t("code",[this._v("event:cache")]),this._v(" para almacenar en caché un manifiesto de todos los eventos y oyentes de tu aplicación. Este manifiesto será utilizado por el framework para acelerar el proceso de registro de eventos. El comando "),t("code",[this._v("event:clear")]),this._v(" puede ser usado para destruir la caché.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),t("p",[this._v("El comando "),t("code",[this._v("event:list")]),this._v(" puede ser usado para mostrar una lista de todos los eventos y oyentes registrados por tu aplicación.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("a",{attrs:{name:"defining-events"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"definiendo-eventos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#definiendo-eventos","aria-hidden":"true"}},[this._v("#")]),this._v(" Definiendo eventos")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[e._v("<?php")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("namespace")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Events")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Order")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("Illuminate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("SerializesModels")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("OrderShipped")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("SerializesModels")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$order")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n    * Create a new event instance.\n    *\n    * @param  \\App\\Order  $order\n    * @return void\n    */")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("__construct")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Order "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$order")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$this")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),s("span",{pre:!0,attrs:{class:"token property"}},[e._v("order")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$order")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Como puedes ver, esta clase de evento no contiene lógica. Es un contenedor para la instancia "),t("code",[this._v("Order")]),this._v(" que se compró. El trait "),t("code",[this._v("SerializesModels")]),this._v(" utilizado por el evento serializará con elegancia cualquier modelo Eloquent si el objeto del evento se serializa utilizando la función de PHP "),t("code",[this._v("serialize")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("a",{attrs:{name:"defining-listeners"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"definiendo-oyentes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#definiendo-oyentes","aria-hidden":"true"}},[this._v("#")]),this._v(" Definiendo oyentes")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[e._v("A continuación, echemos un vistazo al oyente de nuestro evento de ejemplo. Los oyentes de eventos reciben la instancia de evento en su método "),s("code",[e._v("handle")]),e._v(". El comando "),s("code",[e._v("event:generate")]),e._v(" importará automáticamente la clase de evento adecuada y declarará el tipo de evento en el método "),s("code",[e._v("handle")]),e._v(". Dentro del método "),s("code",[e._v("handle")]),e._v(", puedes realizar las acciones necesarias para responder al evento:")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[e._v("<?php")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("namespace")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Listeners")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("OrderShipped")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("SendShipmentNotification")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n    * Create the event listener.\n    *\n    * @return void\n    */")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("__construct")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n    * Handle the event.\n    *\n    * @param  \\App\\Events\\OrderShipped  $event\n    * @return void\n    */")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("handle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("OrderShipped "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Access the order using $event->order...")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"deteniendo-la-propagacion-de-un-evento"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deteniendo-la-propagacion-de-un-evento","aria-hidden":"true"}},[this._v("#")]),this._v(" Deteniendo la propagación de un evento")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("A veces, es posible que desees detener la propagación de un evento a otros oyentes. Puede hacerlo devolviendo "),t("code",[this._v("false")]),this._v(" desde el método"),t("code",[this._v("handle")]),this._v(" de tu oyente.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("a",{attrs:{name:"queued-event-listeners"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"oyentes-de-eventos-de-cola"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#oyentes-de-eventos-de-cola","aria-hidden":"true"}},[this._v("#")]),this._v(" Oyentes de Eventos de Cola")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Para especificar que un oyente debe estar en cola, agrega la interfaz "),t("code",[this._v("ShouldQueue")]),this._v(" a la clase de oyente. Los oyentes generados por el comando de Artisan "),t("code",[this._v("event:generate")]),this._v(" ya tienen esta interfaz importada en el espacio de nombres actual, por lo que puedes usarla inmediatamente:")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[e._v("<?php")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("namespace")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Listeners")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("OrderShipped")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("Illuminate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Contracts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("ShouldQueue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("SendShipmentNotification")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("implements")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ShouldQueue")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"personalizando-la-conexion-de-la-cola-y-el-nombre-de-la-cola"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#personalizando-la-conexion-de-la-cola-y-el-nombre-de-la-cola","aria-hidden":"true"}},[this._v("#")]),this._v(" Personalizando la conexión de la cola y el nombre de la cola")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Si deseas personalizar la conexión de cola, el nombre de la cola o el tiempo de demora de la cola de un oyente de eventos, puedes definir las propiedades "),t("code",[this._v("$connection")]),this._v(", "),t("code",[this._v("$queue")]),this._v(" o "),t("code",[this._v("$delay")]),this._v(" en tu clase de oyente:")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[e._v("<?php")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("namespace")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Listeners")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("OrderShipped")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("Illuminate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Contracts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("ShouldQueue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("SendShipmentNotification")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("implements")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ShouldQueue")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n    * The name of the connection the job should be sent to.\n    *\n    * @var string|null\n    */")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$connection")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[e._v("'sqs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n    * The name of the queue the job should be sent to.\n    *\n    * @var string|null\n    */")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$queue")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[e._v("'listeners'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n    * The time (seconds) before the job should be processed.\n    *\n    * @var int\n    */")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$delay")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("60")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"cola-condicional-de-listeners"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cola-condicional-de-listeners","aria-hidden":"true"}},[this._v("#")]),this._v(" Cola condicional de listeners")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Algunas veces, necesitarás determinar si un listener debe ser agregado a una cola en base a datos que sólo están disponibles en tiempo de ejecución. Para lograr esto, un método "),t("code",[this._v("shouldQueue")]),this._v(" puede ser agregar a un listener para determinar si el listener debe ser agregado a una cola y ejecutado de forma sincronica:")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[e._v("<?php")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("namespace")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Listeners")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("OrderPlaced")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("Illuminate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Contracts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("ShouldQueue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("RewardGiftCard")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("implements")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ShouldQueue")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n    * Reward a gift card to the customer.\n    *\n    * @param  \\App\\Events\\OrderPlaced  $event\n    * @return void\n    */")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("handle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("OrderPlaced "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n    * Determine whether the listener should be queued.\n    *\n    * @param  \\App\\Events\\OrderPlaced  $event\n    * @return bool\n    */")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("shouldQueue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("OrderPlaced "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("return")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$event")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),s("span",{pre:!0,attrs:{class:"token property"}},[e._v("order")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),s("span",{pre:!0,attrs:{class:"token property"}},[e._v("subtotal")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("5000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("a",{attrs:{name:"manually-accessing-the-queue"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"accediendo-manualmente-a-la-cola"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#accediendo-manualmente-a-la-cola","aria-hidden":"true"}},[this._v("#")]),this._v(" Accediendo manualmente a la cola")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Si necesitas acceder manualmente a los métodos "),t("code",[this._v("delete")]),this._v(" y"),t("code",[this._v("release")]),this._v(" de la cola de trabajo subyacente del oyente, puedes hacerlo utilizando el trait "),t("code",[this._v("Illuminate\\Queue\\InteractsWithQueue")]),this._v(". Este trait se importa de forma predeterminada en los oyentes generados y proporciona acceso a estos métodos:")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[e._v("<?php")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("namespace")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Listeners")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("OrderShipped")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("Illuminate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("InteractsWithQueue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("Illuminate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Contracts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("ShouldQueue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("SendShipmentNotification")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("implements")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ShouldQueue")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("InteractsWithQueue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n        * Handle the event.\n        *\n        * @param  \\App\\Events\\OrderShipped  $event\n        * @return void\n        */")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("handle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("OrderShipped "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("if")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean constant"}},[e._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$this")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("release")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("30")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("a",{attrs:{name:"handling-failed-jobs"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"manejo-de-trabajos-fallidos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#manejo-de-trabajos-fallidos","aria-hidden":"true"}},[this._v("#")]),this._v(" Manejo de trabajos fallidos")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("A veces, tus oyentes de eventos en cola pueden fallar. Si el oyente en cola supera el número máximo de intentos según lo define tu trabajador de cola, se llamará al método "),t("code",[this._v("failed")]),this._v(" en tu oyente. El método "),t("code",[this._v("failed")]),this._v(" recibe la instancia del evento y la excepción que causó el error:")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[e._v("<?php")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("namespace")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Listeners")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("OrderShipped")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("Illuminate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("InteractsWithQueue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("Illuminate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Contracts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("ShouldQueue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("SendShipmentNotification")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("implements")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ShouldQueue")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("InteractsWithQueue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n    * Handle the event.\n    *\n    * @param  \\App\\Events\\OrderShipped  $event\n    * @return void\n    */")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("handle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("OrderShipped "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n    * Handle a job failure.\n    *\n    * @param  \\App\\Events\\OrderShipped  $event\n    * @param  \\Exception  $exception\n    * @return void\n    */")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("failed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("OrderShipped "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$exception")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("a",{attrs:{name:"dispatching-events"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"despachando-eventos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#despachando-eventos","aria-hidden":"true"}},[this._v("#")]),this._v(" Despachando eventos")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Para enviar un evento, puedes pasar una instancia del evento a la función de ayuda (helper) "),t("code",[this._v("event")]),this._v(". El helper enviará el evento a todos tus oyentes registrados. Dado que el helper "),t("code",[this._v("event")]),this._v(" está disponible globalmente, puedes llamarlo desde cualquier lugar de tu aplicación:")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[e._v("<?php")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("namespace")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Controllers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Order")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("OrderShipped")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Controllers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Controller")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("OrderController")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("extends")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Controller")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n    * Ship the given order.\n    *\n    * @param  int  $orderId\n    * @return Response\n    */")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("ship")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$orderId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$order")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" Order"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("findOrFail")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$orderId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Order shipment logic...")]),e._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("OrderShipped")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$order")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("a",{attrs:{name:"event-subscribers"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"suscriptores-de-eventos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#suscriptores-de-eventos","aria-hidden":"true"}},[this._v("#")]),this._v(" Suscriptores de eventos")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("a",{attrs:{name:"writing-event-subscribers"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"escribiendo-suscriptores-de-eventos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#escribiendo-suscriptores-de-eventos","aria-hidden":"true"}},[this._v("#")]),this._v(" Escribiendo suscriptores de eventos")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Los suscriptores de eventos son clases que pueden suscribirse a múltiples eventos dentro de la misma clase, lo que te permite definir varios manejadores de eventos dentro de una sola clase. Los suscriptores deben definir un método "),t("code",[this._v("subscribe")]),this._v(", al que se le pasará una instancia de despachador de eventos. Puedes llamar al método "),t("code",[this._v("listen")]),this._v(" en el despachador dado para registrar los oyentes de eventos:")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[e._v("<?php")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("namespace")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Listeners")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("UserEventSubscriber")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n    * Handle user login events.\n    */")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("handleUserLogin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n    * Handle user logout events.\n    */")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("handleUserLogout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n    * Register the listeners for the subscriber.\n    *\n    * @param  \\Illuminate\\Events\\Dispatcher  $events\n    */")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("subscribe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$events")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$events")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("listen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[e._v("'Illuminate\\Auth\\Events\\Login'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[e._v("'App\\Listeners\\UserEventSubscriber@handleUserLogin'")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$events")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("listen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[e._v("'Illuminate\\Auth\\Events\\Logout'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[e._v("'App\\Listeners\\UserEventSubscriber@handleUserLogout'")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("a",{attrs:{name:"registering-event-subscribers"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"registrando-suscriptores-de-eventos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#registrando-suscriptores-de-eventos","aria-hidden":"true"}},[this._v("#")]),this._v(" Registrando suscriptores de eventos")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Después de escribir el suscriptor, estás listo para registrarlo con el despachador de eventos. Puede registrar suscriptores usando la propiedad "),t("code",[this._v("$subscribe")]),this._v(" en el "),t("code",[this._v("EventServiceProvider")]),this._v(". Por ejemplo, vamos a agregar el "),t("code",[this._v("UserEventSubscriber")]),this._v(" a la lista:")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[e._v("<?php")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("namespace")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Providers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("use")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[e._v("Illuminate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Foundation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Support"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("Providers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("EventServiceProvider")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("as")]),e._v(" ServiceProvider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("EventServiceProvider")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("extends")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ServiceProvider")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n    * The event listener mappings for the application.\n    *\n    * @var array\n    */")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("protected")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$listen")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n    * The subscriber classes to register.\n    *\n    * @var array\n    */")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("protected")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$subscribe")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[e._v("'App\\Listeners\\UserEventSubscriber'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])])}],!1,null,null,null);t.default=n.exports}}]);