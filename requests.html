<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Documentación de Laravel en español</title>
    <meta name="description" content="Traducción no oficial de la documentación de Laravel 6.* al español">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran:300,700|Miriam+Libre">
  <link rel="icon" href="/favicon.png">
  <meta property="og:url" content="https://documentacion-laravel.com">
  <meta property="og:type" content="article">
  <meta property="og:title" content="Documentación de Laravel en español">
  <meta property="og:description" content="Traducción no oficial de la documentación de Laravel 6.* al español">
  <meta property="og:image" content="https://documentacion-laravel.com/social-preview.jpeg">
    
    <link rel="preload" href="/assets/css/0.styles.ff366ceb.css" as="style"><link rel="preload" href="/assets/js/app.f1508e78.js" as="script"><link rel="preload" href="/assets/js/2.86610498.js" as="script"><link rel="preload" href="/assets/js/70.9f776687.js" as="script"><link rel="prefetch" href="/assets/js/10.831d177d.js"><link rel="prefetch" href="/assets/js/11.8ee540bd.js"><link rel="prefetch" href="/assets/js/12.8b656d4d.js"><link rel="prefetch" href="/assets/js/13.34da1c7a.js"><link rel="prefetch" href="/assets/js/14.954ff24c.js"><link rel="prefetch" href="/assets/js/15.c6c6d689.js"><link rel="prefetch" href="/assets/js/16.3a634102.js"><link rel="prefetch" href="/assets/js/17.545f156a.js"><link rel="prefetch" href="/assets/js/18.d37e69ea.js"><link rel="prefetch" href="/assets/js/19.db9d31da.js"><link rel="prefetch" href="/assets/js/20.d01ea404.js"><link rel="prefetch" href="/assets/js/21.b6ee1579.js"><link rel="prefetch" href="/assets/js/22.cd1153f2.js"><link rel="prefetch" href="/assets/js/23.43e3d937.js"><link rel="prefetch" href="/assets/js/24.fa6a412f.js"><link rel="prefetch" href="/assets/js/25.cf4c4495.js"><link rel="prefetch" href="/assets/js/26.ee61c83f.js"><link rel="prefetch" href="/assets/js/27.6a160641.js"><link rel="prefetch" href="/assets/js/28.dd97b987.js"><link rel="prefetch" href="/assets/js/29.c560e8aa.js"><link rel="prefetch" href="/assets/js/3.74868434.js"><link rel="prefetch" href="/assets/js/30.1304b381.js"><link rel="prefetch" href="/assets/js/31.e6722508.js"><link rel="prefetch" href="/assets/js/32.0aedbd2e.js"><link rel="prefetch" href="/assets/js/33.7ce1b232.js"><link rel="prefetch" href="/assets/js/34.83133cc6.js"><link rel="prefetch" href="/assets/js/35.6203fb57.js"><link rel="prefetch" href="/assets/js/36.d0d130a4.js"><link rel="prefetch" href="/assets/js/37.c785135b.js"><link rel="prefetch" href="/assets/js/38.1ab25f3d.js"><link rel="prefetch" href="/assets/js/39.753eeffd.js"><link rel="prefetch" href="/assets/js/4.3b174146.js"><link rel="prefetch" href="/assets/js/40.1b50c446.js"><link rel="prefetch" href="/assets/js/41.31651baa.js"><link rel="prefetch" href="/assets/js/42.8bb5d8f1.js"><link rel="prefetch" href="/assets/js/43.62f725ab.js"><link rel="prefetch" href="/assets/js/44.76e982de.js"><link rel="prefetch" href="/assets/js/45.fb88182c.js"><link rel="prefetch" href="/assets/js/46.effe643e.js"><link rel="prefetch" href="/assets/js/47.2ddbde1f.js"><link rel="prefetch" href="/assets/js/48.3fc22ba1.js"><link rel="prefetch" href="/assets/js/49.adca7022.js"><link rel="prefetch" href="/assets/js/5.a3e524a6.js"><link rel="prefetch" href="/assets/js/50.542ae39e.js"><link rel="prefetch" href="/assets/js/51.c54e2893.js"><link rel="prefetch" href="/assets/js/52.04dd472d.js"><link rel="prefetch" href="/assets/js/53.1363aa72.js"><link rel="prefetch" href="/assets/js/54.e7373c5d.js"><link rel="prefetch" href="/assets/js/55.d4ff9151.js"><link rel="prefetch" href="/assets/js/56.2a55b0e7.js"><link rel="prefetch" href="/assets/js/57.5be330b3.js"><link rel="prefetch" href="/assets/js/58.76be4c50.js"><link rel="prefetch" href="/assets/js/59.d6200e8d.js"><link rel="prefetch" href="/assets/js/6.02fe479e.js"><link rel="prefetch" href="/assets/js/60.407409c4.js"><link rel="prefetch" href="/assets/js/61.3b887207.js"><link rel="prefetch" href="/assets/js/62.cb1f734a.js"><link rel="prefetch" href="/assets/js/63.6ac72389.js"><link rel="prefetch" href="/assets/js/64.71b83c12.js"><link rel="prefetch" href="/assets/js/65.4400947d.js"><link rel="prefetch" href="/assets/js/66.f21fddc5.js"><link rel="prefetch" href="/assets/js/67.69d9246f.js"><link rel="prefetch" href="/assets/js/68.2e86eea9.js"><link rel="prefetch" href="/assets/js/69.c205f58d.js"><link rel="prefetch" href="/assets/js/7.7b0749cd.js"><link rel="prefetch" href="/assets/js/71.eb39b2ef.js"><link rel="prefetch" href="/assets/js/72.7602cb06.js"><link rel="prefetch" href="/assets/js/73.c73b45ad.js"><link rel="prefetch" href="/assets/js/74.c0cc6fbe.js"><link rel="prefetch" href="/assets/js/75.7fe34d80.js"><link rel="prefetch" href="/assets/js/76.6fa35f4a.js"><link rel="prefetch" href="/assets/js/77.0ee792de.js"><link rel="prefetch" href="/assets/js/78.35a6ffcd.js"><link rel="prefetch" href="/assets/js/79.2f060e09.js"><link rel="prefetch" href="/assets/js/8.1710c533.js"><link rel="prefetch" href="/assets/js/80.52cdd809.js"><link rel="prefetch" href="/assets/js/81.2077c1f3.js"><link rel="prefetch" href="/assets/js/82.fc54ca1b.js"><link rel="prefetch" href="/assets/js/83.c84170c6.js"><link rel="prefetch" href="/assets/js/84.ba86ea18.js"><link rel="prefetch" href="/assets/js/85.f48641bd.js"><link rel="prefetch" href="/assets/js/86.b328674e.js"><link rel="prefetch" href="/assets/js/9.d90e4ccd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ff366ceb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Documentación de Laravel en español</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div><div class="nav-item"><a href="/documentation.html" class="nav-link">Índice</a></div><div class="nav-item"><a href="/glossary.html" class="nav-link">Glosario</a></div><div class="nav-item"><a href="/credits.html" class="nav-link">Créditos</a></div><div class="nav-item"><a href="/descargar-documentacion.html" class="nav-link">Descargar documentación</a></div><div class="nav-item"><a href="https://v5.documentacion-laravel.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Documentación de Laravel 5.8
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://styde.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Styde
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div><div class="nav-item"><a href="/documentation.html" class="nav-link">Índice</a></div><div class="nav-item"><a href="/glossary.html" class="nav-link">Glosario</a></div><div class="nav-item"><a href="/credits.html" class="nav-link">Créditos</a></div><div class="nav-item"><a href="/descargar-documentacion.html" class="nav-link">Descargar documentación</a></div><div class="nav-item"><a href="https://v5.documentacion-laravel.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Documentación de Laravel 5.8
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://styde.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Styde
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Primeros pasos</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Conceptos de arquitectura</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Fundamentos</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/routing.html" class="sidebar-link">Rutas</a></li><li><a href="/middleware.html" class="sidebar-link">Middleware</a></li><li><a href="/csrf.html" class="sidebar-link">Protección CSRF</a></li><li><a href="/controllers.html" class="sidebar-link">Controladores</a></li><li><a href="/requests.html" class="active sidebar-link">Solicitudes HTTP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/requests.html#accediendo-a-la-solicitud" class="sidebar-link">Accediendo a la solicitud</a></li><li class="sidebar-sub-header"><a href="/requests.html#recorte-y-normalizacion-de-entrada" class="sidebar-link">Recorte y normalización de entrada</a></li><li class="sidebar-sub-header"><a href="/requests.html#obteniendo-datos-ingresados" class="sidebar-link">Obteniendo datos ingresados</a></li><li class="sidebar-sub-header"><a href="/requests.html#archivos" class="sidebar-link">Archivos</a></li><li class="sidebar-sub-header"><a href="/requests.html#configurando-proxies-de-confianza" class="sidebar-link">Configurando proxies de confianza</a></li></ul></li><li><a href="/responses.html" class="sidebar-link">Respuestas HTTP</a></li><li><a href="/views.html" class="sidebar-link">Vistas</a></li><li><a href="/urls.html" class="sidebar-link">Generación de URLs</a></li><li><a href="/session.html" class="sidebar-link">Sesión HTTP</a></li><li><a href="/validation.html" class="sidebar-link">Validación</a></li><li><a href="/errors.html" class="sidebar-link">Manejo de errores</a></li><li><a href="/logging.html" class="sidebar-link">Registro (Logging)</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Frontend</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Seguridad</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Profundizando</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Bases de datos</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ORM Eloquent</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Pruebas</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Paquetes oficiales</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div><h1 id="solicitudes-http"><a class="header-anchor" href="#solicitudes-http">#</a> Solicitudes HTTP</h1> <ul><li><a href="#accessing-the-request">Accediendo a la solicitud</a> <ul><li><a href="#request-path-and-method">Ruta y método de la solicitud</a></li> <li><a href="#psr7-requests">Solicitudes PSR-7</a></li></ul></li> <li><a href="#input-trimming-and-normalization">Recorte y normalización de entrada</a></li> <li><a href="#retrieving-input">Obteniendo datos ingresados</a> <ul><li><a href="#old-input">Datos antiguos</a></li> <li><a href="#cookies">Cookies</a></li></ul></li> <li><a href="#files">Archivos</a> <ul><li><a href="#retrieving-uploaded-files">Obteniendo archivos cargados</a></li> <li><a href="#storing-uploaded-files">Almacenando archivos cargados</a></li></ul></li> <li><a href="#configuring-trusted-proxies">Configurando proxies de confianza</a></li></ul> <p><a name="accessing-the-request"></a></p> <h2 id="accediendo-a-la-solicitud"><a class="header-anchor" href="#accediendo-a-la-solicitud">#</a> Accediendo a la solicitud</h2> <p>Para obtener una instancia de la solicitud HTTP actual por medio de una inyección de dependencia, deberías poner la referencia de la clase <code>Illuminate\Http\Request</code> en tu método de controlador. La instancia de la solicitud entrante automáticamente será inyectada por el <router-link to="/container.html">contenedor de servicio</router-link>:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Store a new user.
    *
    * @param  Request  $request
    * @return Response
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">store</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$name</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">input</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><h4 id="inyeccion-de-dependencias-y-parametros-de-rutas"><a class="header-anchor" href="#inyeccion-de-dependencias-y-parametros-de-rutas">#</a> Inyección de dependencias Y parametros de rutas</h4> <p>Si tu método de controlador también está esperando la entrada de un parámetro de ruta deberías listar tus parámetros de ruta después de tus otras dependencias. Por ejemplo, si tu ruta es definida como sigue:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user/{id}'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'UserController@update'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Todavía puedes poner la referencia de la clase <code>Illuminate\Http\Request</code> y acceder a tu parámetro de ruta <code>id</code> al definir tu método de controlador como sigue:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Update the specified user.
    *
    * @param  Request  $request
    * @param  string  $id
    * @return Response
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><h4 id="accediendo-la-solicitud-a-traves-de-closures-de-rutas"><a class="header-anchor" href="#accediendo-la-solicitud-a-traves-de-closures-de-rutas">#</a> Accediendo la solicitud a través de closures de rutas</h4> <p>También puedes poner la referencia de la clase <code>Illuminate\Http\Request</code> en una Closure de ruta. El contenedor de servicio automáticamente inyectará la solicitud entrante dentro de la Closure que es ejecutada:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>

Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="request-path-and-method"></a></p> <h3 id="ruta-y-metodo-de-la-solicitud"><a class="header-anchor" href="#ruta-y-metodo-de-la-solicitud">#</a> Ruta y método de la solicitud</h3> <p>La instancia <code>Illuminate\Http\Request</code> proporciona una variedad de métodos para examinar la solicitud HTTP para tu aplicación y extiende la clase <code>Symfony\Component\HttpFoundation\Request</code>. Discutiremos algunos de los métodos más importantes a continuación.</p> <h4 id="obteniendo-la-ruta-de-la-solicitud"><a class="header-anchor" href="#obteniendo-la-ruta-de-la-solicitud">#</a> Obteniendo la ruta de la solicitud</h4> <p>El método <code>path</code> devuelve la información de ruta de la solicitud. Así, si la solicitud entrante tiene como destino <code>http://domain.com/foo/bar</code>, el método <code>path</code> devolverá <code>foo/bar</code>:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token variable">$uri</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>El método <code>is</code> te permite verificar que la ruta de la solicitud entrante coincide con un patrón dado. Puedes usar el caracter <code>*</code> para especificar que cualquier cadena puede coincidir al momento de utilizar este método:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'admin/*'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="obteniendo-la-url-de-la-solicitud"><a class="header-anchor" href="#obteniendo-la-url-de-la-solicitud">#</a> Obteniendo la URL de la solicitud</h4> <p>Para obtener la URL completa de la solicitud entrante puedes usar los métodos <code>url</code> o <code>fullUrl</code>. El método <code>url</code> devolverá la URL sin la cadena de la consulta, mientras que el método <code>fullUrl</code> si la incluye:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token comment">// Without Query String...</span>
<span class="token variable">$url</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// With Query String...</span>
<span class="token variable">$url</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">fullUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="obteniendo-el-metodo-de-la-solicitud"><a class="header-anchor" href="#obteniendo-el-metodo-de-la-solicitud">#</a> Obteniendo el método de la solicitud</h4> <p>El método <code>method</code> devolverá el verbo HTTP de la solicitud. Puedes usar el método <code>isMethod</code> para verificar que el verbo HTTP coincida con una cadena dada:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token variable">$method</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">isMethod</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'post'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="psr7-requests"></a></p> <h3 id="solicitudes-psr-7"><a class="header-anchor" href="#solicitudes-psr-7">#</a> Solicitudes PSR-7</h3> <p>El <a href="https://www.php-fig.org/psr/psr-7/" target="_blank" rel="noopener noreferrer">estándar PSR-7<OutboundLink></OutboundLink></a> específica interfaces para mensajes HTTP, incluyendo solicitudes y respuestas. Si prefieres obtener una instancia de una solicitud PSR-7 en lugar de una solicitud de Laravel, primero necesitarás instalar algunos paquetes de terceros. Laravel usa el componente <em>Symfony HTTP Message Bridge</em> para convertir solicitudes y respuestas típicas de Laravel en implementaciones compatibles con PSR-7:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code>composer <span class="token keyword">require</span> symfony<span class="token operator">/</span>psr<span class="token operator">-</span>http<span class="token operator">-</span>message<span class="token operator">-</span>bridge
composer <span class="token keyword">require</span> zendframework<span class="token operator">/</span>zend<span class="token operator">-</span>diactoros
</code></pre></div><p>Una vez que has instalado estos paquetes, puedes obtener una solicitud PSR-7 al colocar la referencia  de la interface de solicitud en tu Closure de ruta o método de controlador:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token keyword">use</span> <span class="token package">Psr<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Message<span class="token punctuation">\</span>ServerRequestInterface</span><span class="token punctuation">;</span>

Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>ServerRequestInterface <span class="token variable">$request</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Si devuelves una instancia de respuesta PSR-7 desde una ruta o controlador, automáticamente será convertida de vuelta a una instancia de respuesta de Laravel y será mostrada por el framework.</p></div></div><p><a name="input-trimming-and-normalization"></a></p> <h2 id="recorte-y-normalizacion-de-entrada"><a href="#recorte-y-normalizacion-de-entrada" class="header-anchor">#</a> Recorte y normalización de entrada</h2> <p>De forma predeterminada, Laravel incluye los middleware <code>TrimStrings</code> y <code>ConvertEmptyStringsToNull</code> en la pila de middleware global de tu aplicación. Estos middleware son listados en la pila por la clase <code>App\Http\Kernel</code>. Estos middleware automáticamente recortarán todos los campos de cadena entrantes en la solicitud, así como convertirán cualquier campo de cadena vacío a <code>null</code>. Esto permite que no tengas que preocuparte sobre estos asuntos de normalización en tus rutas y controladores.</p> <p>Si prefieres deshabilitar este comportamiento, puedes remover los dos middleware de tu pila de middleware de tu aplicación al eliminarlos de la propiedad <code>$middleware</code> de tu clase <code>App\Http\Kernel</code>.</p> <p><a name="retrieving-input"></a></p> <h2 id="obteniendo-datos-ingresados"><a href="#obteniendo-datos-ingresados" class="header-anchor">#</a> Obteniendo datos ingresados</h2> <h4 id="obteniendo-todos-los-datos-ingresados"><a href="#obteniendo-todos-los-datos-ingresados" class="header-anchor">#</a> Obteniendo todos los datos ingresados</h4> <p>También puedes obtener todos los datos ingresados en forma de arreglo usando el método <code>all</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$input</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="obteniendo-el-valor-de-un-campo"><a href="#obteniendo-el-valor-de-un-campo" class="header-anchor">#</a> Obteniendo el valor de un campo</h4> <p>Usando unos pocos métodos básicos, puedes acceder a todos los datos ingresados por el usuario desde la instancia <code>Illuminate\Http\Request</code> sin preocuparte por cuál verbo HTTP fue usado por la solicitud. Sin importar el verbo HTTP, el método <code>input</code> puede ser usado para obtener la entrada de usuario:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$name</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">input</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Puedes pasar un valor predeterminado como segundo argumento del método <code>input</code>. Este valor será devuelto si el valor de entrada solicitado no está presente en la solicitud:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$name</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">input</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Sally'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Al momento de trabajar con formularios que contienen arreglos de campos, usa notación de &quot;punto&quot; para acceder a estos arreglos:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$name</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">input</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'products.0.name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$names</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">input</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'products.*.name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Puedes llamar al método <code>input</code> sin ningún argumento para retornar todos los valores como arreglo asociativo:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$input</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
</code></pre></div><h4 id="obteniendo-datos-desde-la-cadena-de-consulta"><a href="#obteniendo-datos-desde-la-cadena-de-consulta" class="header-anchor">#</a> Obteniendo datos desde la cadena de consulta</h4> <p>Mientras el método <code>input</code> obtiene valores de la porción de datos de la solicitud completa (incluyendo la cadena de consulta), el método <code>query</code> solamente obtendrá valores de la cadena de consulta:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$name</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Si los datos de los valores de la cadena de consulta solicitada no están presentes, el segundo argumento de este método será devuelto:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$name</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Helen'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Puedes ejecutar el método <code>query</code> sin ningún argumento con el propósito de obtener todos los valores de la cadena de consulta como un arreglo asociativo:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$query</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="recuperando-datos-por-medio-de-propiedades-dinamicas"><a href="#recuperando-datos-por-medio-de-propiedades-dinamicas" class="header-anchor">#</a> Recuperando datos por medio de propiedades dinámicas</h4> <p>También puedes acceder a los datos ingresados por el usuario usando propiedades dinámicas en la instancia <code>Illuminate\Http\Request</code>. Por ejemplo, si uno de los formularios de tu aplicación contiene un campo <code>name</code>, puedes acceder al valor del campo de la siguiente forma:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$name</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">name</span><span class="token punctuation">;</span>
</code></pre></div><p>Al momento de usar propiedades dinámicas, Laravel primero buscará por el valor del parámetro en la porción de datos de la solicitud. Si no está presente, buscará el campo en los parámetros de ruta.</p> <h4 id="obteniendo-valores-json"><a href="#obteniendo-valores-json" class="header-anchor">#</a> Obteniendo valores JSON</h4> <p>Al momento de enviar solicitudes JSON a tu aplicación, puedes acceder a los datos JSON por medio del método <code>input</code> al tiempo que el encabezado <code>Content-Type</code> de la solicitud sea establecido apropiadamente a <code>application/json</code>. Incluso puedes usar sintaxis &quot;.&quot; para buscar adentro de los arreglos JSON:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$name</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">input</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user.name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="obteniendo-una-porcion-de-los-datos-ingresados"><a href="#obteniendo-una-porcion-de-los-datos-ingresados" class="header-anchor">#</a> Obteniendo una porción de los datos ingresados</h4> <p>Si necesitas obtener un subconjunto de los datos ingresados, puedes usar los métodos <code>only</code> y <code>except</code>. Ambos métodos aceptan un solo arreglo o una lista dinámica de argumentos:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$input</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'username'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'password'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$input</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'username'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'password'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$input</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">except</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'credit_card'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$input</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">except</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'credit_card'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>El método <code>only</code> devuelve todos los pares clave / valor que solicites; sin embargo, no devolverá pares clave / valor que no estén presentes en la solicitud.</p></div> <h4 id="determinando-si-un-valor-ingresado-esta-presente"><a href="#determinando-si-un-valor-ingresado-esta-presente" class="header-anchor">#</a> Determinando si un Valor ingresado está presente</h4> <p>Deberías usar el método <code>has</code> para determinar si un valor está presente en la solicitud. El método <code>has</code> devuelve <code>true</code> si el valor está presente en la solicitud:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Cuando es dado un arreglo, el método <code>has</code> determinará si todos los valores especificados están presentes:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'email'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Si prefieres determinar si un valor está presente en la solicitud y no esté vacío, puedes usar el método <code>filled</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">filled</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="old-input"></a></p> <h3 id="entrada-antigua"><a href="#entrada-antigua" class="header-anchor">#</a> Entrada antigua</h3> <p>Laravel permite que mantengas los datos de una solicitud durante la próxima solicitud. Esta característica es útil particularmente para volver a llenar los formularios después de detectar errores de validación. Sin embargo, si estás usando las <a href="/validation.html">características de validación</a> incluidas con Laravel, es poco probable que necesites usar manualmente estos métodos, ya que algunas de las facilidades de validación integradas con Laravel las ejecutarán automáticamente.</p> <h4 id="enviando-datos-a-la-sesion"><a href="#enviando-datos-a-la-sesion" class="header-anchor">#</a> Enviando datos a la sesión</h4> <p>El método <code>flash</code> en la clase <code>Illuminate\Http\Request</code> enviará los datos ingresados a la <a href="/session.html">sesión</a> para que así estén disponibles durante la próxima solicitud realizada por el usuario:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">flash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>También puedes usar los métodos <code>flashOnly</code> y <code>flashExcept</code> para enviar un subconjunto de datos de la solicitud a la sesión. Estos métodos son útiles para mantener información sensible tales como contraseñas fuera de la sesión:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">flashOnly</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'username'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'email'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">flashExcept</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'password'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="enviando-datos-y-redirigir"><a href="#enviando-datos-y-redirigir" class="header-anchor">#</a> Enviando datos y redirigir</h4> <p>Ya que con frecuencia querrás enviar datos a la sesión y luego redirigir a la página anterior puedes encadenar datos a una redirección usando el método <code>withInput</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'form'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'form'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withInput</span><span class="token punctuation">(</span>
    <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">except</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'password'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="obteniendo-datos-antiguos"><a href="#obteniendo-datos-antiguos" class="header-anchor">#</a> Obteniendo datos antiguos</h4> <p>Para obtener los datos de la sesión anterior, usa el método <code>old</code> en la instancia <code>Request</code>. El método old extrarerá los datos de la solicitiud y <a href="/session.html">sesión</a> anterior:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$username</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">old</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'username'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Laravel también proporciona un helper global <code>old</code>. Si estás mostrando datos antiguos dentro de una <a href="/blade.html">plantilla Blade</a>, es más conveniente usar el helper <code>old</code>. Si no existen datos antiguos para el campo dado, será devuelto <code>null</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token double-quoted-string string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token double-quoted-string string">&quot;username&quot;</span> value<span class="token operator">=</span><span class="token double-quoted-string string">&quot;{{ old('username') }}&quot;</span><span class="token operator">&gt;</span>
</code></pre></div><p><a name="cookies"></a></p> <h3 id="cookies"><a href="#cookies" class="header-anchor">#</a> Cookies</h3> <h4 id="obteniendo-cookies-de-las-solicitudes"><a href="#obteniendo-cookies-de-las-solicitudes" class="header-anchor">#</a> Obteniendo cookies de las solicitudes</h4> <p>Todos las cookies creados por el framework Laravel son encriptadas y firmadas con un código de autenticación, significa que serán consideradas no válidas si han sido cambiados por el cliente. Para obtener el valor de una cookie de la solicitud, usa el método <code>cookie</code> en una instancia de <code>Illuminate\Http\Request</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$value</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Alternativamente, puedes usar la clase facade <code>Cookie</code> para acceder a los valores de las cookies:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Cookie</span><span class="token punctuation">;</span>

<span class="token variable">$value</span> <span class="token operator">=</span> Cookie<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="adjuntando-cokies-a-las-respuestas"><a href="#adjuntando-cokies-a-las-respuestas" class="header-anchor">#</a> Adjuntando cokies a las respuestas</h4> <p>Puedes adjuntar una cookie a una instancia saliente de <code>Illuminate\Http\Response</code> usando el método <code>cookie</code>. Debes pasar el nombre, valor y el número de minutos en los cuales dicha cookie debería ser válida:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Hello World'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">cookie</span><span class="token punctuation">(</span>
    <span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">,</span> <span class="token variable">$minutes</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>El método <code>cookie</code> también acepta unos cuantos argumentos los cuales son usados con menos frecuencia. Generalmente, estos argumentos tienen el mismo propósito y significan lo mismo que los argumentos que deberían ser dados al método <a href="https://secure.php.net/manual/en/function.setcookie.php" target="_blank" rel="noopener noreferrer">setcookie<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> nativo de PHP:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Hello World'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">cookie</span><span class="token punctuation">(</span>
    <span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">,</span> <span class="token variable">$minutes</span><span class="token punctuation">,</span> <span class="token variable">$path</span><span class="token punctuation">,</span> <span class="token variable">$domain</span><span class="token punctuation">,</span> <span class="token variable">$secure</span><span class="token punctuation">,</span> <span class="token variable">$httpOnly</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Alternativamente, puedes usar la clase facade <code>Cookie</code> para &quot;encolar&quot; cookies para adjuntar a la respuesta saliente de tu aplicación. El método <code>queue</code> acepta una instancia <code>Cookie</code> o los argumentos necesarios para crear una instancia <code>Cookie</code>. Estas cookies serán adjuntadas a la respuesta saliente antes de que sea enviada al navegador:</p> <div class="language-php extra-class"><pre class="language-php"><code>Cookie<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">queue</span><span class="token punctuation">(</span>Cookie<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">,</span> <span class="token variable">$minutes</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Cookie<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">,</span> <span class="token variable">$minutes</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="generando-instancias-cookie"><a href="#generando-instancias-cookie" class="header-anchor">#</a> Generando instancias cookie</h4> <p>Si prefieres generar una instancia <code>Symfony\Component\HttpFoundation\Cookie</code> que pueda ser dada a una instancia de respuesta en un momento posterior, puedes usar el helper global <code>cookie</code>. Este cookie no será enviado de regreso al cliente a menos que sea adjuntado a una instancia de respuesta:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$cookie</span> <span class="token operator">=</span> <span class="token function">cookie</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">,</span> <span class="token variable">$minutes</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Hello World'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token variable">$cookie</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="files"></a></p> <h2 id="archivos"><a href="#archivos" class="header-anchor">#</a> Archivos</h2> <p><a name="retrieving-uploaded-files"></a></p> <h3 id="obteniendo-archivos-cargados"><a href="#obteniendo-archivos-cargados" class="header-anchor">#</a> Obteniendo archivos cargados</h3> <p>Puedes acceder los archivos cargados de una instancia <code>Illuminate\Http\Request</code> usando el método <code>file</code> o usando propiedades dinámicas. El método <code>file</code> devuelve una instancia de la clase <code>Illuminate\Http\UploadedFile</code>, la cual extiende la clase <code>SplFileInfo</code> de PHP y proporciona una variedad de métodos para interactuar con el archivo:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$file</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'photo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$file</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">photo</span><span class="token punctuation">;</span>
</code></pre></div><p>Puedes determinar si un archivo está presente en la solicitud usando el método <code>hasFile</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasFile</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'photo'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="validando-cargas-exitosas"><a href="#validando-cargas-exitosas" class="header-anchor">#</a> Validando cargas exitosas</h4> <p>Además de verficar si el archivo está presente, puedes verificar que no ocurrieron problemas cargando el archivo por medio del método <code>isValid</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'photo'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">isValid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="rutas-y-extensiones-de-archivo"><a href="#rutas-y-extensiones-de-archivo" class="header-anchor">#</a> Rutas y extensiones de archivo</h4> <p>La clase <code>UploadedFile</code> también contiene métodos para acceder a la ruta completa del archivo y su extensión. El método <code>extension</code> intentará adivinar la extensión del archivo en base a su contenido. Esta extensión puede ser diferente de la extensión que fue suministrada por el cliente:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$path</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">photo</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$extension</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">photo</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="otros-metodos-de-archivo"><a href="#otros-metodos-de-archivo" class="header-anchor">#</a> Otros métodos de archivo</h4> <p>Hay una variedad de otros métodos disponibles en instancias <code>UploadedFile</code>. Revisa la <a href="https://api.symfony.com/3.0/Symfony/Component/HttpFoundation/File/UploadedFile.html" target="_blank" rel="noopener noreferrer">documentación de la API para la clase<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> para más información concerniente a estos métodos.</p> <p><a name="storing-uploaded-files"></a></p> <h3 id="almacenando-archivos-cargados"><a href="#almacenando-archivos-cargados" class="header-anchor">#</a> Almacenando archivos cargados</h3> <p>Para almacenar un archivo cargado, típicamente usarás uno de tus <a href="/filesystem.html">sistemas de archivos</a> configurados. La clase <code>UploadedFile</code> tiene un método <code>store</code> el cual moverá un archivo cargado a uno de tus discos, el cual puede ser una ubicación de tu sistema de archivo local o incluso una ubicación de almacenamiento en la nube como Amazon S3.</p> <p>El método <code>store</code> acepta la ruta dónde el archivo debería ser almacenado relativa al directorio raíz configurado del sistema de archivo. Esta ruta no debería contener un nombre de archivo, ya que un ID único será generado automáticamente para servir como el nombre del archivo.</p> <p>El método <code>store</code> acepta un segundo argumento opcional para el nombre del disco que debería ser usado para almacenar el archivo. El método devolverá la ruta relativa del archivo al directorio raíz del disco:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$path</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">photo</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'images'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$path</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">photo</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'images'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'s3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Si no quieres que un nombre de archivo sea generado automáticamente, puedes usar el método <code>storeAs</code>, el cual acepta la ruta, el nombre de archivo y el nombre del disco como sus argumentos:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$path</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">photo</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">storeAs</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'images'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'filename.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$path</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">photo</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">storeAs</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'images'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'filename.jpg'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'s3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="configuring-trusted-proxies"></a></p> <h2 id="configurando-proxies-de-confianza"><a href="#configurando-proxies-de-confianza" class="header-anchor">#</a> Configurando proxies de confianza</h2> <p>Al momento de administrar tus aplicaciones detrás de un balanceador de carga que finaliza los certificados TLS / SSL, puedes notar que algunas veces tu aplicación no genera enlaces HTTPS. Típicamente esto es debido a que el tráfico de tu aplicación está siendo dirigido desde tu balanceador de carga por el puerto 80 y no sabe que debería generar enlaces seguros.</p> <p>Para solucionar esto, puedes usar el middleware <code>App\Http\Middleware\TrustProxies</code> que es incluido en tu aplicación de Laravel, el cual permite que rápidamente personalices los balanceadores de carga o proxies que deberían ser de confianza en tu aplicación. Tus proxies de confianza deberían ser listados como un arreglo en la propiedad <code>$proxies</code> de este middleware. Además de la configuración de los proxies de confianza, puedes configurar los encabezados que están siendo enviados por tu proxy con información sobre la solicitud original:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Middleware</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Fideloper<span class="token punctuation">\</span>Proxy<span class="token punctuation">\</span>TrustProxies</span> <span class="token keyword">as</span> Middleware<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">TrustProxies</span> <span class="token keyword">extends</span> <span class="token class-name">Middleware</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * The trusted proxies for this application.
    *
    * @var array
    */</span>
    <span class="token keyword">protected</span> <span class="token variable">$proxies</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'192.168.1.1'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'192.168.1.2'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">/**
    * The headers that should be used to detect proxies.
    *
    * @var string
    */</span>
    <span class="token keyword">protected</span> <span class="token variable">$headers</span> <span class="token operator">=</span> Request<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">HEADER_X_FORWARDED_ALL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Si estás usando Balanceo de Carga Elástico AWS, tu valor <code>$headers</code> debe ser <code>Request::HEADER_X_FORWARDED_AWS_ELB</code>. Para más información de las constantes que pueden ser usadas en la propiedad <code>$headers</code>, revisa la documentación de Symfony sobre <a href="https://symfony.com/doc/current/deployment/proxies.html" target="_blank" rel="noopener noreferrer">proxies de confianza<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <h4 id="confiar-en-todos-los-proxies"><a href="#confiar-en-todos-los-proxies" class="header-anchor">#</a> Confiar en todos los proxies</h4> <p>Si estás usando Amazon AWS u otro proveedor de balanceador de carga de la &quot;nube&quot;, no puedes saber las direcciones IP de tus balanceadores reales. En este caso, puedes usar <code>**</code> para confiar en todos los proxies:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* The trusted proxies for this application.
*
* @var array
*/</span>
<span class="token keyword">protected</span> <span class="token variable">$proxies</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'**'</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/controllers.html" class="prev">Controladores</a></span> <span class="next"><a href="/responses.html">Respuestas HTTP</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f1508e78.js" defer></script><script src="/assets/js/2.86610498.js" defer></script><script src="/assets/js/70.9f776687.js" defer></script>
  </body>
</html>
