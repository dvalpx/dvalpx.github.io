<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VuePress</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.cf5cbaa5.css" as="style"><link rel="preload" href="/assets/js/app.d18a7e07.js" as="script"><link rel="preload" href="/assets/js/2.8e5ca9eb.js" as="script"><link rel="preload" href="/assets/js/65.1d583bc8.js" as="script"><link rel="prefetch" href="/assets/js/10.9d8f190d.js"><link rel="prefetch" href="/assets/js/11.713069e3.js"><link rel="prefetch" href="/assets/js/12.8798d21a.js"><link rel="prefetch" href="/assets/js/13.332045e2.js"><link rel="prefetch" href="/assets/js/14.bda55a54.js"><link rel="prefetch" href="/assets/js/15.1c16c325.js"><link rel="prefetch" href="/assets/js/16.bbe1ecdf.js"><link rel="prefetch" href="/assets/js/17.068bc26e.js"><link rel="prefetch" href="/assets/js/18.d6a2ed70.js"><link rel="prefetch" href="/assets/js/19.9bbd4323.js"><link rel="prefetch" href="/assets/js/20.4a827d15.js"><link rel="prefetch" href="/assets/js/21.932f5ef3.js"><link rel="prefetch" href="/assets/js/22.47d672e1.js"><link rel="prefetch" href="/assets/js/23.63218e36.js"><link rel="prefetch" href="/assets/js/24.2c933036.js"><link rel="prefetch" href="/assets/js/25.2a9ac4af.js"><link rel="prefetch" href="/assets/js/26.b15e2a59.js"><link rel="prefetch" href="/assets/js/27.be0ff65a.js"><link rel="prefetch" href="/assets/js/28.aadf08f5.js"><link rel="prefetch" href="/assets/js/29.0e4ec215.js"><link rel="prefetch" href="/assets/js/3.0101ea7c.js"><link rel="prefetch" href="/assets/js/30.831305bd.js"><link rel="prefetch" href="/assets/js/31.afb33274.js"><link rel="prefetch" href="/assets/js/32.68089cf5.js"><link rel="prefetch" href="/assets/js/33.f7ed913e.js"><link rel="prefetch" href="/assets/js/34.4cddf81d.js"><link rel="prefetch" href="/assets/js/35.afbc7954.js"><link rel="prefetch" href="/assets/js/36.bc235e6d.js"><link rel="prefetch" href="/assets/js/37.cec3e2cc.js"><link rel="prefetch" href="/assets/js/38.177ed69f.js"><link rel="prefetch" href="/assets/js/39.e7e298ee.js"><link rel="prefetch" href="/assets/js/4.a2109108.js"><link rel="prefetch" href="/assets/js/40.f621f4d5.js"><link rel="prefetch" href="/assets/js/41.0994bd46.js"><link rel="prefetch" href="/assets/js/42.4debbf07.js"><link rel="prefetch" href="/assets/js/43.d73341a8.js"><link rel="prefetch" href="/assets/js/44.302a1d16.js"><link rel="prefetch" href="/assets/js/45.df1e9e80.js"><link rel="prefetch" href="/assets/js/46.5da4e78a.js"><link rel="prefetch" href="/assets/js/47.af4aeb70.js"><link rel="prefetch" href="/assets/js/48.1c6cac1a.js"><link rel="prefetch" href="/assets/js/49.73c1cc2c.js"><link rel="prefetch" href="/assets/js/5.886a8536.js"><link rel="prefetch" href="/assets/js/50.3653355c.js"><link rel="prefetch" href="/assets/js/51.f48454e2.js"><link rel="prefetch" href="/assets/js/52.fe1537a5.js"><link rel="prefetch" href="/assets/js/53.f53a4944.js"><link rel="prefetch" href="/assets/js/54.77ad79c0.js"><link rel="prefetch" href="/assets/js/55.a7dce0c8.js"><link rel="prefetch" href="/assets/js/56.2a61f71d.js"><link rel="prefetch" href="/assets/js/57.f958f8cd.js"><link rel="prefetch" href="/assets/js/58.c91cb9c9.js"><link rel="prefetch" href="/assets/js/59.726c9fa1.js"><link rel="prefetch" href="/assets/js/6.f7c00904.js"><link rel="prefetch" href="/assets/js/60.3f31de0a.js"><link rel="prefetch" href="/assets/js/61.7ad03400.js"><link rel="prefetch" href="/assets/js/62.7d96c317.js"><link rel="prefetch" href="/assets/js/63.98a36806.js"><link rel="prefetch" href="/assets/js/64.e0445065.js"><link rel="prefetch" href="/assets/js/66.1ca08e1b.js"><link rel="prefetch" href="/assets/js/67.a6af6188.js"><link rel="prefetch" href="/assets/js/68.47b5f882.js"><link rel="prefetch" href="/assets/js/69.215666c5.js"><link rel="prefetch" href="/assets/js/7.9e06b9d3.js"><link rel="prefetch" href="/assets/js/70.2c9f04a2.js"><link rel="prefetch" href="/assets/js/71.1eb0d68f.js"><link rel="prefetch" href="/assets/js/72.28241988.js"><link rel="prefetch" href="/assets/js/73.fc04168a.js"><link rel="prefetch" href="/assets/js/74.3d242ebf.js"><link rel="prefetch" href="/assets/js/75.3cda21e9.js"><link rel="prefetch" href="/assets/js/76.785cfa56.js"><link rel="prefetch" href="/assets/js/77.25a3cfe2.js"><link rel="prefetch" href="/assets/js/78.a8f98b1a.js"><link rel="prefetch" href="/assets/js/79.c51ea229.js"><link rel="prefetch" href="/assets/js/8.f19546fb.js"><link rel="prefetch" href="/assets/js/80.21189343.js"><link rel="prefetch" href="/assets/js/9.e056c469.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cf5cbaa5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><div><h1 id="respuestas-http"><a class="header-anchor" href="#respuestas-http">#</a> Respuestas HTTP</h1> <ul><li><a href="#creating-responses">Creando respuestas</a> <ul><li><a href="#attaching-headers-to-responses">Adjuntando encabezados a las respuestas</a></li> <li><a href="#attaching-cookies-to-responses">Adjuntando cookies a las respuestas</a></li> <li><a href="#cookies-and-encryption">Cookies y Encriptación</a></li></ul></li> <li><a href="#redirects">Redirecciones</a> <ul><li><a href="#redirecting-named-routes">Redireccionando a rutas nombradas</a></li> <li><a href="#redirecting-controller-actions">Redireccionando a acciones de controlador</a></li> <li><a href="#redirecting-external-domains">Redireccionando a dominios externos</a></li> <li><a href="#redirecting-with-flashed-session-data">Redireccionando con los datos de una sesión movida rápidamente</a></li></ul></li> <li><a href="#other-response-types">Otros tipos de respuestas</a> <ul><li><a href="#view-responses">Respuestas de vista</a></li> <li><a href="#json-responses">Respuestas JSON</a></li> <li><a href="#file-downloads">Descargas de archivo</a></li> <li><a href="#file-responses">Respuestas de archivo</a></li></ul></li> <li><a href="#response-macros">Macros de respuesta</a></li></ul> <p><a name="creating-responses"></a></p> <h2 id="creando-respuestas"><a class="header-anchor" href="#creando-respuestas">#</a> Creando respuestas</h2> <h4 id="cadenas-y-arreglos"><a class="header-anchor" href="#cadenas-y-arreglos">#</a> Cadenas y arreglos</h4> <p>Todas las rutas y controladores deberían devolver una respuesta para ser enviada de regreso al navegador del usuario. Laravel proporciona diferentes formas de devolver respuestas. La respuesta más básica es devolver una cadena desde una ruta o controlador. El framework convertirá la cadena en una respuesta HTTP completa:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token single-quoted-string string">'Hello World'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Además de devolver cadenas desde tus rutas y controladores, también puedes devolver arreglos. El framework convertirá automáticamente el arreglo en una respuesta JSON:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>¿Sabías que también puedes devolver <RouterLink to="/eloquent-collections.html">colecciones de Eloquent</RouterLink> desde tus rutas o controladores? Estas serán convertidas automáticamente a JSON. ¡Inténtalo!</p></div></div><h4 id="objetos-de-respuesta"><a href="#objetos-de-respuesta" class="header-anchor">#</a> Objetos de respuesta</h4> <p>Típicamente, no sólo estarás devolviendo cadenas básicas o arreglos desde tus acciones de ruta. Además, estarás devolviendo instancias <code>Illuminate\Http\Response</code> completas o <a href="/views.html">vistas</a>.</p> <p>Devolver una instancia <code>Response</code> completa te permite personalizar el código de estado y los encabezados HTTP de la respuesta. Una instancia <code>Response</code> hereda desde la clase <code>Symfony\Component\HttpFoundation\Response</code>, la cual proporciona una variedad de métodos para construir respuestas HTTP:</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'home'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Hello World'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
                  <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'text/plain'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="attaching-headers-to-responses"></a></p> <h4 id="adjuntando-encabezados-a-las-respuestas"><a href="#adjuntando-encabezados-a-las-respuestas" class="header-anchor">#</a> Adjuntando encabezados a las respuestas</h4> <p>Ten en cuenta que la mayoría de los métodos de respuestas son encadenables, permitiendo la construcción fluida de instancias de respuesta. Por ejemplo, puedes usar el método <code>header</code> para agregar una serie de encabezados para la respuesta antes de enviarla de regreso al usuario:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token variable">$content</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token variable">$type</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'X-Header-One'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Header Value'</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'X-Header-Two'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Header Value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>O, puedes usar el método <code>withHeaders</code> para especificar un arreglo de encabezados para que sean agregados a la respuesta:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token variable">$content</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withHeaders</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token single-quoted-string string">'Content-Type'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$type</span><span class="token punctuation">,</span>
                <span class="token single-quoted-string string">'X-Header-One'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Header Value'</span><span class="token punctuation">,</span>
                <span class="token single-quoted-string string">'X-Header-Two'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Header Value'</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="middleware-para-control-de-cache"><a href="#middleware-para-control-de-cache" class="header-anchor">#</a> Middleware para control de caché</h5> <p>Laravel incluye un middleware <code>cache.headers</code>, el cual puede ser usado para rápidamente establecer el encabezado <code>Cache-Control</code> para un grupo de rutas. Si <code>etag</code> está especificado en la lista de directivas, un hash MD5 del contenido de la respuesta será automáticamente establecido como identificador del ETag:</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'cache.headers:public;max_age=2628000;etag'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'privacy'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'terms'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="attaching-cookies-to-responses"></a></p> <h4 id="adjuntando-cookies-a-las-respuestas"><a href="#adjuntando-cookies-a-las-respuestas" class="header-anchor">#</a> Adjuntando cookies a las respuestas</h4> <p>El método <code>cookie</code> en las instancias de respuesta permite que adjuntes fácilmente cookies a la respuesta. Por ejemplo, puedes usar el método <code>cookie</code> para generar una cookie y adjuntarla fluidamente a la instancia de respuesta, de la siguiente manera:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token variable">$content</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token variable">$type</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">,</span> <span class="token variable">$minutes</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>El método <code>cookie</code> también acepta unos cuantos argumentos los cuales son usados con menos frecuencia. Generalmente, estos argumentos tienen el mismo propósito y significado que los argumentos que serán dados al método nativo de PHP <a href="https://secure.php.net/manual/en/function.setcookie.php" target="_blank" rel="noopener noreferrer">setcookie<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">,</span> <span class="token variable">$minutes</span><span class="token punctuation">,</span> <span class="token variable">$path</span><span class="token punctuation">,</span> <span class="token variable">$domain</span><span class="token punctuation">,</span> <span class="token variable">$secure</span><span class="token punctuation">,</span> <span class="token variable">$httpOnly</span><span class="token punctuation">)</span>
</code></pre></div><p>Alternativamente, puedes usar la clase facade <code>Cookie</code> para agregar cookies a la cola y adjuntarlas a la respuesta saliente de tu aplicación. El método <code>queue</code> acepta una instancia <code>Cookie</code> o los argumentos que se necesitan para crear una instancia <code>Cookie</code>. Estas cookies serán adjuntadas a la respuesta saliente antes de que sea enviada al navegador:</p> <div class="language-php extra-class"><pre class="language-php"><code>Cookie<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">queue</span><span class="token punctuation">(</span>Cookie<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">,</span> <span class="token variable">$minutes</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Cookie<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">,</span> <span class="token variable">$minutes</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="cookies-and-encryption"></a></p> <h4 id="cookies-y-encriptacion"><a href="#cookies-y-encriptacion" class="header-anchor">#</a> Cookies y Encriptación</h4> <p>De forma predeterminada, todos los cookies generados por Laravel son encriptados y firmados de modo que no puedan ser modificados o leídos por el cliente. Si prefieres deshabilitar la encriptación para un subconjunto de cookies generados por tu aplicación, puedes usar la propiedad <code>$except</code> del middleware <code>App\Http\Middleware\EncryptCookies</code>, el cual es localizado en el directorio <code>app/Http/Middleware</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* The names of the cookies that should not be encrypted.
*
* @var array
*/</span>
<span class="token keyword">protected</span> <span class="token variable">$except</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'cookie_name'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="redirects"></a></p> <h2 id="redirecciones"><a href="#redirecciones" class="header-anchor">#</a> Redirecciones</h2> <p>Las respuestas redireccionadas son instancias de la clase <code>Illuminate\Http\RedirectResponse</code> y contienen los encabezados apropiados que se necesitan para redireccionar al usuario a otra URL. Hay varias formas de generar una instancia <code>RedirectResponse</code>. El método más simple es usar el helper global <code>redirect</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'dashboard'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'home/dashboard'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Algunas veces podrás querer redireccionar al usuario a su página previa, tal como cuando un formulario enviado no es válido. Puedes hacer eso usando la función helper global <code>back</code>. Ya que esta característica utiliza la <a href="/session.html">sesión</a>, asegúrate de que la ruta llamando a la función <code>back</code> está usando el grupo de middleware <code>web</code> o tiene todos los middleware de sesión aplicados:</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user/profile'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Validate the request...</span>

    <span class="token keyword">return</span> <span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="redirecting-named-routes"></a></p> <h3 id="redireccionando-a-rutas-nombradas"><a href="#redireccionando-a-rutas-nombradas" class="header-anchor">#</a> Redireccionando a rutas nombradas</h3> <p>Cuando ejecutas el helper <code>redirect</code> sin parámetros, una instancia de <code>Illuminate\Routing\Redirector</code> es devuelta, permitiendo que ejecutes cualquier método en la instancia <code>Redirector</code>. Por ejemplo, para generar una <code>RedirectResponse</code> para una ruta nombrada, puedes usar el método <code>route</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'login'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Si tu ruta tiene parámetros, puedes pasarlos como segundo argumento del método <code>route</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// For a route with the following URI: profile/{id}</span>

<span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'profile'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="rellenando-parametros-a-traves-de-modelos-de-eloquent"><a href="#rellenando-parametros-a-traves-de-modelos-de-eloquent" class="header-anchor">#</a> Rellenando parámetros a través de modelos de Eloquent</h4> <p>Si estás redireccionando a una ruta con un parámetro &quot;ID&quot; que está siendo rellenado desde un modelo Eloquent, puedes pasar el modelo como tal. El ID será extraído automáticamente:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// For a route with the following URI: profile/{id}</span>

<span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'profile'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token variable">$user</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Si prefieres personalizar el valor que es colocado en el parámetro de la ruta, deberías sobrescribir el método <code>getRouteKey</code> en tu modelo Eloquent:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Get the value of the model's route key.
*
* @return mixed
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">getRouteKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">slug</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="redirecting-controller-actions"></a></p> <h3 id="redireccionando-a-acciones-de-controlador"><a href="#redireccionando-a-acciones-de-controlador" class="header-anchor">#</a> Redireccionando a acciones de controlador</h3> <p>También puedes generar redirecciones a <a href="/controllers.html">acciones de controlador</a>. Para hacer eso, pasa el controlador y nombre de acción al método <code>action</code>. Recuerda, no necesitas especificar el espacio de nombres completo del controlador ya que el <code>RouteServiceProvider</code> de Laravel establecerá el espacio de nombres del controlador base:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'HomeController@index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Si tu ruta de controlador requiere parámetros, puedes pasarlos como segundo argumento del método <code>action</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">action</span><span class="token punctuation">(</span>
    <span class="token single-quoted-string string">'UserController@profile'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="redirecting-external-domains"></a></p> <h3 id="redireccionando-a-dominios-externos"><a href="#redireccionando-a-dominios-externos" class="header-anchor">#</a> Redireccionando a dominios externos</h3> <p>Algunas veces puedes necesitar redireccionar a un dominio fuera de tu aplicación. Puedes hacer eso ejecutando el método <code>away</code>, el cual crea una instancia de <code>RedirectResponse</code> sin alguna codificación, validación o verificación de URL adicional:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">away</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'https://www.google.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="redirecting-with-flashed-session-data"></a></p> <h3 id="redireccionando-con-datos-de-sesion"><a href="#redireccionando-con-datos-de-sesion" class="header-anchor">#</a> Redireccionando con datos de sesión</h3> <p>El redireccionamiento a una nueva URL y <a href="/session.html#flash-data">el envío de los datos de la sesión</a> son hechos usualmente al mismo tiempo. Típicamente, esto es hecho después de ejecutar una acción exitosamente cuando mueves rápidamente un mensaje de éxito de la sesión. Por conveniencia, puedes crear una instancia <code>RedirectResponse</code> y mover rápidamente los datos de la sesión en un solo encadenamiento de método fluido:</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user/profile'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Update the user's profile...</span>

    <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'dashboard'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'status'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Profile updated!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Después de que el usuario es redireccionado, puedes mostrar el mensaje enviado desde la <a href="/session.html">sesión</a>. Por ejemplo, usando la <a href="/blade.html">sintaxis de Blade</a>:</p> <div class="language-php extra-class"><pre class="language-php"><code>@<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'status'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;alert alert-success&quot;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">session</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'status'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
@<span class="token keyword">endif</span>
</code></pre></div><p><a name="other-response-types"></a></p> <h2 id="otros-tipos-de-respuesta"><a href="#otros-tipos-de-respuesta" class="header-anchor">#</a> Otros tipos de respuesta</h2> <p>El helper <code>response</code> puede ser usado para generar otros tipos de instancias de respuesta. Cuando el helper <code>response</code> es ejecutado sin argumentos, una implementación del <a href="/contracts.html">contrato</a> <code>Illuminate\Contracts\Routing\ResponseFactory</code> es devuelta. Este contrato proporciona varios métodos útiles para generar respuestas.</p> <p><a name="view-responses"></a></p> <h3 id="respuestas-de-vista"><a href="#respuestas-de-vista" class="header-anchor">#</a> Respuestas de vista</h3> <p>Si necesitas control sobre el estado y encabezados de la respuesta pero también necesitas devolver una <a href="/views.html">vista</a> como el contenido de la respuesta, deberías usar el método <code>view</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'hello'</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token variable">$type</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Ciertamente, si no necesitas pasar un código de estado HTTP o encabezados personalizados, deberías usar la función helper global <code>view</code>.</p> <p><a name="json-responses"></a></p> <h3 id="respuestas-json"><a href="#respuestas-json" class="header-anchor">#</a> Respuestas JSON</h3> <p>El método <code>json</code> establecerá automáticamente el encabezado <code>Content-Type</code> a <code>application/json</code>, al igual que convertirá el arreglo dado a JSON usando la función de PHP <code>json_encode</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Abigail'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'state'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'CA'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Si prefieres crear una respuesta JSONP, puedes usar el método <code>json</code> en combinación con el método <code>withCallback</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Abigail'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'state'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'CA'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withCallback</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">input</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'callback'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="file-downloads"></a></p> <h3 id="descargas-de-archivo"><a href="#descargas-de-archivo" class="header-anchor">#</a> Descargas de archivo</h3> <p>El método <code>download</code> puede ser usado para generar una respuesta que fuerza al navegador del usuario a descargar el archivo a una ruta dada. El método <code>download</code> acepta un nombre de archivo como segundo argumento del método, el cual determinará el nombre del archivo que es visto por el usuario que esté descargando el archivo. Finalmente, puedes pasar un arreglo de encabezados HTTP como tercer argumento del método:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">download</span><span class="token punctuation">(</span><span class="token variable">$pathToFile</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">download</span><span class="token punctuation">(</span><span class="token variable">$pathToFile</span><span class="token punctuation">,</span> <span class="token variable">$name</span><span class="token punctuation">,</span> <span class="token variable">$headers</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">download</span><span class="token punctuation">(</span><span class="token variable">$pathToFile</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">deleteFileAfterSend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">Nota</p> <p>Symfony HttpFoundation, la cual administra las descargas de archivo, requiere que el archivo que esté siendo descargado tenga un nombre de archivo ASCII.</p></div> <h4 id="descargas-en-streaming"><a href="#descargas-en-streaming" class="header-anchor">#</a> Descargas en streaming</h4> <p>Algunas veces puedes querer convertir la cadena de respuesta de una operación dada a una respuesta descargable sin tener que escribir los contenidos de la operación al disco. Puedes usar el método <code>streamDownload</code> en este escenario. Este método acepta un callback, un nombre de archivo y un arreglo opcional de encabezados como argumentos:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">streamDownload</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> GitHub<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">api</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'repo'</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">contents</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">readme</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'laravel'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'laravel'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'contents'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'laravel-readme.md'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="file-responses"></a></p> <h3 id="respuestas-de-archivo"><a href="#respuestas-de-archivo" class="header-anchor">#</a> Respuestas de archivo</h3> <p>El método <code>file</code> puede ser usado para mostrar un archivo, tal como una imagen o PDF, directamente en el navegador del usuario en lugar de iniciar una descarga. Este método acepta la ruta del archivo como su primer argumento y un arreglo de encabezados como segundo argumento:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token variable">$pathToFile</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token variable">$pathToFile</span><span class="token punctuation">,</span> <span class="token variable">$headers</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="response-macros"></a></p> <h2 id="macros-de-respuesta"><a href="#macros-de-respuesta" class="header-anchor">#</a> Macros de respuesta</h2> <p>Si prefieres definir una respuesta personalizada que puedas volver a usar en múltiples rutas y controladores, puedes usar el método <code>macro</code> de la clase facade <code>Response</code>. Por ejemplo, desde un método <code>boot</code> del <a href="/providers.html">proveedor de servicio</a></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Providers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Response</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>ServiceProvider</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ResponseMacroServiceProvider</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceProvider</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Register the application's response macros.
    *
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Response<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">macro</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'caps'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> Response<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>La función <code>macro</code> acepta un nombre como su primer argumento y una Closure como segundo. La Closure de la macro será ejecutada al momento de ejecutar el nombre de la macro desde una implementación <code>ResponseFactory</code> o el helper <code>response</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">caps</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d18a7e07.js" defer></script><script src="/assets/js/2.8e5ca9eb.js" defer></script><script src="/assets/js/65.1d583bc8.js" defer></script>
  </body>
</html>
