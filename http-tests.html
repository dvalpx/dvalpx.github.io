<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Documentación de Laravel en español</title>
    <meta name="description" content="Traducción no oficial de la documentación de Laravel 6.* al español">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran:300,700|Miriam+Libre">
  <link rel="icon" href="/favicon.png">
  <meta property="og:url" content="https://documentacion-laravel.com">
  <meta property="og:type" content="article">
  <meta property="og:title" content="Documentación de Laravel en español">
  <meta property="og:description" content="Traducción no oficial de la documentación de Laravel 6.* al español">
  <meta property="og:image" content="https://documentacion-laravel.com/social-preview.jpeg">
    
    <link rel="preload" href="/assets/css/0.styles.ff366ceb.css" as="style"><link rel="preload" href="/assets/js/app.4ceb28d1.js" as="script"><link rel="preload" href="/assets/js/2.86610498.js" as="script"><link rel="preload" href="/assets/js/7.7b0749cd.js" as="script"><link rel="prefetch" href="/assets/js/10.831d177d.js"><link rel="prefetch" href="/assets/js/11.8ee540bd.js"><link rel="prefetch" href="/assets/js/12.8b656d4d.js"><link rel="prefetch" href="/assets/js/13.34da1c7a.js"><link rel="prefetch" href="/assets/js/14.954ff24c.js"><link rel="prefetch" href="/assets/js/15.c6c6d689.js"><link rel="prefetch" href="/assets/js/16.ac50f6c8.js"><link rel="prefetch" href="/assets/js/17.545f156a.js"><link rel="prefetch" href="/assets/js/18.d37e69ea.js"><link rel="prefetch" href="/assets/js/19.db9d31da.js"><link rel="prefetch" href="/assets/js/20.d01ea404.js"><link rel="prefetch" href="/assets/js/21.b6ee1579.js"><link rel="prefetch" href="/assets/js/22.cd1153f2.js"><link rel="prefetch" href="/assets/js/23.43e3d937.js"><link rel="prefetch" href="/assets/js/24.fa6a412f.js"><link rel="prefetch" href="/assets/js/25.cf4c4495.js"><link rel="prefetch" href="/assets/js/26.ee61c83f.js"><link rel="prefetch" href="/assets/js/27.6a160641.js"><link rel="prefetch" href="/assets/js/28.dd97b987.js"><link rel="prefetch" href="/assets/js/29.c560e8aa.js"><link rel="prefetch" href="/assets/js/3.74868434.js"><link rel="prefetch" href="/assets/js/30.1304b381.js"><link rel="prefetch" href="/assets/js/31.e6722508.js"><link rel="prefetch" href="/assets/js/32.0aedbd2e.js"><link rel="prefetch" href="/assets/js/33.7ce1b232.js"><link rel="prefetch" href="/assets/js/34.83133cc6.js"><link rel="prefetch" href="/assets/js/35.6203fb57.js"><link rel="prefetch" href="/assets/js/36.bd344d2c.js"><link rel="prefetch" href="/assets/js/37.c785135b.js"><link rel="prefetch" href="/assets/js/38.1ab25f3d.js"><link rel="prefetch" href="/assets/js/39.753eeffd.js"><link rel="prefetch" href="/assets/js/4.3b174146.js"><link rel="prefetch" href="/assets/js/40.1b50c446.js"><link rel="prefetch" href="/assets/js/41.31651baa.js"><link rel="prefetch" href="/assets/js/42.8bb5d8f1.js"><link rel="prefetch" href="/assets/js/43.29c61cc2.js"><link rel="prefetch" href="/assets/js/44.38963bd0.js"><link rel="prefetch" href="/assets/js/45.efb6bf60.js"><link rel="prefetch" href="/assets/js/46.a1362004.js"><link rel="prefetch" href="/assets/js/47.35e55fd4.js"><link rel="prefetch" href="/assets/js/48.fb5ab010.js"><link rel="prefetch" href="/assets/js/49.7bd3d0b8.js"><link rel="prefetch" href="/assets/js/5.a3e524a6.js"><link rel="prefetch" href="/assets/js/50.df983a59.js"><link rel="prefetch" href="/assets/js/51.2fc08e89.js"><link rel="prefetch" href="/assets/js/52.04dd472d.js"><link rel="prefetch" href="/assets/js/53.46674d0f.js"><link rel="prefetch" href="/assets/js/54.e7373c5d.js"><link rel="prefetch" href="/assets/js/55.5e41971b.js"><link rel="prefetch" href="/assets/js/56.2a55b0e7.js"><link rel="prefetch" href="/assets/js/57.5be330b3.js"><link rel="prefetch" href="/assets/js/58.76be4c50.js"><link rel="prefetch" href="/assets/js/59.d6200e8d.js"><link rel="prefetch" href="/assets/js/6.02fe479e.js"><link rel="prefetch" href="/assets/js/60.407409c4.js"><link rel="prefetch" href="/assets/js/61.3b887207.js"><link rel="prefetch" href="/assets/js/62.ac0a0f83.js"><link rel="prefetch" href="/assets/js/63.f2550d9b.js"><link rel="prefetch" href="/assets/js/64.e4f095e1.js"><link rel="prefetch" href="/assets/js/65.4400947d.js"><link rel="prefetch" href="/assets/js/66.f21fddc5.js"><link rel="prefetch" href="/assets/js/67.69d9246f.js"><link rel="prefetch" href="/assets/js/68.2e86eea9.js"><link rel="prefetch" href="/assets/js/69.c205f58d.js"><link rel="prefetch" href="/assets/js/70.9f776687.js"><link rel="prefetch" href="/assets/js/71.eb39b2ef.js"><link rel="prefetch" href="/assets/js/72.7602cb06.js"><link rel="prefetch" href="/assets/js/73.c73b45ad.js"><link rel="prefetch" href="/assets/js/74.c0cc6fbe.js"><link rel="prefetch" href="/assets/js/75.7fe34d80.js"><link rel="prefetch" href="/assets/js/76.6fa35f4a.js"><link rel="prefetch" href="/assets/js/77.0ee792de.js"><link rel="prefetch" href="/assets/js/78.35a6ffcd.js"><link rel="prefetch" href="/assets/js/79.2f060e09.js"><link rel="prefetch" href="/assets/js/8.1710c533.js"><link rel="prefetch" href="/assets/js/80.52cdd809.js"><link rel="prefetch" href="/assets/js/81.2077c1f3.js"><link rel="prefetch" href="/assets/js/82.fc54ca1b.js"><link rel="prefetch" href="/assets/js/83.c84170c6.js"><link rel="prefetch" href="/assets/js/84.ba86ea18.js"><link rel="prefetch" href="/assets/js/85.f48641bd.js"><link rel="prefetch" href="/assets/js/86.b328674e.js"><link rel="prefetch" href="/assets/js/9.d90e4ccd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ff366ceb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Documentación de Laravel en español</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div><div class="nav-item"><a href="/documentation.html" class="nav-link">Índice</a></div><div class="nav-item"><a href="/glossary.html" class="nav-link">Glosario</a></div><div class="nav-item"><a href="/credits.html" class="nav-link">Créditos</a></div><div class="nav-item"><a href="/descargar-documentacion.html" class="nav-link">Descargar documentación</a></div><div class="nav-item"><a href="https://v5.documentacion-laravel.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Documentación de Laravel 5.8
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://styde.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Styde
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div><div class="nav-item"><a href="/documentation.html" class="nav-link">Índice</a></div><div class="nav-item"><a href="/glossary.html" class="nav-link">Glosario</a></div><div class="nav-item"><a href="/credits.html" class="nav-link">Créditos</a></div><div class="nav-item"><a href="/descargar-documentacion.html" class="nav-link">Descargar documentación</a></div><div class="nav-item"><a href="https://v5.documentacion-laravel.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Documentación de Laravel 5.8
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://styde.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Styde
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Primeros pasos</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Conceptos de arquitectura</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Fundamentos</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Frontend</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Seguridad</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Profundizando</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Bases de datos</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ORM Eloquent</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Pruebas</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/testing.html" class="sidebar-link">Pruebas: Primeros Pasos</a></li><li><a href="/http-tests.html" class="active sidebar-link">Pruebas HTTP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/http-tests.html#introduccion" class="sidebar-link">Introducción</a></li><li class="sidebar-sub-header"><a href="/http-tests.html#sesion-y-autenticacion" class="sidebar-link">Sesión y autenticación</a></li><li class="sidebar-sub-header"><a href="/http-tests.html#probando-apis-json" class="sidebar-link">Probando APIs JSON</a></li><li class="sidebar-sub-header"><a href="/http-tests.html#probando-subidas-de-archivos" class="sidebar-link">Probando subidas de archivos</a></li><li class="sidebar-sub-header"><a href="/http-tests.html#aserciones-disponibles" class="sidebar-link">Aserciones disponibles</a></li></ul></li><li><a href="/console-tests.html" class="sidebar-link">Pruebas de consola</a></li><li><a href="/dusk.html" class="sidebar-link">Laravel Dusk</a></li><li><a href="/database-testing.html" class="sidebar-link">Pruebas de base de datos</a></li><li><a href="/mocking.html" class="sidebar-link">Mocking</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Paquetes oficiales</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div><h1 id="pruebas-http"><a class="header-anchor" href="#pruebas-http">#</a> Pruebas HTTP</h1> <ul><li><a href="#introduction">Introducción</a> <ul><li><a href="#customizing-request-headers">Personalizando encabezados de solicitud</a></li> <li><a href="#debugging-responses">Depurando respuestas</a></li></ul></li> <li><a href="#session-and-authentication">Sesión y autenticación</a></li> <li><a href="#testing-json-apis">Probando APIs JSON</a></li> <li><a href="#testing-file-uploads">Probando subidas de archivos</a></li> <li><a href="#available-assertions">Aserciones disponibles</a> <ul><li><a href="#response-assertions">Aserciones de respuesta</a></li> <li><a href="#authentication-assertions">Aserciones de autenticación</a></li></ul></li></ul> <p><a name="introduction"></a></p> <h2 id="introduccion"><a class="header-anchor" href="#introduccion">#</a> Introducción</h2> <p>Laravel proporciona una API muy fluida para hacer solicitudes HTTP a tu aplicación y examinar la salida. Por ejemplo, echemos un vistazo a la prueba definida a continuación:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">Tests<span class="token punctuation">\</span>Feature</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Tests<span class="token punctuation">\</span>TestCase</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Foundation<span class="token punctuation">\</span>Testing<span class="token punctuation">\</span>RefreshDatabase</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Foundation<span class="token punctuation">\</span>Testing<span class="token punctuation">\</span>WithoutMiddleware</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ExampleTest</span> <span class="token keyword">extends</span> <span class="token class-name">TestCase</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * A basic test example.
    *
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">testBasicTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertStatus</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>El método <code>get</code> simula una solicitud <code>GET</code> dentro de la aplicación, mientras que el método <code>assertStatus</code> comprueba que la respuesta devuelta debería tener el código de estado HTTP dado. Además de esta sencilla aserción, Laravel también contiene una variedad de aserciones para inspeccionar de la respuesta los encabezados, contenidos, estructura JSON y más.</p> <p><a name="customizing-request-headers"></a></p> <h3 id="personalizando-encabezados-de-solicitud"><a class="header-anchor" href="#personalizando-encabezados-de-solicitud">#</a> Personalizando encabezados de solicitud</h3> <p>Puedes usar el método <code>withHeaders</code> para personalzar los encabezados de la solicitud antes que sean enviados a la aplicación. Esto permitirá que agregues algunos encabezados personalizados de tu preferencia a la solicitud:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">class</span> <span class="token class-name">ExampleTest</span> <span class="token keyword">extends</span> <span class="token class-name">TestCase</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * A basic functional test example.
    *
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">testBasicExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withHeaders</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token single-quoted-string string">'X-Header'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Value'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'POST'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Sally'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$response</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertStatus</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertJson</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token single-quoted-string string">'created'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean constant">true</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>El middleware CSRF es automáticamente deshabilitado cuando se ejecutan las pruebas.</p></div></div><p><a name="debugging-responses"></a></p> <h3 id="depurando-respuestas"><a href="#depurando-respuestas" class="header-anchor">#</a> Depurando respuestas</h3> <p>Luego de hacer una solicitud de prueba a tu aplicación, los métodos <code>dump</code> y <code>dumpHeaders</code> pueden ser usados para examinar y depurar el contenido de la respuesta:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">Tests<span class="token punctuation">\</span>Feature</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Tests<span class="token punctuation">\</span>TestCase</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Foundation<span class="token punctuation">\</span>Testing<span class="token punctuation">\</span>RefreshDatabase</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Foundation<span class="token punctuation">\</span>Testing<span class="token punctuation">\</span>WithoutMiddleware</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ExampleTest</span> <span class="token keyword">extends</span> <span class="token class-name">TestCase</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * A basic test example.
    *
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">testBasicTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dumpHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dump</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p><a name="session-and-authentication"></a></p> <h2 id="sesion-y-autenticacion"><a href="#sesion-y-autenticacion" class="header-anchor">#</a> Sesión y autenticación</h2> <p>Laravel proporciona varias funciones helper para trabajar con la sesión durante las pruebas HTTP. Primero, puedes colocar los datos de la sesión en un arreglo dado usando el método <code>withSession</code>. Esto es útil para cargar la sesión con los datos antes de realizar una solicitud a tu aplicación:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">class</span> <span class="token class-name">ExampleTest</span> <span class="token keyword">extends</span> <span class="token class-name">TestCase</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">testApplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withSession</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'foo'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Un uso común de la sesión es para mantener el estado del usuario autenticado. El método helper <code>actingAs</code> proporciona una foma sencilla de autenticar un usuario dado como el usuario actual. Por ejemplo, podemos usar un <a href="/database-testing.html#writing-factories">model factory</a> para generar y autenticar un usuario:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ExampleTest</span> <span class="token keyword">extends</span> <span class="token class-name">TestCase</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">testApplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$user</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span>User<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">actingAs</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span>
                            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withSession</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'foo'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>También puedes especificar que &quot;guard&quot; debe ser usado para autenticar el usuario dado al pasar el nombre del guard como segundo argumento del método <code>actingAs</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">actingAs</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'api'</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="testing-json-apis"></a></p> <h2 id="probando-apis-json"><a href="#probando-apis-json" class="header-anchor">#</a> Probando APIs JSON</h2> <p>Laravel también proporciona varios helpers para probar APIs JSON y sus respuestas. Por ejemplo, los métodos <code>json</code>, <code>get</code>, <code>post</code>, <code>put</code>, <code>patch</code> y <code>delete</code> pueden ser usados para hacer solicitudes con varios verbos HTTP. También puedes pasar datos y encabezados fácilmente a estos métodos. Para empezar, vamos a escribir una prueba para hacer una solicitud <code>POST</code> a <code>/user</code> y comprobar que los datos esperados fueron devueltos:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">class</span> <span class="token class-name">ExampleTest</span> <span class="token keyword">extends</span> <span class="token class-name">TestCase</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * A basic functional test example.
    *
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">testBasicExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'POST'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Sally'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$response</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertStatus</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertJson</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token single-quoted-string string">'created'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean constant">true</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>El método <code>assertJson</code> convierte la respuesta a un arreglo y utiliza <code>PHPUnit::assertArraySubset</code> para verificar que el arreglo dado exista dentro de la respuesta JSON devuelta por la aplicación. Así, si hay otras propiedades en la respuesta JSON, esta prueba aún pasará siempre y cuando el fragmento dado esté presente.</p></div> <p><a name="verifying-exact-match"></a></p> <h3 id="verificando-una-coincidencia-json-exacta"><a href="#verificando-una-coincidencia-json-exacta" class="header-anchor">#</a> Verificando una coincidencia JSON exacta</h3> <p>Si prefieres verificar que el arreglo dado esté contenido <strong>exactamente</strong> en la respuesta JSON devuelta por la aplicación, deberías usar el método <code>assertExactJson</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">class</span> <span class="token class-name">ExampleTest</span> <span class="token keyword">extends</span> <span class="token class-name">TestCase</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * A basic functional test example.
    *
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">testBasicExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'POST'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Sally'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$response</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertStatus</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertExactJson</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token single-quoted-string string">'created'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean constant">true</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p><a name="testing-file-uploads"></a></p> <h2 id="probando-subidas-de-archivos"><a href="#probando-subidas-de-archivos" class="header-anchor">#</a> Probando subidas de archivos</h2> <p>La clase <code>Illuminate\Http\UploadedFile</code> proporciona un método <code>fake</code> el cual puede ser usado para generar archivos de prueba o imágenes para prueba. Esto, combinado con el método <code>fake</code> de la clase facade <code>Storage</code> simplifica grandemente la prueba de subidas de archivos. Por ejemplo, puedes combinar estas dos características para probar fácilmente un formulario de subida de un avatar:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">Tests<span class="token punctuation">\</span>Feature</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Tests<span class="token punctuation">\</span>TestCase</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>UploadedFile</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Storage</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Foundation<span class="token punctuation">\</span>Testing<span class="token punctuation">\</span>RefreshDatabase</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Foundation<span class="token punctuation">\</span>Testing<span class="token punctuation">\</span>WithoutMiddleware</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ExampleTest</span> <span class="token keyword">extends</span> <span class="token class-name">TestCase</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">testAvatarUpload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">fake</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'avatars'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$file</span> <span class="token operator">=</span> UploadedFile<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">fake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">image</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'avatar.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'POST'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'/avatar'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
            <span class="token single-quoted-string string">'avatar'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$file</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Assert the file was stored...</span>
        Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">disk</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'avatars'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertExists</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hashName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Assert a file does not exist...</span>
        Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">disk</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'avatars'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertMissing</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'missing.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><h4 id="personalizacion-de-archivo-fake"><a href="#personalizacion-de-archivo-fake" class="header-anchor">#</a> Personalización de archivo fake</h4> <p>Al momento de crear archivos usando el método <code>fake</code>, puedes especificar el ancho, la altura y el tamaño de la imagen con el propósito de probar mejor tus reglas de validación:</p> <div class="language-php extra-class"><pre class="language-php"><code>UploadedFile<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">fake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">image</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'avatar.jpg'</span><span class="token punctuation">,</span> <span class="token variable">$width</span><span class="token punctuation">,</span> <span class="token variable">$height</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Además de crear imágenes, puedes crear archivos de cualquier otro tipo usando el método <code>create</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>UploadedFile<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">fake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'document.pdf'</span><span class="token punctuation">,</span> <span class="token variable">$sizeInKilobytes</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="available-assertions"></a></p> <h2 id="aserciones-disponibles"><a href="#aserciones-disponibles" class="header-anchor">#</a> Aserciones disponibles</h2> <p><a name="response-assertions"></a></p> <h3 id="aserciones-de-respuesta"><a href="#aserciones-de-respuesta" class="header-anchor">#</a> Aserciones de respuesta</h3> <p>Laravel proporciona una variedad de métodos de aserción personalizados para tus pruebas <a href="https://phpunit.de/" target="_blank" rel="noopener noreferrer">PHPUnit<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Estas aserciones pueden ser accedidas en la respuesta que es retornada por los métodos de prueba <code>json</code>, <code>get</code>, <code>post</code>, <code>put</code> y <code>delete</code>:</p> <div markdown="1" class="collection-method-list"><p><a href="#assert-cookie">assertCookie</a> <a href="#assert-cookie-expired">assertCookieExpired</a> <a href="#assert-cookie-not-expired">assertCookieNotExpired</a> <a href="#assert-cookie-missing">assertCookieMissing</a> <a href="#assert-dont-see">assertDontSee</a> <a href="#assert-dont-see-text">assertDontSeeText</a> <a href="#assert-exact-json">assertExactJson</a> <a href="#assert-forbidden">assertForbidden</a> <a href="#assert-header">assertHeader</a> <a href="#assert-header-missing">assertHeaderMissing</a> <a href="#assert-json">assertJson</a> <a href="#assert-json-count">assertJsonCount</a> <a href="#assert-json-fragment">assertJsonFragment</a> <a href="#assert-json-missing">assertJsonMissing</a> <a href="#assert-json-missing-exact">assertJsonMissingExact</a> <a href="#assert-json-missing-validation-errors">assertJsonMissingValidationErrors</a> <a href="#assert-json-structure">assertJsonStructure</a> <a href="#assert-json-validation-errors">assertJsonValidationErrors</a> <a href="#assert-location">assertLocation</a> <a href="#assert-not-found">assertNotFound</a> <a href="#assert-ok">assertOk</a> <a href="#assert-plain-cookie">assertPlainCookie</a> <a href="#assert-redirect">assertRedirect</a> <a href="#assert-see">assertSee</a> <a href="#assert-see-in-order">assertSeeInOrder</a> <a href="#assert-see-text">assertSeeText</a> <a href="#assert-see-text-in-order">assertSeeTextInOrder</a> <a href="#assert-session-has">assertSessionHas</a> <a href="#assert-session-has-all">assertSessionHasAll</a> <a href="#assert-session-has-errors">assertSessionHasErrors</a> <a href="#assert-session-has-errors-in">assertSessionHasErrorsIn</a> <a href="#assert-session-has-no-errors">assertSessionHasNoErrors</a> <a href="#assert-session-doesnt-have-errors">assertSessionDoesntHaveErrors</a> <a href="#assert-session-missing">assertSessionMissing</a> <a href="#assert-status">assertStatus</a> <a href="#assert-successful">assertSuccessful</a> <a href="#assert-successful">assertSuccessful</a> <a href="#assert-view-has">assertViewHas</a> <a href="#assert-view-has-all">assertViewHasAll</a> <a href="#assert-view-is">assertViewIs</a> <a href="#assert-view-missing">assertViewMissing</a></p></div> <p><a name="assert-cookie"></a></p> <h4 id="assertcookie"><a href="#assertcookie" class="header-anchor">#</a> assertCookie</h4> <p>Comprueba que la respuesta contenga el cookie dado:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertCookie</span><span class="token punctuation">(</span><span class="token variable">$cookieName</span><span class="token punctuation">,</span> <span class="token variable">$value</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-cookie-expired"></a></p> <h4 id="assertcookieexpired"><a href="#assertcookieexpired" class="header-anchor">#</a> assertCookieExpired</h4> <p>Comprueba que la respuesta contenga el cookie dado y que esté vencido:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertCookieExpired</span><span class="token punctuation">(</span><span class="token variable">$cookieName</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-cookie-not-expired"></a></p> <h4 id="assertcookienotexpired"><a href="#assertcookienotexpired" class="header-anchor">#</a> assertCookieNotExpired</h4> <p>Comprueba que la respuesta contenga la cookie dada y que no haya expirado:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertCookieNotExpired</span><span class="token punctuation">(</span><span class="token variable">$cookieName</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-cookie-missing"></a></p> <h4 id="assertcookiemissing"><a href="#assertcookiemissing" class="header-anchor">#</a> assertCookieMissing</h4> <p>Comprueba que la respuesta no contenga el cookie dado:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertCookieMissing</span><span class="token punctuation">(</span><span class="token variable">$cookieName</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-dont-see"></a></p> <h4 id="assertdontsee"><a href="#assertdontsee" class="header-anchor">#</a> assertDontSee</h4> <p>Comprueba que la cadena dada no esté contenida dentro de la respuesta:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertDontSee</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-dont-see-text"></a></p> <h4 id="assertdontseetext"><a href="#assertdontseetext" class="header-anchor">#</a> assertDontSeeText</h4> <p>Comprueba que la cadena dada no esté contenida dentro del texto de la respuesta:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertDontSeeText</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-exact-json"></a></p> <h4 id="assertexactjson"><a href="#assertexactjson" class="header-anchor">#</a> assertExactJson</h4> <p>Comprueba que la respuesta contenga una coincidencia exacta de los datos JSON dados:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertExactJson</span><span class="token punctuation">(</span><span class="token keyword">array</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-forbidden"></a></p> <h4 id="assertforbidden"><a href="#assertforbidden" class="header-anchor">#</a> assertForbidden</h4> <p>Comprueba que la respuesta tenga un código de estado &quot;prohibido&quot;:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertForbidden</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-header"></a></p> <h4 id="assertheader"><a href="#assertheader" class="header-anchor">#</a> assertHeader</h4> <p>Comprueba que el encabezado dado esté presente en la respuesta:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertHeader</span><span class="token punctuation">(</span><span class="token variable">$headerName</span><span class="token punctuation">,</span> <span class="token variable">$value</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-header-missing"></a></p> <h4 id="assertheadermissing"><a href="#assertheadermissing" class="header-anchor">#</a> assertHeaderMissing</h4> <p>Comprueba que el encabezado dado no esté presente en la respuesta:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertHeaderMissing</span><span class="token punctuation">(</span><span class="token variable">$headerName</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-json"></a></p> <h4 id="assertjson"><a href="#assertjson" class="header-anchor">#</a> assertJson</h4> <p>Comprueba que la respuesta contenga los datos JSON dados:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertJson</span><span class="token punctuation">(</span><span class="token keyword">array</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-json-count"></a></p> <h4 id="assertjsoncount"><a href="#assertjsoncount" class="header-anchor">#</a> assertJsonCount</h4> <p>Comprueba que la respuesta JSON tenga un arreglo con el número esperado de elementos en la llave dada:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertJsonCount</span><span class="token punctuation">(</span><span class="token variable">$count</span><span class="token punctuation">,</span> <span class="token variable">$key</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-json-fragment"></a></p> <h4 id="assertjsonfragment"><a href="#assertjsonfragment" class="header-anchor">#</a> assertJsonFragment</h4> <p>Comprueba que la respuesta contenga el fragmento JSON dado:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertJsonFragment</span><span class="token punctuation">(</span><span class="token keyword">array</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-json-missing"></a></p> <h4 id="assertjsonmissing"><a href="#assertjsonmissing" class="header-anchor">#</a> assertJsonMissing</h4> <p>Comprueba que la respuesta no contenga el fragmento JSON dado:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertJsonMissing</span><span class="token punctuation">(</span><span class="token keyword">array</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-json-missing-exact"></a></p> <h4 id="assertjsonmissingexact"><a href="#assertjsonmissingexact" class="header-anchor">#</a> assertJsonMissingExact</h4> <p>Comprueba que la respuesta no contenga el fragmento exacto JSON:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertJsonMissingExact</span><span class="token punctuation">(</span><span class="token keyword">array</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-json-missing-validation-errors"></a></p> <h4 id="assertjsonmissingvalidationerrors"><a href="#assertjsonmissingvalidationerrors" class="header-anchor">#</a> assertJsonMissingValidationErrors</h4> <p>Comprueba que la respuesta no contenga errores de validación JSON para la llaves dadas:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertJsonMissingValidationErrors</span><span class="token punctuation">(</span><span class="token variable">$keys</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-json-structure"></a></p> <h4 id="assertjsonstructure"><a href="#assertjsonstructure" class="header-anchor">#</a> assertJsonStructure</h4> <p>Comprueba que la respuesta tenga una estructura JSON dada:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertJsonStructure</span><span class="token punctuation">(</span><span class="token keyword">array</span> <span class="token variable">$structure</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-json-validation-errors"></a></p> <h4 id="assertjsonvalidationerrors"><a href="#assertjsonvalidationerrors" class="header-anchor">#</a> assertJsonValidationErrors</h4> <p>Comprueba que la respuesta tenga los errores de validación JSON dados:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertJsonValidationErrors</span><span class="token punctuation">(</span><span class="token keyword">array</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-location"></a></p> <h4 id="assertlocation"><a href="#assertlocation" class="header-anchor">#</a> assertLocation</h4> <p>Comprueba que la respuesta tenga el valor URI dado en el encabezado <code>Location</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertLocation</span><span class="token punctuation">(</span><span class="token variable">$uri</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-not-found"></a></p> <h4 id="assertnotfound"><a href="#assertnotfound" class="header-anchor">#</a> assertNotFound</h4> <p>Comprueba que la respuesta tenga un código de estado &quot;no encontrado&quot;:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertNotFound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-ok"></a></p> <h4 id="assertok"><a href="#assertok" class="header-anchor">#</a> assertOk</h4> <p>Comprueba que la respuesta tenga un código de estado 200:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-plain-cookie"></a></p> <h4 id="assertplaincookie"><a href="#assertplaincookie" class="header-anchor">#</a> assertPlainCookie</h4> <p>Comprueba que la respuesta contenga el cookie dado (desencriptado):</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertPlainCookie</span><span class="token punctuation">(</span><span class="token variable">$cookieName</span><span class="token punctuation">,</span> <span class="token variable">$value</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-redirect"></a></p> <h4 id="assertredirect"><a href="#assertredirect" class="header-anchor">#</a> assertRedirect</h4> <p>Comprueba que la respuesta es una redirección a una URI dada:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertRedirect</span><span class="token punctuation">(</span><span class="token variable">$uri</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-see"></a></p> <h4 id="assertsee"><a href="#assertsee" class="header-anchor">#</a> assertSee</h4> <p>Comprueba que la cadena dada esté contenida dentro de la respuesta:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertSee</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-see-in-order"></a></p> <h4 id="assertseeinorder"><a href="#assertseeinorder" class="header-anchor">#</a> assertSeeInOrder</h4> <p>Comprueba que las cadenas dadas estén en orden dentro de la respuesta:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertSeeInOrder</span><span class="token punctuation">(</span><span class="token keyword">array</span> <span class="token variable">$values</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-see-text"></a></p> <h4 id="assertseetext"><a href="#assertseetext" class="header-anchor">#</a> assertSeeText</h4> <p>Comprueba que la cadena dada esté contenida dentro del texto de la respuesta:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertSeeText</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-see-text-in-order"></a></p> <h4 id="assertseetextinorder"><a href="#assertseetextinorder" class="header-anchor">#</a> assertSeeTextInOrder</h4> <p>Comprueba que las cadenas dadas estén en orden dentro del texto de respuesta:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertSeeTextInOrder</span><span class="token punctuation">(</span><span class="token keyword">array</span> <span class="token variable">$values</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-session-has"></a></p> <h4 id="assertsessionhas"><a href="#assertsessionhas" class="header-anchor">#</a> assertSessionHas</h4> <p>Comprueba que la sesión contenga la porción dada de datos:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertSessionHas</span><span class="token punctuation">(</span><span class="token variable">$key</span><span class="token punctuation">,</span> <span class="token variable">$value</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-session-has-all"></a></p> <h4 id="assertsessionhasall"><a href="#assertsessionhasall" class="header-anchor">#</a> assertSessionHasAll</h4> <p>Comprueba que la sesión tenga una lista dada de valores:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertSessionHasAll</span><span class="token punctuation">(</span><span class="token keyword">array</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-session-has-errors"></a></p> <h4 id="assertsessionhaserrors"><a href="#assertsessionhaserrors" class="header-anchor">#</a> assertSessionHasErrors</h4> <p>Comprueba que la sesión contenga un error para el campo dado:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertSessionHasErrors</span><span class="token punctuation">(</span><span class="token keyword">array</span> <span class="token variable">$keys</span><span class="token punctuation">,</span> <span class="token variable">$format</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">,</span> <span class="token variable">$errorBag</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-session-has-errors-in"></a></p> <h4 id="assertsessionhaserrorsin"><a href="#assertsessionhaserrorsin" class="header-anchor">#</a> assertSessionHasErrorsIn</h4> <p>Comprueba que la sesión tenga los errores dados:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertSessionHasErrorsIn</span><span class="token punctuation">(</span><span class="token variable">$errorBag</span><span class="token punctuation">,</span> <span class="token variable">$keys</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$format</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-session-has-no-errors"></a></p> <h4 id="assertsessionhasnoerrors"><a href="#assertsessionhasnoerrors" class="header-anchor">#</a> assertSessionHasNoErrors</h4> <p>Comprueba que la sesión no contenga errores:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertSessionHasNoErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-session-doesnt-have-errors"></a></p> <h4 id="assertsessiondoesnthaveerrors"><a href="#assertsessiondoesnthaveerrors" class="header-anchor">#</a> assertSessionDoesntHaveErrors</h4> <p>Comprueba que la sesión no contenga errores para las llaves dadas:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertSessionDoesntHaveErrors</span><span class="token punctuation">(</span><span class="token variable">$keys</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$format</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">,</span> <span class="token variable">$errorBag</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-session-missing"></a></p> <h4 id="assertsessionmissing"><a href="#assertsessionmissing" class="header-anchor">#</a> assertSessionMissing</h4> <p>Comprueba que la sesión no contenga la llave dada:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertSessionMissing</span><span class="token punctuation">(</span><span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-status"></a></p> <h4 id="assertstatus"><a href="#assertstatus" class="header-anchor">#</a> assertStatus</h4> <p>Comprueba que la respuesta tenga un código dado:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertStatus</span><span class="token punctuation">(</span><span class="token variable">$code</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-successful"></a></p> <h4 id="assertsuccessful"><a href="#assertsuccessful" class="header-anchor">#</a> assertSuccessful</h4> <p>Comprueba que la respuesta tenga un código de estado de éxito (200):</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertSuccessful</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-unauthorized"></a></p> <h4 id="assertunauthorized"><a href="#assertunauthorized" class="header-anchor">#</a> assertUnauthorized</h4> <p>Comprueba que la respuesta tiene un código de estado sin autorización (401):</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertUnauthorized</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-view-has"></a></p> <h4 id="assertviewhas"><a href="#assertviewhas" class="header-anchor">#</a> assertViewHas</h4> <p>Comprueba que la vista de la respuesta dada contiene los valores indicados:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertViewHas</span><span class="token punctuation">(</span><span class="token variable">$key</span><span class="token punctuation">,</span> <span class="token variable">$value</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-view-has-all"></a></p> <h4 id="assertviewhasall"><a href="#assertviewhasall" class="header-anchor">#</a> assertViewHasAll</h4> <p>Comprueba que la vista de la respuesta tiene una lista de datos:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertViewHasAll</span><span class="token punctuation">(</span><span class="token keyword">array</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-view-is"></a></p> <h4 id="assertviewis"><a href="#assertviewis" class="header-anchor">#</a> assertViewIs</h4> <p>Comprueba que la vista dada fue retornada por la ruta:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertViewIs</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="assert-view-missing"></a></p> <h4 id="assertviewmissing"><a href="#assertviewmissing" class="header-anchor">#</a> assertViewMissing</h4> <p>Comprueba que a la vista de la respuesta le está faltando una porción de datos enlazados:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertViewMissing</span><span class="token punctuation">(</span><span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="authentication-assertions"></a></p> <h3 id="aserciones-de-autenticacion"><a href="#aserciones-de-autenticacion" class="header-anchor">#</a> Aserciones de autenticación</h3> <p>Laravel también proporciona una variedad de aserciones relacionadas con la autenticación para tus pruebas <a href="https://phpunit.de/" target="_blank" rel="noopener noreferrer">PHPUnit<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <table><thead><tr><th>Método</th> <th>Descripción</th></tr></thead> <tbody><tr><td><code>$this-&gt;assertAuthenticated($guard = null);</code></td> <td>Comprueba que el usuario está autenticado.</td></tr> <tr><td><code>$this-&gt;assertGuest($guard = null);</code></td> <td>Comprueba que el usuario no está autenticado.</td></tr> <tr><td><code>$this-&gt;assertAuthenticatedAs($user, $guard = null);</code></td> <td>Comprueba que el usuario dado está autenticado.</td></tr> <tr><td><code>$this-&gt;assertCredentials(array $credentials, $guard = null);</code></td> <td>Comprueba que las credenciales dadas son válidas.</td></tr> <tr><td><code>$this-&gt;assertInvalidCredentials(array $credentials, $guard = null);</code></td> <td>Comprueba que las credenciales dadas no son válidas.</td></tr></tbody></table></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/testing.html" class="prev">Pruebas: Primeros Pasos</a></span> <span class="next"><a href="/console-tests.html">Pruebas de consola</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4ceb28d1.js" defer></script><script src="/assets/js/2.86610498.js" defer></script><script src="/assets/js/7.7b0749cd.js" defer></script>
  </body>
</html>
