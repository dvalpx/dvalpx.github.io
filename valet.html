<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VuePress</title>
    <meta name="generator" content="VuePress 1.8.1">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.f7a12d87.css" as="style"><link rel="preload" href="/assets/js/app.92aaed9e.js" as="script"><link rel="preload" href="/assets/js/2.648c6578.js" as="script"><link rel="preload" href="/assets/js/77.db030077.js" as="script"><link rel="prefetch" href="/assets/js/10.1713bb95.js"><link rel="prefetch" href="/assets/js/11.f0ca56a6.js"><link rel="prefetch" href="/assets/js/12.5865c9a5.js"><link rel="prefetch" href="/assets/js/13.8e509b37.js"><link rel="prefetch" href="/assets/js/14.2d9f5c97.js"><link rel="prefetch" href="/assets/js/15.b917edb6.js"><link rel="prefetch" href="/assets/js/16.a13d2a39.js"><link rel="prefetch" href="/assets/js/17.d6b71ec0.js"><link rel="prefetch" href="/assets/js/18.adbe50b4.js"><link rel="prefetch" href="/assets/js/19.a1638529.js"><link rel="prefetch" href="/assets/js/20.393f35ab.js"><link rel="prefetch" href="/assets/js/21.a9dd9148.js"><link rel="prefetch" href="/assets/js/22.087385e4.js"><link rel="prefetch" href="/assets/js/23.b6ce1d9c.js"><link rel="prefetch" href="/assets/js/24.a74b28c6.js"><link rel="prefetch" href="/assets/js/25.7a984c35.js"><link rel="prefetch" href="/assets/js/26.cf45c453.js"><link rel="prefetch" href="/assets/js/27.e36a56dc.js"><link rel="prefetch" href="/assets/js/28.358fc226.js"><link rel="prefetch" href="/assets/js/29.f4fd2139.js"><link rel="prefetch" href="/assets/js/3.40d230a8.js"><link rel="prefetch" href="/assets/js/30.564d0795.js"><link rel="prefetch" href="/assets/js/31.0691b4c8.js"><link rel="prefetch" href="/assets/js/32.088de00e.js"><link rel="prefetch" href="/assets/js/33.4d884bb7.js"><link rel="prefetch" href="/assets/js/34.c4be32cd.js"><link rel="prefetch" href="/assets/js/35.b78c77b2.js"><link rel="prefetch" href="/assets/js/36.ceed3144.js"><link rel="prefetch" href="/assets/js/37.f9d6aca2.js"><link rel="prefetch" href="/assets/js/38.67ad3e03.js"><link rel="prefetch" href="/assets/js/39.5e3e70a7.js"><link rel="prefetch" href="/assets/js/4.e81ef12f.js"><link rel="prefetch" href="/assets/js/40.0510efa5.js"><link rel="prefetch" href="/assets/js/41.4e2bcf98.js"><link rel="prefetch" href="/assets/js/42.ebc7d9c8.js"><link rel="prefetch" href="/assets/js/43.e5970289.js"><link rel="prefetch" href="/assets/js/44.f91a9970.js"><link rel="prefetch" href="/assets/js/45.5cda67e6.js"><link rel="prefetch" href="/assets/js/46.037dce36.js"><link rel="prefetch" href="/assets/js/47.fadd0db4.js"><link rel="prefetch" href="/assets/js/48.457d9287.js"><link rel="prefetch" href="/assets/js/49.da492613.js"><link rel="prefetch" href="/assets/js/5.dc790133.js"><link rel="prefetch" href="/assets/js/50.cab6e13d.js"><link rel="prefetch" href="/assets/js/51.0765def4.js"><link rel="prefetch" href="/assets/js/52.518165a7.js"><link rel="prefetch" href="/assets/js/53.1e887b4a.js"><link rel="prefetch" href="/assets/js/54.bc10b491.js"><link rel="prefetch" href="/assets/js/55.2e54a7e8.js"><link rel="prefetch" href="/assets/js/56.169c81e5.js"><link rel="prefetch" href="/assets/js/57.a4ef4ed1.js"><link rel="prefetch" href="/assets/js/58.78dc0897.js"><link rel="prefetch" href="/assets/js/59.f13515c7.js"><link rel="prefetch" href="/assets/js/6.de2c94ff.js"><link rel="prefetch" href="/assets/js/60.ebfdeb63.js"><link rel="prefetch" href="/assets/js/61.6523e015.js"><link rel="prefetch" href="/assets/js/62.cb19c9bd.js"><link rel="prefetch" href="/assets/js/63.6ae10337.js"><link rel="prefetch" href="/assets/js/64.50298a81.js"><link rel="prefetch" href="/assets/js/65.d1849c5b.js"><link rel="prefetch" href="/assets/js/66.caef6860.js"><link rel="prefetch" href="/assets/js/67.a2788988.js"><link rel="prefetch" href="/assets/js/68.1c43eae0.js"><link rel="prefetch" href="/assets/js/69.e16965c5.js"><link rel="prefetch" href="/assets/js/7.0466c7e3.js"><link rel="prefetch" href="/assets/js/70.e66fe735.js"><link rel="prefetch" href="/assets/js/71.6d49148f.js"><link rel="prefetch" href="/assets/js/72.c3d54f60.js"><link rel="prefetch" href="/assets/js/73.a2d3ebc6.js"><link rel="prefetch" href="/assets/js/74.f1ed7f47.js"><link rel="prefetch" href="/assets/js/75.5dd47c5c.js"><link rel="prefetch" href="/assets/js/76.634dc6b8.js"><link rel="prefetch" href="/assets/js/78.ef9b3a22.js"><link rel="prefetch" href="/assets/js/79.a9b05b84.js"><link rel="prefetch" href="/assets/js/8.0435cf5c.js"><link rel="prefetch" href="/assets/js/80.88069fe6.js"><link rel="prefetch" href="/assets/js/9.427a2f55.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f7a12d87.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><div><h1 id="laravel-valet"><a class="header-anchor" href="#laravel-valet">#</a> Laravel Valet</h1> <ul><li><a href="#introduction">Introducción</a> <ul><li><a href="#valet-or-homestead">Valet o Homestead</a></li></ul></li> <li><a href="#installation">Instalación</a> <ul><li><a href="#upgrading">Actualización</a></li></ul></li> <li><a href="#serving-sites">Activar sitios</a> <ul><li><a href="#the-park-command">El comando &quot;Park&quot;</a></li> <li><a href="#the-link-command">El comando &quot;Link&quot;</a></li> <li><a href="#securing-sites">Asegurar sitios con TLS</a></li></ul></li> <li><a href="#sharing-sites">Compartir sitios</a></li> <li><a href="#serving-a-default-site">Servir un sitio predeterminado</a></li> <li><a href="#site-specific-environment-variables">Variables de entorno específicas del sitio</a></li> <li><a href="#custom-valet-drivers">Drivers de Valet personalizados</a> <ul><li><a href="#local-drivers">Drivers locales</a></li></ul></li> <li><a href="#php-configuration">Configuración de PHP</a></li> <li><a href="#other-valet-commands">Otros comandos de Valet</a></li> <li><a href="#valet-directories-and-files">Archivos y directorios de Valet</a></li></ul> <p><a name="introduction"></a></p> <h2 id="introduccion"><a class="header-anchor" href="#introduccion">#</a> Introducción</h2> <p>Valet es un entorno de desarrollo minimalista de Laravel para Mac. No requiere de Vagrant ni de modificar el archivo de configuración <code>/etc/hosts</code>. Incluso permite compartir tus sitios a través de túneles locales. <em>Sí, también nos gusta</em></p> <p>Laravel Valet configura tu Mac para que siempre inicie el servicio de <a href="https://www.nginx.com/" target="_blank" rel="noopener noreferrer">Nginx<OutboundLink></OutboundLink></a> en segundo plano al iniciar tu computadora. Después, usando <a href="https://en.wikipedia.org/wiki/Dnsmasq" target="_blank" rel="noopener noreferrer">DnsMasq<OutboundLink></OutboundLink></a>, Valet actuará como servidor proxy, procesando todas las peticiones en el dominio <code>*.test</code> apuntando a los sitios instalados en tu máquina local.</p> <p>En otras palabras, es un entorno de desarrollo de Laravel sorprendentemente rápido y solamente utiliza cerca de 7MB de RAM. Laravel Valet no está pensado para ser un reemplazo de Vagrant o Homestead, en su lugar presenta una alternativa flexible y rápida, lo cual es una buena opción para quienes tengan una cantidad limitada de RAM.</p> <p>Por defecto, Valet brinda soporte para las siguientes tecnologías, pero no está limitado a sólo ellas:</p> <ul><li><a href="https://laravel.com" target="_blank" rel="noopener noreferrer">Laravel<OutboundLink></OutboundLink></a></li> <li><a href="https://lumen.laravel.com" target="_blank" rel="noopener noreferrer">Lumen<OutboundLink></OutboundLink></a></li> <li><a href="https://roots.io/bedrock/" target="_blank" rel="noopener noreferrer">Bedrock<OutboundLink></OutboundLink></a></li> <li><a href="https://cakephp.org" target="_blank" rel="noopener noreferrer">CakePHP 3<OutboundLink></OutboundLink></a></li> <li><a href="https://www.concrete5.org/" target="_blank" rel="noopener noreferrer">Concrete5<OutboundLink></OutboundLink></a></li> <li><a href="https://contao.org/en/" target="_blank" rel="noopener noreferrer">Contao<OutboundLink></OutboundLink></a></li> <li><a href="https://craftcms.com" target="_blank" rel="noopener noreferrer">Craft CMS<OutboundLink></OutboundLink></a></li> <li><a href="https://www.drupal.org/" target="_blank" rel="noopener noreferrer">Drupal<OutboundLink></OutboundLink></a></li> <li><a href="https://jigsaw.tighten.co" target="_blank" rel="noopener noreferrer">Jigsaw<OutboundLink></OutboundLink></a></li> <li><a href="https://www.joomla.org/" target="_blank" rel="noopener noreferrer">Joomla<OutboundLink></OutboundLink></a></li> <li><a href="https://github.com/themsaid/katana" target="_blank" rel="noopener noreferrer">Katana<OutboundLink></OutboundLink></a></li> <li><a href="https://getkirby.com/" target="_blank" rel="noopener noreferrer">Kirby<OutboundLink></OutboundLink></a></li> <li><a href="https://magento.com/" target="_blank" rel="noopener noreferrer">Magento<OutboundLink></OutboundLink></a></li> <li><a href="https://octobercms.com/" target="_blank" rel="noopener noreferrer">OctoberCMS<OutboundLink></OutboundLink></a></li> <li><a href="https://sculpin.io/" target="_blank" rel="noopener noreferrer">Sculpin<OutboundLink></OutboundLink></a></li> <li><a href="https://www.slimframework.com" target="_blank" rel="noopener noreferrer">Slim<OutboundLink></OutboundLink></a></li> <li><a href="https://statamic.com" target="_blank" rel="noopener noreferrer">Statamic<OutboundLink></OutboundLink></a></li> <li>Static HTML</li> <li><a href="https://symfony.com" target="_blank" rel="noopener noreferrer">Symfony<OutboundLink></OutboundLink></a></li> <li><a href="https://wordpress.org" target="_blank" rel="noopener noreferrer">WordPress<OutboundLink></OutboundLink></a></li> <li><a href="https://framework.zend.com" target="_blank" rel="noopener noreferrer">Zend<OutboundLink></OutboundLink></a></li></ul> <p>Además, es posible extender Valet con tu propio <a href="#custom-valet-drivers">driver personalizado</a>.</p> <p><a name="valet-or-homestead"></a></p> <h3 id="valet-o-homestead"><a class="header-anchor" href="#valet-o-homestead">#</a> Valet o Homestead</h3> <p>Como sabrás, Laravel ofrece <RouterLink to="/homestead.html">Homestead</RouterLink>, otro entorno de desarrollo local de Laravel. Homestead y Valet difieren en cuanto a la audiencia a la que están pensados y su aproximación al desarrollo local. Homestead ofrece toda una máquina virtual de Ubuntu con Nginx instalado y configurado. Homestead es una muy buena elección si deseas tener un entorno de desarrollo virtualizado de Linux o si te encuentras trabajando con Windows / Linux.</p> <p>Por otro lado, Valet solamente es soportado por Mac y requiere que instales PHP y un servidor de base de datos directamente en tu equipo local. Esto puede lograrse fácilmente haciendo uso de <a href="https://brew.sh" target="_blank" rel="noopener noreferrer">Homebrew<OutboundLink></OutboundLink></a> con comandos como <code>brew install php</code> y <code>brew install mysql</code>. Valet proporciona un entorno de desarrollo local bastante rápido haciendo un uso mínimo de consumo de recursos, lo cual es genial para desarrolladores que solamente requieran de PHP / MySQL y no necesiten de todo un entorno virtualizado de desarrollo.</p> <p>Tanto Valet como Homestead son buenas elecciones para configurar tu entorno de desarrollo de Laravel. El que sea que vayas a elegir depende completamente de tu gusto personal o las necesidades de tu equipo.</p> <p><a name="installation"></a></p> <h2 id="instalacion"><a class="header-anchor" href="#instalacion">#</a> Instalación</h2> <p><strong>Valet requiere de macOS y <a href="https://brew.sh" target="_blank" rel="noopener noreferrer">Homebrew<OutboundLink></OutboundLink></a>. Antes de comenzar, asegúrate de que ningún otro programa como Apache o Nginx esté utilizando el puerto 80 de tu computadora.</strong></p> <ul><li>Instala o actualiza <a href="https://brew.sh/" target="_blank" rel="noopener noreferrer">Homebrew<OutboundLink></OutboundLink></a> a su última versión con <code>brew update</code>.</li> <li>Instala PHP 7.4 usando Homebrew con <code>brew install php</code>.</li> <li>Instala <a href="https://getcomposer.org" target="_blank" rel="noopener noreferrer">Composer<OutboundLink></OutboundLink></a>.</li> <li>Instala Valet por medio de Composer con <code>composer global require laravel/valet</code>. Asegúrate de que el directorio <code>~/.composer/vendor/bin</code> se encuentre en el &quot;PATH&quot; de tu sistema.</li> <li>Ejecuta el comando <code>valet install</code>. Esto va a configurar e instalar Valet y DnsMasq, y va a registrar el daemon de Valet para que se inicie junto con el sistema operativo.</li></ul> <p>Una vez que Valet haya sido instalado, trata de hacer ping a cualquier dominio <code>*.test</code> desde tu terminal usando un comando como <code>ping foobar.test</code>. Si Valet ha sido instalado correctamente deberás ver una respuesta de ese dominio en la dirección <code>127.0.0.1</code>.</p> <p>Valet iniciará automáticamente su daemon cada vez que el sistema inicie. Por lo tanto, si Valet se instaló adecuadamente, no hay necesidad de volver a ejecutar el comando <code>valet start</code> o <code>valet install</code>.</p> <h4 id="utilizar-otro-dominio"><a class="header-anchor" href="#utilizar-otro-dominio">#</a> Utilizar otro dominio</h4> <p>Por defecto, Valet actuará como servidor de tus proyectos usando el TLD <code>.test</code>. Si lo prefieres, puedes cambiar este dominio por otro de tu elección utilizando el comando <code>valet tld dominio</code>.</p> <p>Por ejemplo, si deseas utilizar el dominio <code>.app</code> en lugar de <code>.test</code>, ejecuta desde la terminal el comando <code>valet tld app</code> y Valet comenzará a servir tus proyectos con el dominio <code>*.app</code> automáticamente.</p> <h4 id="base-de-datos"><a class="header-anchor" href="#base-de-datos">#</a> Base de datos</h4> <p>Si necesitas de una base de datos, puedes instalar MySQL ejecutando el comando <code>brew install mysql@5.7</code> desde la terminal. Una vez que haya sido instalado, necesitarás iniciar el servicio de manera manual con el comando <code>brew services start mysql@5.7</code>. Podrás conectarte a tu base de datos en <code>127.0.0.1</code> utilizando el usuario <code>root</code> sin ninguna contraseña.</p> <h4 id="versiones-de-php"><a class="header-anchor" href="#versiones-de-php">#</a> Versiones de PHP</h4> <p>Valet te permite cambiar entre versiones de PHP usando el comando <code>valet use php@version</code>. Valet instalará la versión de PHP especificada mediante Brew si aún no está instalada:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code>valet <span class="token keyword">use</span> <span class="token package">php</span>@<span class="token number">7.2</span>

valet <span class="token keyword">use</span> <span class="token package">php</span>
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">Nota</p> <p>Valet sólo ejecuta una versión de PHP a la vez, incluso si tienes múltiples versiones de PHP instaladas.</p></div></div><h4 id="resetear-tu-instalacion"><a href="#resetear-tu-instalacion" class="header-anchor">#</a> Resetear tu instalación</h4> <p>Si estás teniendo problemas para que tu instalación de Valet funcione apropiadamente, ejecutar el comando <code>composer global update</code> seguido de <code>valet install</code> reseteará tu instalación y puede solucionar una variedad de problemas. En algunas ocasiones podría ser necesario un &quot;reinicio forzado&quot; ejecutando <code>valet uninstall --force</code> seguido de <code>valet install</code>.</p> <p><a name="upgrading"></a></p> <h3 id="actualizacion"><a href="#actualizacion" class="header-anchor">#</a> Actualización</h3> <p>Puedes actualizar tu instalación de Valet ejecutando el comando <code>composer global update</code> desde la terminal. Después de actualizar, es una buena práctica ejecutar el comando <code>valet install</code> para que Valet pueda hacer actualizaciones adicionales en sus archivos de configuración en caso de ser necesario.</p> <p><a name="serving-sites"></a></p> <h2 id="activar-sitios"><a href="#activar-sitios" class="header-anchor">#</a> Activar sitios</h2> <p>Una vez que Valet haya sido instalado, estarás listo para activar sitios. Valet proporciona dos comandos para ayudarte a activar sitios de Laravel: <code>park</code> y <code>link</code>.</p> <p><a name="the-park-command"></a></p> <h4 id="el-comando-park"><a href="#el-comando-park" class="header-anchor">#</a> El comando <code>park</code></h4> <ul><li>Crea un nuevo directorio en tu Mac ejecutando algo como lo siguiente en la terminal: <code>mkdir ~/Sites</code>, después <code>cd ~/Sites</code> y luego <code>valet park</code>. Este comando va a registrar tu directorio actual como una ruta en la que Valet deberá buscar los sitios.</li> <li>Después, crea un nuevo sitio de Laravel dentro de este directorio: <code>laravel new blog</code>.</li> <li>Abre tu navegador y dirígete a <code>http://blog.test</code>.</li></ul> <p><strong>Y eso es todo</strong>. Ahora, cada proyecto de Laravel que crees dentro de tu directorio &quot;parked&quot; <code>~/Sites</code> será visible desde el navegador utilizando la convención <code>http://folder-name.test</code>.</p> <p><a name="the-link-command"></a></p> <h4 id="el-comando-link"><a href="#el-comando-link" class="header-anchor">#</a> El comando <code>link</code></h4> <p>El comando <code>link</code> también puede ser utilizado para enlazar sitios de Laravel. Este comando es útil si deseas configurar un solo sitio en un directorio y no todos los sitios dentro de él.</p> <ul><li>Para utilizar este comando, deberás dirigirte a uno de tus proyectos desde la terminal y ejecutar <code>valet link app-name</code>. Valet creará un enlace simbólico en <code>~/.config/valet/Sites</code> el cuál apuntará hacia tu directorio actual.</li> <li>Después de ejecutar el comando <code>link</code>, podrás acceder al sitio desde tu navegador en <code>http://app-name.test</code>.</li></ul> <p>Para ver un listado de todos los directorios enlazados, ejecuta el comando <code>valet links</code>. Para destruir algún enlace simbólico deberás utilizar el comando <code>valet unlink app-name</code>.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Puedes utilizar <code>valet link</code> para configurar el mismo proyecto para múltiples (sub)dominios. Para agregar un subdominio o un dominio diferente para tu proyecto ejecuta <code>valet link subdomain.app-name</code> desde la carpeta del proyecto.</p></div> <p><a name="securing-sites"></a></p> <h4 id="asegurar-sitios-con-tls"><a href="#asegurar-sitios-con-tls" class="header-anchor">#</a> Asegurar sitios con TLS</h4> <p>Por defecto, Valet mostrará los sitios a través de HTTP plano. Sin embargo, si deseas que esté encriptado con TLS para ser utilizado con HTTP/2, el comando <code>secure</code> está disponible. Por ejemplo, si tu sitio está funcionando con Valet en el dominio <code>laravel.test</code>, podrás ejecutar el siguiente comando para asegurarlo:</p> <div class="language-php extra-class"><pre class="language-php"><code>valet secure laravel
</code></pre></div><p>Para quitar esta seguridad al sitio y revertir los cambios de nuevo hacia HTTP plano, deberás utilizar el comando <code>unsecure</code>. Al igual que el comando <code>secure</code>, este comando acepta el nombre del host al que se desea quitar la encriptación TLS.</p> <div class="language-php extra-class"><pre class="language-php"><code>valet unsecure laravel
</code></pre></div><p><a name="sharing-sites"></a></p> <h2 id="compartir-sitios"><a href="#compartir-sitios" class="header-anchor">#</a> Compartir sitios</h2> <p>Valet incluso tiene un comando para compartir tus sitios locales con el mundo, proporcionando una forma fácil de probar tus sitios en dispositivos móviles o compartirlo con miembros de tu equipo y clientes. Una vez que Valet está instalado no es necesario software adicional.</p> <h3 id="compartir-sitios-mediante-ngrok"><a href="#compartir-sitios-mediante-ngrok" class="header-anchor">#</a> Compartir sitios mediante Ngrok</h3> <p>Para compartir un sitio, deberás dirigirte hacia el directorio del sitio desde la terminal y ejecutar el comando <code>valet share</code>. Una URL accesible de manera pública será copiada a tu portapapeles y estará lista para que la pegues directamente en tu navegador o compartas con tu equipo.</p> <p>Para detener la ejecución de <code>share</code> en tu sitio, presiona <code>Control + C</code> para cancelar el proceso.</p> <div class="custom-block danger"><p class="custom-block-title">TIP</p> <p>Puedes pasar parametros adicionales al comando share, como <code>valet share --region=eu</code>. Para más información, consulta la <a href="https://ngrok.com/docs" target="_blank" rel="noopener noreferrer">documentación de ngrok<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <h3 id="compartir-sitios-en-tu-red-local"><a href="#compartir-sitios-en-tu-red-local" class="header-anchor">#</a> Compartir sitios en tu red local</h3> <p>Por defecto, Valet restringe el tráfico entrante a la interfaz <code>127.0.0.1</code>. De esta forma tu equipo de desarrollo no está expuesto a riesgos de seguridad en Internet.</p> <p>Si deseas permitir que otros dispositivos en tu red local accedan a los sitios de Valet en tu equipo mediante la IP de tu equipo (por ejemplo: <code>192.168.1.10/app-name.test</code>), necesitarás editar manualmente el archivo de configuración de Nginx apropiado para dicho sitio para remover la restricción en la directiva <code>listen</code> eliminando el prefijo <code>127.0.0.1:</code> en la directiva para los puertos 80 y 443.</p> <p>Si no has ejecutado <code>valet secure</code> en el proyecto, puedes abrir el acceso de la red para todos los sitios sin HTTPS editando el archivo <code>/usr/local/etc/nginx/valet/valet.conf</code>. Sin embargo, si estás sirviendo el sitio del proyecto mediante HTTPS (has ejecutado <code>valet secure</code> para el sitio) entonces deberás editar el archivo <code>~/.config/valet/Nginx/app-name.test</code>.</p> <p>Una vez que has actualizado la configuración de Nginx, ejecuta el comando <code>valet restart</code> para aplicar los cambios en la configuración.</p> <p><a name="site-specific-environment-variables"></a></p> <h2 id="variables-de-entorno-especificas-del-sitio"><a href="#variables-de-entorno-especificas-del-sitio" class="header-anchor">#</a> Variables de entorno específicas del sitio</h2> <p>Algunas aplicaciones que utilizan otros frameworks pueden depender de las variables de entorno del servidor, pero no proporcionan una manera para que esas variables sean configuradas dentro de tu proyecto. Valet te permite configurar variables de entorno específicas del sitio agregando un archivo <code>.valet-env.php</code> dentro de la raíz de tu proyecto. Estas variables se agregarán al arreglo global <code>$_SERVER</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token comment">// Set $_SERVER['key'] to &quot;value&quot; for the foo.test site...</span>
<span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'foo'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'key'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'value'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Set $_SERVER['key'] to &quot;value&quot; for all sites...</span>
<span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'*'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'key'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'value'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span></code></pre></div><p><a name="serving-a-default-site"></a></p> <h2 id="servir-un-sitio-predeterminado"><a href="#servir-un-sitio-predeterminado" class="header-anchor">#</a> Servir un sitio predeterminado</h2> <p>Algunas veces preferirás configurar Valet para que sirva un sitio &quot;predeterminado&quot; en lugar de un <code>404</code> al visitar un dominio de prueba <code>test</code> que sea desconocido. Para cumplir con esto, puedes agregar una opción <code>default</code> a tu archivo de configuración <code>~/.config/valet/config.json</code> que contenga la ruta al sito que debería funcionar como tu sitio predeterminado:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token string double-quoted-string">&quot;default&quot;</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">&quot;/Users/Sally/Sites/foo&quot;</span><span class="token punctuation">,</span>
</code></pre></div><p><a name="custom-valet-drivers"></a></p> <h2 id="drivers-de-valet-personalizados"><a href="#drivers-de-valet-personalizados" class="header-anchor">#</a> Drivers de Valet personalizados</h2> <p>Puedes escribir tu propio &quot;driver&quot; de Valet para utilizar aplicaciones de PHP que se estén ejecutando en otro framework o en un CMS que no sea soportado de manera nativa por Valet. Cuando se hace la instalación de Valet, es creado un directorio <code>~/.config/valet/Drivers</code> que contiene un archivo <code>SampleValetDriver.php</code>. Este archivo contiene la implementación de un driver de muestra para demostrar cómo escribir un driver personalizado. Escribir un driver solo requiere que implementes tres métodos: <code>serves</code>, <code>isStaticFile</code> y <code>frontControllerPath</code>.</p> <p>Los tres métodos reciben los valores de <code>$sitePath</code>, <code>$siteName</code> y <code>$uri</code> como argumentos. La variable <code>$sitePath</code> es la ruta completa del sitio que será configurado en tu equipo, algo como <code>/Users/Lisa/Sites/my-project</code>. La variable <code>$siteName</code> representa la porción &quot;host&quot; / &quot;site-name&quot; del dominio (<code>my-project</code>). La variable <code>$uri</code> es la petición URI entrante (<code>/foo/bar</code>).</p> <p>Una vez que hayas terminado con tu driver de Valet personalizado, se deberá colocar en el directorio <code>~/.config/valet/Drivers</code> usando la convención <code>FrameworkValetDriver.php</code> para nombrarlo. Por ejemplo, si estás escribiendo un driver personalizado de Valet para WordPress, tu archivo deberá ser <code>WordPressValetDriver.php</code>.</p> <p>Demos un vistazo a la implementación de ejemplo en cada uno de los métodos del driver personalizado de Valet.</p> <h4 id="el-metodo-serves"><a href="#el-metodo-serves" class="header-anchor">#</a> El método <code>serves</code></h4> <p>El método <code>serves</code> deberá retornar <code>true</code> si tu driver debe encargarse de las peticiones entrantes. De otra manera, este método deberá retornar <code>false</code>. Por lo tanto, dentro de este método deberás intentar determinar si el <code>$sitePath</code> dado contiene un proyecto del tipo que deseas configurar.</p> <p>Por ejemplo, vamos a pretender que estamos escribiendo un <code>WordPressValetDriver</code>. Nuestro método <code>serves</code> podría verse mas o menos como esto:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Determine if the driver serves the request.
*
* @param  string  $sitePath
* @param  string  $siteName
* @param  string  $uri
* @return bool
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">serves</span><span class="token punctuation">(</span><span class="token variable">$sitePath</span><span class="token punctuation">,</span> <span class="token variable">$siteName</span><span class="token punctuation">,</span> <span class="token variable">$uri</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">is_dir</span><span class="token punctuation">(</span><span class="token variable">$sitePath</span><span class="token operator">.</span><span class="token string single-quoted-string">'/wp-admin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="el-metodo-isstaticfile"><a href="#el-metodo-isstaticfile" class="header-anchor">#</a> El método <code>isStaticFile</code></h4> <p>El método <code>isStaticFile</code> deberá determinar si la petición entrante para un archivo es estático, como puede ser una imagen o una hoja de estilo. Si el archivo es estático, el método deberá retornar la ruta absoluta del archivo en disco. Si la petición entrante no es para un archivo estático, el método deberá retornar <code>false</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Determine if the incoming request is for a static file.
*
* @param  string  $sitePath
* @param  string  $siteName
* @param  string  $uri
* @return string|false
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">isStaticFile</span><span class="token punctuation">(</span><span class="token variable">$sitePath</span><span class="token punctuation">,</span> <span class="token variable">$siteName</span><span class="token punctuation">,</span> <span class="token variable">$uri</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">file_exists</span><span class="token punctuation">(</span><span class="token variable">$staticFilePath</span> <span class="token operator">=</span> <span class="token variable">$sitePath</span><span class="token operator">.</span><span class="token string single-quoted-string">'/public/'</span><span class="token operator">.</span><span class="token variable">$uri</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$staticFilePath</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token constant boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">Nota</p> <p>El método <code>isStaticFile</code> solo será llamado si el método <code>serves</code> retorna <code>true</code> para las peticiones entrantes y la URI es diferente a <code>/</code>.</p></div> <h4 id="el-metodo-frontcontrollerpath"><a href="#el-metodo-frontcontrollerpath" class="header-anchor">#</a> El método <code>frontControllerPath</code></h4> <p>El método <code>frontControllerPath</code> deberá retornar la ruta absoluta del &quot;front controller&quot; de tu aplicación, que usualmente es el archivo &quot;index.php&quot; o su equivalente:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Get the fully resolved path to the application's front controller.
*
* @param  string  $sitePath
* @param  string  $siteName
* @param  string  $uri
* @return string
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">frontControllerPath</span><span class="token punctuation">(</span><span class="token variable">$sitePath</span><span class="token punctuation">,</span> <span class="token variable">$siteName</span><span class="token punctuation">,</span> <span class="token variable">$uri</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$sitePath</span><span class="token operator">.</span><span class="token string single-quoted-string">'/public/index.php'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="local-drivers"></a></p> <h3 id="drivers-locales"><a href="#drivers-locales" class="header-anchor">#</a> Drivers locales</h3> <p>Si deseas definir un driver de Valet personalizado para una aplicación sencilla, deberás crear un archivo <code>LocalValetDriver.php</code> en el directorio raíz de tu aplicación. El driver personalizado deberá extender de la clase base <code>ValetDriver</code> o extender del driver de alguna aplicación existente, como puede ser <code>LaravelValetDriver</code>.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> LocalValetDriver <span class="token keyword">extends</span> <span class="token class-name">LaravelValetDriver</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Determine if the driver serves the request.
    *
    * @param  string  $sitePath
    * @param  string  $siteName
    * @param  string  $uri
    * @return bool
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">serves</span><span class="token punctuation">(</span><span class="token variable">$sitePath</span><span class="token punctuation">,</span> <span class="token variable">$siteName</span><span class="token punctuation">,</span> <span class="token variable">$uri</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token constant boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
    * Get the fully resolved path to the application's front controller.
    *
    * @param  string  $sitePath
    * @param  string  $siteName
    * @param  string  $uri
    * @return string
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">frontControllerPath</span><span class="token punctuation">(</span><span class="token variable">$sitePath</span><span class="token punctuation">,</span> <span class="token variable">$siteName</span><span class="token punctuation">,</span> <span class="token variable">$uri</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$sitePath</span><span class="token operator">.</span><span class="token string single-quoted-string">'/public_html/index.php'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="php-configuration"></a></p> <h2 id="configuracion-de-php"><a href="#configuracion-de-php" class="header-anchor">#</a> Configuración de PHP</h2> <p>Puedes agregar archivos <code>.ini</code> de configuración de PHP adicionales en el directorio <code>/usr/local/etc/php/7.X/conf.d/</code> para personalizar tu instalación de PHP. Una vez que hayas agregado o actualizado esas opciones de configuración deberías ejecutar <code>valet restart php</code>.</p> <h3 id="limites-de-memoria-de-php"><a href="#limites-de-memoria-de-php" class="header-anchor">#</a> Límites de memoria de PHP</h3> <p>De forma predeterminada, Valet especifica el límite de memoria y el tamaño máximo de los archivos que se pueden cargar de la instalación de PHP en el archivo de configuración <code>/usr/local/etc/php/7.X/conf.d/php-memory-limits.ini</code>. Esto afecta tanto a los procesos que se ejecutan desde la línea de comandos CLI como los del manejador de procesos Fast-CGI de PHP (FPM).</p> <h3 id="el-manejador-del-pool-de-procesos-fastcgi-de-php-php-fpm"><a href="#el-manejador-del-pool-de-procesos-fastcgi-de-php-php-fpm" class="header-anchor">#</a> El manejador del pool de Procesos FastCGI de PHP (PHP-FPM)</h3> <p>La configuración PHP-FPM de Valet se encuentra dentro del archivo de configuración <code>/usr/local/etc/php/7.X/php-fpm.d/valet-fpm.conf</code>. En este archivo puedes aumentar el número de servidores FPM y procesos hijos utilizados por tu aplicación de PHP.</p> <p><a name="other-valet-commands"></a></p> <h2 id="otros-comandos-de-valet"><a href="#otros-comandos-de-valet" class="header-anchor">#</a> Otros comandos de Valet</h2> <table><thead><tr><th>Comando</th> <th>Descripción</th></tr></thead> <tbody><tr><td><code>valet forget</code></td> <td>Ejecuta este comando desde el directorio donde ejecutaste el comando <code>park</code> para eliminarlo de la lista de directorios configurados.</td></tr> <tr><td><code>valet log</code></td> <td>Ver una lista de logs escritos por servicios de Valet.</td></tr> <tr><td><code>valet paths</code></td> <td>Ver una lista de directorios configurados.</td></tr> <tr><td><code>valet restart</code></td> <td>Reiniciar el daemon de Valet.</td></tr> <tr><td><code>valet start</code></td> <td>Iniciar el daemon de Valet.</td></tr> <tr><td><code>valet stop</code></td> <td>Detener el daemon de Valet.</td></tr> <tr><td><code>valet trust</code></td> <td>Agrega archivos sudoers para Brew y Valet para permitir que los comandos de Valet se ejecuten sin solicitar contraseñas.</td></tr> <tr><td><code>valet uninstall</code></td> <td>Desinstalar Valet: muestra instrucciones para la desinstalación manual; o pasa el parámetro <code>--force</code> para eliminar Valet directamente.</td></tr></tbody></table> <p><a name="valet-directories-and-files"></a></p> <h2 id="archivos-y-directorios-de-valet"><a href="#archivos-y-directorios-de-valet" class="header-anchor">#</a> Archivos y directorios de Valet</h2> <p>Puedes encontrar útil la siguiente información sobre directorios y archivos al momento de solucionar problemas en tu entorno de Valet:</p> <table><thead><tr><th>Archivo / Ruta</th> <th>Descripción</th></tr></thead> <tbody><tr><td><code>~/.config/valet/</code></td> <td>Contiene toda la configuración de Valet. Es recomendable tener un respaldo de este directorio.</td></tr> <tr><td><code>~/.config/valet/dnsmasq.d/</code></td> <td>Contiene la configuración de DNSMasq.</td></tr> <tr><td><code>~/.config/valet/Drivers/</code></td> <td>Contiene drivers personalizados de Valet.</td></tr> <tr><td><code>~/.config/valet/Extensions/</code></td> <td>Contiene extensiones y comandos personalizados de Valet.</td></tr> <tr><td><code>~/.config/valet/Nginx/</code></td> <td>Contiene toda las configuraciones de Nginx generadas por Valet. Estos archivos son compilados de nuevo al ejecutar los comandos <code>install</code>, <code>secure</code> y <code>tld</code>.</td></tr> <tr><td><code>~/.config/valet/Sites/</code></td> <td>Contiene todos los enlaces simbólicos de proyectos enlazados.</td></tr> <tr><td><code>~/.config/valet/config.json</code></td> <td>Archivo de configuración principal de Valet.</td></tr> <tr><td><code>~/.config/valet/valet.sock</code></td> <td>Socket PHP-FPM usado por la configuración de Nginx de Valet. Esto sólo existirá si PHP se está ejecutando de forma apropiada.</td></tr> <tr><td><code>~/.config/valet/Log/fpm-php.www.log</code></td> <td>Registro de usuario para errores de PHP.</td></tr> <tr><td><code>~/.config/valet/Log/nginx-error.log</code></td> <td>Registro de usuario para errores de Nginx.</td></tr> <tr><td><code>/usr/local/var/log/php-fpm.log</code></td> <td>Registro de sistema para errores de PHP-FPM.</td></tr> <tr><td><code>/usr/local/var/log/nginx</code></td> <td>Contiene registros de acceso y error de Nginx.</td></tr> <tr><td><code>/usr/local/etc/php/X.X/conf.d</code></td> <td>Contiene archivos <code>*.ini</code> para varias configuraciones de PHP.</td></tr> <tr><td><code>/usr/local/etc/php/X.X/php-fpm.d/valet-fpm.conf</code></td> <td>Archivo de configuración de PHP-FPM.</td></tr> <tr><td><code>~/.composer/vendor/laravel/valet/cli/stubs/secure.valet.conf</code></td> <td>Configuración por defecto de Nginx usada para construir certificados de sitios.</td></tr></tbody></table></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.92aaed9e.js" defer></script><script src="/assets/js/2.648c6578.js" defer></script><script src="/assets/js/77.db030077.js" defer></script>
  </body>
</html>
