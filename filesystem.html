<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Documentación de Laravel</title>
    <meta name="description" content="Documentación de Laravel en Español">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran:300,700|Miriam+Libre">
  <link rel="icon" href="/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.e4776f03.css" as="style"><link rel="preload" href="/assets/js/app.414985df.js" as="script"><link rel="preload" href="/assets/js/2.d29d9721.js" as="script"><link rel="preload" href="/assets/js/42.d2be7460.js" as="script"><link rel="prefetch" href="/assets/js/10.06ae6d81.js"><link rel="prefetch" href="/assets/js/11.cb761ed3.js"><link rel="prefetch" href="/assets/js/12.6744d13b.js"><link rel="prefetch" href="/assets/js/13.5edcd963.js"><link rel="prefetch" href="/assets/js/14.938d9805.js"><link rel="prefetch" href="/assets/js/15.50b4f609.js"><link rel="prefetch" href="/assets/js/16.aebb198c.js"><link rel="prefetch" href="/assets/js/17.7be24020.js"><link rel="prefetch" href="/assets/js/18.f48d0e83.js"><link rel="prefetch" href="/assets/js/19.e4c1e69a.js"><link rel="prefetch" href="/assets/js/20.3ca71a9f.js"><link rel="prefetch" href="/assets/js/21.60598d59.js"><link rel="prefetch" href="/assets/js/22.1391a025.js"><link rel="prefetch" href="/assets/js/23.301b707b.js"><link rel="prefetch" href="/assets/js/24.fd2ee8ba.js"><link rel="prefetch" href="/assets/js/25.621f52b4.js"><link rel="prefetch" href="/assets/js/26.1e463285.js"><link rel="prefetch" href="/assets/js/27.104a3534.js"><link rel="prefetch" href="/assets/js/28.a976e298.js"><link rel="prefetch" href="/assets/js/29.9fb0f352.js"><link rel="prefetch" href="/assets/js/3.9e091b22.js"><link rel="prefetch" href="/assets/js/30.f8d6ecb9.js"><link rel="prefetch" href="/assets/js/31.b99719c5.js"><link rel="prefetch" href="/assets/js/32.e731cf64.js"><link rel="prefetch" href="/assets/js/33.77250303.js"><link rel="prefetch" href="/assets/js/34.bd2ae1e5.js"><link rel="prefetch" href="/assets/js/35.d73c0139.js"><link rel="prefetch" href="/assets/js/36.f1e2eafb.js"><link rel="prefetch" href="/assets/js/37.cdfcdeaf.js"><link rel="prefetch" href="/assets/js/38.0a4ed781.js"><link rel="prefetch" href="/assets/js/39.8fdf2338.js"><link rel="prefetch" href="/assets/js/4.7fa90677.js"><link rel="prefetch" href="/assets/js/40.db681204.js"><link rel="prefetch" href="/assets/js/41.75f537e9.js"><link rel="prefetch" href="/assets/js/43.de82b0f0.js"><link rel="prefetch" href="/assets/js/44.cd99195b.js"><link rel="prefetch" href="/assets/js/45.2f33848e.js"><link rel="prefetch" href="/assets/js/46.c215049f.js"><link rel="prefetch" href="/assets/js/47.e81dfe0b.js"><link rel="prefetch" href="/assets/js/48.1a6a29f3.js"><link rel="prefetch" href="/assets/js/49.ce431379.js"><link rel="prefetch" href="/assets/js/5.5537c4c1.js"><link rel="prefetch" href="/assets/js/50.cd3e9b6d.js"><link rel="prefetch" href="/assets/js/51.a30d19cb.js"><link rel="prefetch" href="/assets/js/52.2dea50da.js"><link rel="prefetch" href="/assets/js/53.bb2ec31c.js"><link rel="prefetch" href="/assets/js/54.4ba7041e.js"><link rel="prefetch" href="/assets/js/55.47fd00ff.js"><link rel="prefetch" href="/assets/js/56.818a1edf.js"><link rel="prefetch" href="/assets/js/57.a08acc74.js"><link rel="prefetch" href="/assets/js/58.51b959bd.js"><link rel="prefetch" href="/assets/js/59.d7d0af5b.js"><link rel="prefetch" href="/assets/js/6.05ab48d1.js"><link rel="prefetch" href="/assets/js/60.1bd2d905.js"><link rel="prefetch" href="/assets/js/61.4705ab1f.js"><link rel="prefetch" href="/assets/js/62.012c978e.js"><link rel="prefetch" href="/assets/js/63.66a90d5c.js"><link rel="prefetch" href="/assets/js/64.1fa2fc1c.js"><link rel="prefetch" href="/assets/js/65.88c5f741.js"><link rel="prefetch" href="/assets/js/66.ab9ea3e7.js"><link rel="prefetch" href="/assets/js/67.b5c3ba83.js"><link rel="prefetch" href="/assets/js/68.f6bb988d.js"><link rel="prefetch" href="/assets/js/69.8662c518.js"><link rel="prefetch" href="/assets/js/7.30d1443f.js"><link rel="prefetch" href="/assets/js/70.4ae1bb32.js"><link rel="prefetch" href="/assets/js/71.b77ad72b.js"><link rel="prefetch" href="/assets/js/72.dd36252e.js"><link rel="prefetch" href="/assets/js/73.b859add3.js"><link rel="prefetch" href="/assets/js/74.57f28499.js"><link rel="prefetch" href="/assets/js/75.37ccb21c.js"><link rel="prefetch" href="/assets/js/76.c118db14.js"><link rel="prefetch" href="/assets/js/77.40aa03d7.js"><link rel="prefetch" href="/assets/js/78.fb3e2f47.js"><link rel="prefetch" href="/assets/js/79.a407b66e.js"><link rel="prefetch" href="/assets/js/8.9e93e5fc.js"><link rel="prefetch" href="/assets/js/80.68597ade.js"><link rel="prefetch" href="/assets/js/81.1aaf01cc.js"><link rel="prefetch" href="/assets/js/82.db278a1a.js"><link rel="prefetch" href="/assets/js/83.b36e815d.js"><link rel="prefetch" href="/assets/js/84.5732c9d6.js"><link rel="prefetch" href="/assets/js/85.8a33bb14.js"><link rel="prefetch" href="/assets/js/86.0a14198a.js"><link rel="prefetch" href="/assets/js/9.d68deab5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4776f03.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Documentación de Laravel</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div><div class="nav-item"><a href="/documentation.html" class="nav-link">Índice</a></div><div class="nav-item"><a href="/glossary.html" class="nav-link">Glosario</a></div><div class="nav-item"><a href="/credits.html" class="nav-link">Créditos</a></div><div class="nav-item"><a href="/descargar-documentacion.html" class="nav-link">Descargar documentación</a></div><div class="nav-item"><a href="https://v5.documentacion-laravel.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Documentación de Laravel 5.8
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://styde.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Styde
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div><div class="nav-item"><a href="/documentation.html" class="nav-link">Índice</a></div><div class="nav-item"><a href="/glossary.html" class="nav-link">Glosario</a></div><div class="nav-item"><a href="/credits.html" class="nav-link">Créditos</a></div><div class="nav-item"><a href="/descargar-documentacion.html" class="nav-link">Descargar documentación</a></div><div class="nav-item"><a href="https://v5.documentacion-laravel.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Documentación de Laravel 5.8
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://styde.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Styde
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Primeros pasos</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Conceptos de arquitectura</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Fundamentos</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Frontend</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Seguridad</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Profundizando</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/artisan.html" class="sidebar-link">Consola artisan</a></li><li><a href="/broadcasting.html" class="sidebar-link">Broadcasting</a></li><li><a href="/cache.html" class="sidebar-link">Caché</a></li><li><a href="/collections.html" class="sidebar-link">Colecciones</a></li><li><a href="/events.html" class="sidebar-link">Eventos</a></li><li><a href="/filesystem.html" class="active sidebar-link">Almacenamiento de archivos</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/filesystem.html#introduccion" class="sidebar-link">Introducción</a></li><li class="sidebar-sub-header"><a href="/filesystem.html#configuracion" class="sidebar-link">Configuración</a></li><li class="sidebar-sub-header"><a href="/filesystem.html#obteniendo-instancias-del-disco" class="sidebar-link">Obteniendo instancias del disco</a></li><li class="sidebar-sub-header"><a href="/filesystem.html#retornando-archivos" class="sidebar-link">Retornando archivos</a></li><li class="sidebar-sub-header"><a href="/filesystem.html#almacenando-archivos" class="sidebar-link">Almacenando archivos</a></li><li class="sidebar-sub-header"><a href="/filesystem.html#eliminando-archivos" class="sidebar-link">Eliminando archivos</a></li><li class="sidebar-sub-header"><a href="/filesystem.html#directorios" class="sidebar-link">Directorios</a></li><li class="sidebar-sub-header"><a href="/filesystem.html#sistemas-de-archivos-personalizados" class="sidebar-link">Sistemas de archivos personalizados</a></li></ul></li><li><a href="/helpers.html" class="sidebar-link">Helpers</a></li><li><a href="/mail.html" class="sidebar-link">Correos electrónicos</a></li><li><a href="/notifications.html" class="sidebar-link">Notificaciones</a></li><li><a href="/packages.html" class="sidebar-link">Desarrollo de paquetes</a></li><li><a href="/queues.html" class="sidebar-link">Colas de trabajo</a></li><li><a href="/scheduling.html" class="sidebar-link">Programación de tareas</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Bases de datos</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ORM Eloquent</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Pruebas</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Paquetes oficiales</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div><h1 id="almacenamiento-de-archivos"><a class="header-anchor" href="#almacenamiento-de-archivos" aria-hidden="true">#</a> Almacenamiento De Archivos</h1> <ul><li><a href="#introduction">Introducción</a></li> <li><a href="#configuration">Configuración</a> <ul><li><a href="#the-public-disk">Disco público</a></li> <li><a href="#the-local-driver">Driver local</a></li> <li><a href="#driver-prerequisites">Prerrequisitos del driver</a></li> <li><a href="#caching">Cache</a></li></ul></li> <li><a href="#obtaining-disk-instances">Obteniendo instancias del disco</a></li> <li><a href="#retrieving-files">Retornando archivos</a> <ul><li><a href="#downloading-files">Descargando archivos</a></li> <li><a href="#file-urls">URLs de archivos</a></li> <li><a href="#file-metadata">Metadatos de archivos</a></li></ul></li> <li><a href="#storing-files">Almacenando archivos</a> <ul><li><a href="#file-uploads">Carga de archivos</a></li> <li><a href="#file-visibility">Visibilidad de archivos</a></li></ul></li> <li><a href="#deleting-files">Eliminando archivos</a></li> <li><a href="#directories">Directorios</a></li> <li><a href="#custom-filesystems">Sitemas de archivos personalizados</a></li></ul> <p><a name="introduction"></a></p> <h2 id="introduccion"><a class="header-anchor" href="#introduccion" aria-hidden="true">#</a> Introducción</h2> <p>Laravel proporciona una podera abstracción del sistema de archivos gracias al genial paquete de PHP <a href="https://github.com/thephpleague/flysystem" target="_blank" rel="noopener noreferrer">Flysystem<OutboundLink></OutboundLink></a> de Frank de Jonge. La integración de Flysystem de Laravel proporciona drivers simples de usar para trabajar con sistemas de archivos locales, Amazon S3 y Rackspace Cloud Storage.</p> <p><a name="configuration"></a></p> <h2 id="configuracion"><a class="header-anchor" href="#configuracion" aria-hidden="true">#</a> Configuración</h2> <p>La configuración del sistema de archivos está ubicada en <code>config/filesystems.php</code>. Dentro de este archivo puedes configurar todos tus &quot;discos&quot;. Cada disco representa un driver de almacenamiento y una ubicación de almacenamiento en particular. Configuraciones de ejemplo para cada driver soportado están incluídas en el archivo de configuración. Así que, modifica la configuración para reflejar tus preferencias de almacenamiento y credenciales.</p> <p>Puedes configurar tantos discos como quieras e incluso tener múltiples discos que usen el mismo driver.</p> <p><a name="the-public-disk"></a></p> <h3 id="el-disco-publico"><a class="header-anchor" href="#el-disco-publico" aria-hidden="true">#</a> El disco público</h3> <p>El disco <code>public</code> está pensado para archivos que serán publicamente accesibles. Por defecto, el disco <code>public</code> usa el driver <code>local</code> y almacena estos archivos en <code>storage/app/public</code>. Para hacerlos accesibles desde la web, debes crear un enlace simbólico desde <code>public/storage</code> a <code>storage/app/public</code>. Esta convención mantendrá tus archivos publicamente accesibles en un directorio que puede ser fácilmente compartido a través de despliegues al usar sistemas de despligue sin tiempo de inactividad como <a href="https://envoyer.io" target="_blank" rel="noopener noreferrer">Envoyer<OutboundLink></OutboundLink></a>.</p> <p>Para crear un enlace simbólico, puedes usar el comando de Artisan <code>storage:link</code>:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code>php artisan storage<span class="token punctuation">:</span>link
</code></pre></div><p>Una vez que un archivo ha sido guardado y el enlace simbólico ha sido creado, puedes crear una URL a los archivos usando el helper <code>asset</code>:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token keyword">echo</span> <span class="token function">asset</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'storage/file.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="the-local-driver"></a></p> <h3 id="driver-local"><a class="header-anchor" href="#driver-local" aria-hidden="true">#</a> Driver local</h3> <p>Al usar el driver <code>local</code>, todas las operaciones sobre archivos son relativas al directorio <code>root</code> definido en tu archivo de configuración. Por defecto, este valor está establecido al directorio <code>storage/app</code>. Por lo tanto, el siguiente método almacenará un archivo en <code>storage/app/file.txt</code>:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code>Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">disk</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'local'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.txt'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Contents'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="driver-prerequisites"></a></p> <h3 id="prerrequisitos-del-driver"><a class="header-anchor" href="#prerrequisitos-del-driver" aria-hidden="true">#</a> Prerrequisitos del driver</h3> <h4 id="paquetes-de-composer"><a class="header-anchor" href="#paquetes-de-composer" aria-hidden="true">#</a> Paquetes de Composer</h4> <p>Antes de usar los drivers de SFTP, S3 o Rackspace, necesitarás instalar el paquete apropiado mediante Composer:</p> <ul><li>SFTP: <code>league/flysystem-sftp ~1.0</code></li> <li>Amazon S3: <code>league/flysystem-aws-s3-v3 ~1.0</code></li> <li>Rackspace: <code>league/flysystem-rackspace ~1.0</code></li></ul> <p>Algo sumamente recomendable para mejorar el rendimiento es usar un adaptador de caché. Necesitarás un paquete adicional para esto:</p> <ul><li>CachedAdapter: <code>league/flysystem-cached-adapter ~1.0</code></li></ul> <h4 id="configuracion-del-driver-s3"><a class="header-anchor" href="#configuracion-del-driver-s3" aria-hidden="true">#</a> Configuración del driver S3</h4> <p>La información de configuración del driver de S3 está ubicada en tu archivo de configuración <code>config/filesystems.php</code>. Este archivo contiene un arreglo de configuración de ejemplo para un driver de S3. Eres libre de modificar este arreglo con tu propia configuración y credenciales de S3. Por conveniencia, estas variables de entorno coinciden con la convención de nombres usada por AWS CLI.</p> <h4 id="configuracion-del-driver-ftp"><a class="header-anchor" href="#configuracion-del-driver-ftp" aria-hidden="true">#</a> Configuración del driver FTP</h4> <p>Las integraciones de Flysystem de Laravel funcionan bien con FTP; sin embargo, una configuración de ejemplo no está incluida con el archivo de configuración por defecto del framework <code>filesystems.php</code>. Si necesitas configurar un sistema de archivos FTP, puedes usar la siguiente configuración de ejemplo:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token single-quoted-string string">'ftp'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'driver'</span>   <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'ftp'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'host'</span>     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'ftp.example.com'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'username'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'your-username'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'password'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'your-password'</span><span class="token punctuation">,</span>

    <span class="token comment">// Optional FTP Settings...</span>
    <span class="token comment">// 'port'     =&gt; 21,</span>
    <span class="token comment">// 'root'     =&gt; '',</span>
    <span class="token comment">// 'passive'  =&gt; true,</span>
    <span class="token comment">// 'ssl'      =&gt; true,</span>
    <span class="token comment">// 'timeout'  =&gt; 30,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="configuracion-del-driver-sftp"><a class="header-anchor" href="#configuracion-del-driver-sftp" aria-hidden="true">#</a> Configuración del driver SFTP</h4> <p>Las integraciones de Flysystem de Laravel funcionan bien con SFTP; sin embargo, una configuración de ejemplo no está incluída con el archivo de configuración por defecto del framework <code>filesystems.php</code>. Si necesitas configurar un sistema de archivos SFTP, puedes usar la siguiente configuración de ejemplo:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token single-quoted-string string">'sftp'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'driver'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'sftp'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'host'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'example.com'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'username'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'your-username'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'password'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'your-password'</span><span class="token punctuation">,</span>

    <span class="token comment">// Settings for SSH key based authentication...</span>
    <span class="token comment">// 'privateKey' =&gt; '/path/to/privateKey',</span>
    <span class="token comment">// 'password' =&gt; 'encryption-password',</span>

    <span class="token comment">// Optional SFTP Settings...</span>
    <span class="token comment">// 'port' =&gt; 22,</span>
    <span class="token comment">// 'root' =&gt; '',</span>
    <span class="token comment">// 'timeout' =&gt; 30,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="configuracion-del-driver-rackspace"><a class="header-anchor" href="#configuracion-del-driver-rackspace" aria-hidden="true">#</a> Configuración del driver Rackspace</h4> <p>Las integraciones de Flysystem de Laravel funcionan bien con Rackspace; sin embargo, una configuración de ejemplo no está incluida con el archivo de configuración por defecto del framework <code>filesystems.php</code>. Si necesitas configurar un sistema de archivos de Rackspace, puedes usar la siguiente configuración de ejemplo:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token single-quoted-string string">'rackspace'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'driver'</span>    <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'rackspace'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'username'</span>  <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'your-username'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'key'</span>       <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'your-key'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'container'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'your-container'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'endpoint'</span>  <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'https://identity.api.rackspacecloud.com/v2.0/'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'region'</span>    <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'IAD'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'url_type'</span>  <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'publicURL'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p><a name="caching"></a></p> <h3 id="cache"><a class="header-anchor" href="#cache" aria-hidden="true">#</a> Cache</h3> <p>Para habilitar la cache para un disco dado, puedes agregar una directiva <code>cache</code> a las opciones de configuración del disco. La opción <code>cache</code> debe ser un arreglo de opciones de cache que contiene un nombre de disco <code>disk</code>, el tiempo de expiración en segundos <code>expire</code>, y el prefijo <code>prefix</code> de la cache:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token single-quoted-string string">'s3'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'driver'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'s3'</span><span class="token punctuation">,</span>

    <span class="token comment">// Other Disk Options...</span>

    <span class="token single-quoted-string string">'cache'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'store'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'memcached'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'expire'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">600</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'prefix'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'cache-prefix'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p><a name="obtaining-disk-instances"></a></p> <h2 id="obteniendo-instancias-del-disco"><a class="header-anchor" href="#obteniendo-instancias-del-disco" aria-hidden="true">#</a> Obteniendo instancias del disco</h2> <p>El facade <code>Storage</code> puede ser usado para interactuar con cualquier de tus discos configurados. Por ejemplo, puedes usar el método <code>put</code> en el facade para almacenar un avatar en el disco por defecto. Si llamas a métodos en el facade <code>Storage</code> sin primero llamar al método <code>disk</code>, la llamada al método será automáticamente pasada al disco por defecto:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Storage</span><span class="token punctuation">;</span>

Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'avatars/1'</span><span class="token punctuation">,</span> <span class="token variable">$fileContents</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Si tus aplicaciones interactuan con múltiples discos, puedes usar el método <code>disk</code> en el facade <code>Storage</code> para trabajar con archivos en un disco en particular:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code>Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">disk</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'s3'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'avatars/1'</span><span class="token punctuation">,</span> <span class="token variable">$fileContents</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="retrieving-files"></a></p> <h2 id="retornando-archivos"><a class="header-anchor" href="#retornando-archivos" aria-hidden="true">#</a> Retornando archivos</h2> <p>El método <code>get</code> puede ser usado para retornar el contenido de un archivo. Las cadenas del archivo serán retornadas por el método. Recuerda, todas las rutas del archivo deben ser especificadas relativas a la ubicación &quot;raíz&quot; configurada por el disco:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token variable">$contents</span> <span class="token operator">=</span> Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>El método <code>exists</code> puede ser usado para determinar si un archivo existe en el disco:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token variable">$exists</span> <span class="token operator">=</span> Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">disk</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'s3'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="downloading-files"></a></p> <h3 id="descargando-archivos"><a class="header-anchor" href="#descargando-archivos" aria-hidden="true">#</a> Descargando archivos</h3> <p>El método <code>download</code> puede ser usado para generar una respuesta que obliga al navegador del usuario a descargar el archivo al directorio dado. El método <code>download</code> acepta un nombre de archivo como segundo argumento del método, que determinará el nombre del archivo que es visto por el usuario descargando el archivo. Finalmente, puedes pasar un arreglo de encabezados HTTP como tercer argumento al método:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token keyword">return</span> Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">download</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">download</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">,</span> <span class="token variable">$name</span><span class="token punctuation">,</span> <span class="token variable">$headers</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="file-urls"></a></p> <h3 id="urls-de-archivos"><a class="header-anchor" href="#urls-de-archivos" aria-hidden="true">#</a> URLs de archivos</h3> <p>Puedes usar el método <code>url</code> para obtener la URL del archivo dado. Si estás usando el driver <code>local</code>, esto típicamente agregará <code>/storage</code> a la ruta dada y retornará una URL relativa al archivo. Si estás usando el driver <code>s3</code> o <code>rackspace</code>, será retornada la URL remota completamente habilitada:</p> <div class="language-php extra-class"><pre v-pre="" class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Storage</span><span class="token punctuation">;</span>

<span class="token variable">$url</span> <span class="token operator">=</span> Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="danger custom-block"><p class="custom-block-title">Nota</p> <p>Recuerda, si estás usando el driver <code>local</code>, todos los archivos que deberían ser públicamente accesibles deben ser colocados en el directorio <code>storage/app/public</code>. Además, debes <a href="#the-public-disk">crear un enlace simbólico</a> a <code>public/storage</code> que apunte al directorio <code>storage/app/public</code>.</p></div></div><h4 id="urls-temporales"><a href="#urls-temporales" aria-hidden="true" class="header-anchor">#</a> URLs temporales</h4> <p>Para archivos almacenados usando los drivers <code>s3</code> o <code>rackspace</code>, puedes crear una URL temporal a un archivo dado usando el método <code>temporaryUrl</code>. Este método acepta una ruta y una instancia <code>DateTime</code> que especifica cuando la URL debería expirar:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$url</span> <span class="token operator">=</span> Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">temporaryUrl</span><span class="token punctuation">(</span>
    <span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addMinutes</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Si necesitas especificar <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectGET.html#RESTObjectGET-requests" target="_blank" rel="noopener noreferrer">parametros de petición de S3<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> adicionales, puedes pasar el arreglo de parametros de petición como tercer argumento del método <code>temporaryUrl</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$url</span> <span class="token operator">=</span> Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">temporaryUrl</span><span class="token punctuation">(</span>
    <span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">,</span> 
    <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addMinutes</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token punctuation">[</span><span class="token single-quoted-string string">'ResponseContentType'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'application/octet-stream'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="personalizacion-del-host-de-url-local"><a href="#personalizacion-del-host-de-url-local" aria-hidden="true" class="header-anchor">#</a> Personalización del host de URL local</h4> <p>Si te gustaría predefinir el host para archivos almacenados en un disco usando el driver <code>local</code>, puedes agregar una opción <code>url</code> al arreglo de configuración del disco:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'public'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'driver'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'local'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'root'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">storage_path</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'app/public'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'url'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'APP_URL'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token single-quoted-string string">'/storage'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'visibility'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'public'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p><a name="file-metadata"></a></p> <h3 id="metadatos-de-archivos"><a href="#metadatos-de-archivos" aria-hidden="true" class="header-anchor">#</a> Metadatos de archivos</h3> <p>Además de leer y agregar archivos, Laravel también puede proporcionar información sobre los archivos. Por ejemplo, el método <code>size</code> puede ser usado para obtener el tamaño del archivo en bytes:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Storage</span><span class="token punctuation">;</span>

<span class="token variable">$size</span> <span class="token operator">=</span> Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>El método <code>lastModified</code> retorna la marca de tiempo de UNIX de la última vez en que el archivo fue modificado:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$time</span> <span class="token operator">=</span> Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">lastModified</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="storing-files"></a></p> <h2 id="almacenando-archivos"><a href="#almacenando-archivos" aria-hidden="true" class="header-anchor">#</a> Almacenando archivos</h2> <p>El método <code>put</code> puede ser usado para almacenar el contenido de archivos en un disco. Puedes también pasar un <code>recurso</code> de PHP al método <code>put</code>, que usará el soporte subyancete de stream de Flysystem. Usar streams es altamente recomendable al lidiar con archivos grandes:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Storage</span><span class="token punctuation">;</span>

Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">,</span> <span class="token variable">$contents</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">,</span> <span class="token variable">$resource</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="streaming-automatico"><a href="#streaming-automatico" aria-hidden="true" class="header-anchor">#</a> Streaming automático</h4> <p>Si te gustaría que Laravel automáticamente haga streaming de un archivo dado a tu ubicación de almacenamiento, puedes usar los métodos <code>putFile</code> o <code>putFileAs</code>. Este método acepta una instancia de <code>Illuminate\Http\File</code> o <code>Illuminate\Http\UploadedFile</code> y automáticamente hará stream del archivo a la ubicación deseada:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>File</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Storage</span><span class="token punctuation">;</span>

<span class="token comment">// Automatically generate a unique ID for file name...</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">putFile</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'photos'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/path/to/photo'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Manually specify a file name...</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">putFileAs</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'photos'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/path/to/photo'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'photo.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Hay algunas cosas importantes a tener en cuenta sobre el método <code>putFile</code>. Observa que sólo especificamos un nombre de directorio, no un nombre de archivo. Por defecto, el método <code>putFile</code> generará un ID único que servirá como nombre del archivo. La extensión del archivo será determinada examinando el tipo MIME del archivo. La ruta al archivo será retornada por el método <code>putFile</code> para que puedes almacenar la ruta, incluyendo el nombre de archivo generado, en tu base de datos.</p> <p>Los métodos <code>putFile</code> y <code>putFileAs</code> también aceptan un argumento para especificar la &quot;visibilidad&quot; del archivo almacenado. Esto es particularmente útil si estás almacenando el archivo en disco en la nube como S3 y te gustaría que el archivo sea públicamente accesible:</p> <div class="language-php extra-class"><pre class="language-php"><code>Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">putFile</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'photos'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/path/to/photo'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="anadir-al-inicio-o-al-final-de-un-archivo"><a href="#anadir-al-inicio-o-al-final-de-un-archivo" aria-hidden="true" class="header-anchor">#</a> Añadir al inicio o al final de un archivo</h4> <p>Los métodos <code>prepend</code> y <code>append</code> te permiten escribir al inicio o final de un archivo:</p> <div class="language-php extra-class"><pre class="language-php"><code>Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">prepend</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.log'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Prepended Text'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.log'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Appended Text'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="copiando-y-moviendo-archivos"><a href="#copiando-y-moviendo-archivos" aria-hidden="true" class="header-anchor">#</a> Copiando y moviendo archivos</h4> <p>El método <code>copy</code> puede ser usado para copiar un archivo existente a una nueva ubicación en el disco, mientras que el método <code>move</code> puede ser usado para renombrar o mover un archivo existente a una nueva ubicación:</p> <div class="language-php extra-class"><pre class="language-php"><code>Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'old/file.jpg'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'new/file.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'old/file.jpg'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'new/file.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="file-uploads"></a></p> <h3 id="carga-de-archivos"><a href="#carga-de-archivos" aria-hidden="true" class="header-anchor">#</a> Carga de archivos</h3> <p>En las aplicaciones web, una de los casos de uso más comunes para almacenar archivos es almacenar archivos cargados por los usuarios como imagenes de perfil, fotos y documentos. Laravel hace que sea muy fácil almacenar archivos cargados usando el método <code>store</code> en la instancia de un archivo cargado. Llama al método <code>store</code> con la ruta en la quieres almacenar el archivo:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>Controller</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">UserAvatarController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Update the avatar for the user.
    *
    * @param  Request  $request
    * @return Response
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$path</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'avatar'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'avatars'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token variable">$path</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Hay algunas cosas importantes a tener en cuenta sobre este ejemplo. Observa que sólo especificamos un nombre de directorio, no un nombre de archivo. Por defecto, el método <code>store</code> generará un ID único que servirá como nombre de archivo. La extensión del archivo será determinada examinando el tipo MIME del archivo. La ruta al archivo será retornada por el método <code>store</code> para que puedas guardar la ruta, inculyendo el nombre generado, en tu base de datos.</p> <p>También puedes llamar al método <code>putFile</code> en el facade <code>Storage</code> para realizar la misma manipulación de archivo del ejemplo superior:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$path</span> <span class="token operator">=</span> Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">putFile</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'avatars'</span><span class="token punctuation">,</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'avatar'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="especificando-un-nombre-de-archivo"><a href="#especificando-un-nombre-de-archivo" aria-hidden="true" class="header-anchor">#</a> Especificando un nombre de archivo</h4> <p>Si no te gustaría que un nombre de archivo sea automáticamente asignado a tu archivo almacenado, puedes usar el método <code>storeAs</code>, que recibe una ruta, el nombre del archivo y el disco (opcional) y sus argumentos:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$path</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'avatar'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">storeAs</span><span class="token punctuation">(</span>
    <span class="token single-quoted-string string">'avatars'</span><span class="token punctuation">,</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">id</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Puedes usar el método <code>putFileAs</code> en el facade <code>Storage</code>, que realizará las mismas manipulaciones de archivos del ejemplo de arriba:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$path</span> <span class="token operator">=</span> Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">putFileAs</span><span class="token punctuation">(</span>
    <span class="token single-quoted-string string">'avatars'</span><span class="token punctuation">,</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'avatar'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">id</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="especificando-un-disco"><a href="#especificando-un-disco" aria-hidden="true" class="header-anchor">#</a> Especificando un disco</h4> <p>Por defecto, este método usará tu disco predeterminado. Si te gustaría especificar otro disco, pasa el nombre del disco como segundo argumento al método <code>store</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$path</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'avatar'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">store</span><span class="token punctuation">(</span>
    <span class="token single-quoted-string string">'avatars/'</span><span class="token punctuation">.</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">id</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'s3'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="file-visibility"></a></p> <h3 id="visibilidad-de-archivos"><a href="#visibilidad-de-archivos" aria-hidden="true" class="header-anchor">#</a> Visibilidad de archivos</h3> <p>En la integración de Flysystem de Laravel, &quot;visibilidad&quot; es una abstracción de permisos de archivos a través de múltiples plataformas. Los archivos pueden ser declarados tanto <code>public</code> o <code>private</code>. Cuando un archivo es declarado <code>public</code>, estás indicando que el archivo debería ser generalmente accesible por otros. Por ejemplo, al usar el driver de S3, puedes retornar URLs para archivos <code>public</code>.</p> <p>Puedes establecer la visibilidad al establecer el archivo mediante el método <code>put</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Storage</span><span class="token punctuation">;</span>

Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">,</span> <span class="token variable">$contents</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Si el archivo ya ha sido almacenado, su visibilidad puede ser retornada y establecida mediante los métodos <code>getVisibility</code> y <code>setVisibility</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$visibility</span> <span class="token operator">=</span> Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getVisibility</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'public'</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="deleting-files"></a></p> <h2 id="eliminando-archivos"><a href="#eliminando-archivos" aria-hidden="true" class="header-anchor">#</a> Eliminando archivos</h2> <p>El método <code>delete</code> acepta un solo nombre de archivo o un arreglo de archivos a eliminar del disco:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Storage</span><span class="token punctuation">;</span>

Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'file2.jpg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Si es necesario, puedes especificar el disco en el que se debe eliminar el archivo:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Storage</span><span class="token punctuation">;</span>

Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">disk</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'s3'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'folder_path/file_name.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="directories"></a></p> <h2 id="directorios"><a href="#directorios" aria-hidden="true" class="header-anchor">#</a> Directorios</h2> <h4 id="obtener-todos-los-archivos-dentro-de-un-directorio"><a href="#obtener-todos-los-archivos-dentro-de-un-directorio" aria-hidden="true" class="header-anchor">#</a> Obtener todos los archivos dentro de un directorio</h4> <p>El método <code>files</code> retorna un arreglo de todos los archivos en un directorio dado. Si te gustaría retornar una lista de todos los archivos dentro de un directorio dado incluyendo subdirectorios, puedes usar el método <code>allFiles</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Storage</span><span class="token punctuation">;</span>

<span class="token variable">$files</span> <span class="token operator">=</span> Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">files</span><span class="token punctuation">(</span><span class="token variable">$directory</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$files</span> <span class="token operator">=</span> Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">allFiles</span><span class="token punctuation">(</span><span class="token variable">$directory</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="obtener-todos-los-directorios-dentro-de-un-directorio"><a href="#obtener-todos-los-directorios-dentro-de-un-directorio" aria-hidden="true" class="header-anchor">#</a> Obtener todos los directorios dentro de un directorio</h4> <p>El método <code>directories</code> retorna un arreglo de todos los directorios dentro de un directorio dado. Adicionalmente, puedes usar el método <code>allDirectories</code> para obtener una lista de todos los directorios dentro de un directorio dado y todos sus subdirectorios:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$directories</span> <span class="token operator">=</span> Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">directories</span><span class="token punctuation">(</span><span class="token variable">$directory</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Recursive...</span>
<span class="token variable">$directories</span> <span class="token operator">=</span> Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">allDirectories</span><span class="token punctuation">(</span><span class="token variable">$directory</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="crear-un-directorio"><a href="#crear-un-directorio" aria-hidden="true" class="header-anchor">#</a> Crear un directorio</h4> <p>El método <code>makeDirectory</code> creará el directorio dado, incluyendo cualquier subdirectorio necesario:</p> <div class="language-php extra-class"><pre class="language-php"><code>Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">makeDirectory</span><span class="token punctuation">(</span><span class="token variable">$directory</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="eliminar-un-directorio"><a href="#eliminar-un-directorio" aria-hidden="true" class="header-anchor">#</a> Eliminar un directorio</h4> <p>Finalmente, el método <code>deleteDirectory</code> puede ser usado para eliminar un directorio y todos sus archivos:</p> <div class="language-php extra-class"><pre class="language-php"><code>Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">deleteDirectory</span><span class="token punctuation">(</span><span class="token variable">$directory</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="custom-filesystems"></a></p> <h2 id="sistemas-de-archivos-personalizados"><a href="#sistemas-de-archivos-personalizados" aria-hidden="true" class="header-anchor">#</a> Sistemas de archivos personalizados</h2> <p>La integración de Flysystem de Laravel proporciona drivers para múltiples &quot;drivers&quot;; sin embargo, Flysystem no está limitado a estos y tiene adaptadores para muchos otros sistemas de almacenamiento. Puedes crear un driver personalizado si quieres usar alguno de los adaptadores adicionales en tu aplicación de Laravel.</p> <p>Para configurar el sistema de archivos personalizado necesitarás un adaptador de Flysystem. Vamos a agregar un adaptador de Dropbox mantenido por la comunidad a nuestro proyecto:</p> <div class="language-php extra-class"><pre class="language-php"><code>composer <span class="token keyword">require</span> spatie<span class="token operator">/</span>flysystem<span class="token operator">-</span>dropbox
</code></pre></div><p>Luego, debes crear un <a href="/providers.html">proveedor de servicios</a> como <code>DropboxServiceProvider</code>. En el método <code>boot</code> del proveedor, puedes usar el método <code>extend</code> del facade <code>Storage</code> para definir el driver personalizado:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Providers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Storage</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">League<span class="token punctuation">\</span>Flysystem<span class="token punctuation">\</span>Filesystem</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>ServiceProvider</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Spatie<span class="token punctuation">\</span>Dropbox<span class="token punctuation">\</span>Client</span> <span class="token keyword">as</span> DropboxClient<span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Spatie<span class="token punctuation">\</span>FlysystemDropbox<span class="token punctuation">\</span>DropboxAdapter</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">DropboxServiceProvider</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceProvider</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Register bindings in the container.
    *
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
    * Bootstrap any application services.
    *
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'dropbox'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$app</span><span class="token punctuation">,</span> <span class="token variable">$config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$client</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DropboxClient</span><span class="token punctuation">(</span>
                <span class="token variable">$config</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'authorization_token'</span><span class="token punctuation">]</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Filesystem</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DropboxAdapter</span><span class="token punctuation">(</span><span class="token variable">$client</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>El primer argumento del método <code>extend</code> es el nombre del driver y el segundo es una Closure que recibe las variables <code>$app</code> y <code>$config</code>. La Closure resolver debe retornar una instancia de <code>League\Flysystem\Filesystem</code>. La variable <code>$config</code> contiene los valores definidos en <code>config/filesystems.php</code> para el disco especificado.</p> <p>Luego, registra el proveedor de servicios en tu archivo de configuración <code>config/app.php</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'providers'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...</span>
    App\<span class="token package">Providers<span class="token punctuation">\</span>DropboxServiceProvider</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>Una vez que has creado y registrado el proveedor de servicios de la extensión, puedes usar el driver <code>dropbox</code> en tu archivo de configuración <code>config/filesystems.php</code>.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/events.html" class="prev">
          Eventos
        </a></span> <span class="next"><a href="/helpers.html">
          Helpers
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.414985df.js" defer></script><script src="/assets/js/2.d29d9721.js" defer></script><script src="/assets/js/42.d2be7460.js" defer></script>
  </body>
</html>
